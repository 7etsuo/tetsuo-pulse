{
  "number": 2258,
  "title": "[QUIC Transport Params] Optimize find_param_handler with binary search",
  "body": "## Summary\n\nThe `find_param_handler()` function in `SocketQUICTransportParams.c` uses linear search through 18 handler entries for every decoded transport parameter, resulting in O(n) lookup performance.\n\n## Location\n\n**File:** `src/quic/SocketQUICTransportParams.c`\n**Function:** `find_param_handler`\n**Lines:** 986-994\n\n## Issue Details\n\n**Severity:** HIGH  \n**Category:** Refactoring / Performance  \n**Pattern:** LINEAR_SEARCH_HANDLER\n\n### Current Code\n\n```c\nstatic ParamDecodeHandler\nfind_param_handler (uint64_t param_id)\n{\n  for (size_t i = 0; i < PARAM_HANDLER_COUNT; i++)\n    {\n      if (param_handlers[i].param_id == param_id)\n        return param_handlers[i].handler;\n    }\n  return NULL;\n}\n```\n\nThe `param_handlers` array has 18 entries (lines 957-978). This function is called for **every** decoded parameter in the handshake.\n\n### Performance Impact\n\n- Typical QUIC handshake: 10-15 transport parameters\n- Linear search: 150-270 comparisons per handshake  \n- Called during critical TLS handshake path\n\n### Recommendation\n\n**Option 1: Binary Search** (recommended)\n```c\n// Sort param_handlers by param_id at compile time (already sequential)\nstatic ParamDecodeHandler\nfind_param_handler (uint64_t param_id)\n{\n  // Binary search - O(log n)\n  size_t left = 0, right = PARAM_HANDLER_COUNT;\n  while (left < right) {\n    size_t mid = left + (right - left) / 2;\n    if (param_handlers[mid].param_id == param_id)\n      return param_handlers[mid].handler;\n    if (param_handlers[mid].param_id < param_id)\n      left = mid + 1;\n    else\n      right = mid;\n  }\n  return NULL;\n}\n```\n\n**Option 2: Switch Statement**  \nReplace the table lookup with a switch statement for O(1) compiler-optimized jump table.\n\n## References\n\n- RFC 9000 Section 18: Transport Parameters\n- Related: `decode_single_param()` calls this for every parameter at line 1056\n\n## Labels\n\n`performance`, `refactoring`, `quic`, `high-priority`",
  "labels": [],
  "state": "OPEN",
  "dependencies": []
}