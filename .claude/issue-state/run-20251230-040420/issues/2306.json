{
  "number": 2306,
  "title": "fix(simple-timer): add missing error clear in Socket_simple_timer_count",
  "body": "## Summary\n\nFunction `Socket_simple_timer_count()` sets an error but doesn't clear previous error state first, breaking consistency with all other API functions in this file.\n\n## Location\n\n**File**: src/simple/SocketSimple-timer.c\n**Line**: 391-397\n**Function**: Socket_simple_timer_count\n\n## Issue Details\n\nAll other public API functions in SocketSimple-timer.c follow a consistent pattern:\n1. Call `Socket_simple_clear_error()` first\n2. Perform validation/operation\n3. Set error if needed\n\nSocket_simple_timer_count() skips step 1, which could lead to confusing error state if a previous error existed.\n\n## Code Example\n\n**Current code** (line 391):\n```c\nint\nSocket_simple_timer_count (SocketSimple_Poll_T poll __attribute__ ((unused)))\n{\n  /* Timer count not available from core API. */\n  simple_set_error (SOCKET_SIMPLE_ERR_UNSUPPORTED,\n                    \"Timer count not supported\");\n  return -1;\n}\n```\n\n**Should be**:\n```c\nint\nSocket_simple_timer_count (SocketSimple_Poll_T poll __attribute__ ((unused)))\n{\n  Socket_simple_clear_error ();  /* ADD THIS LINE */\n  \n  /* Timer count not available from core API. */\n  simple_set_error (SOCKET_SIMPLE_ERR_UNSUPPORTED,\n                    \"Timer count not supported\");\n  return -1;\n}\n```\n\n## Comparison with Other Functions\n\nEvery other function in this file clears error first:\n- Socket_simple_timer_add (line 89)\n- Socket_simple_timer_cancel (line 175)\n- Socket_simple_timer_reschedule (line 213)\n- Socket_simple_timer_pause (line 249)\n- Socket_simple_timer_resume (line 285)\n\n## Impact\n\n- **Severity**: LOW (style/consistency)\n- **Category**: Refactoring\n- **Pattern ID**: MISSING_ERROR_CLEAR\n- Could confuse API users if old error persists\n- Breaks API consistency expectations\n- Simple one-line fix\n\n## Test Plan\n\n- [ ] Add test that calls function with existing error state\n- [ ] Verify error is properly cleared and new error set\n- [ ] Run existing timer tests\n\n---\n**Pattern**: MISSING_ERROR_CLEAR\n**Verified by**: per-file-pipeline-agent\n**Date**: 2025-12-30",
  "labels": [],
  "state": "OPEN",
  "dependencies": []
}