{
  "number": 2279,
  "title": "refactor(simple-http): break down Socket_simple_http_request into smaller functions",
  "body": "## Issue\nFile: `src/simple/SocketSimple-http.c`\nLines: 1134-1234\n\n**Pattern:** LONG_FUNCTION_100\n**Severity:** MEDIUM\n**Category:** Refactoring\n\n## Description\nThe `Socket_simple_http_request` function is 100+ lines long and handles multiple responsibilities:\n- Input validation\n- HTTP client creation\n- Request building with custom headers\n- Request execution\n- Exception handling for 8 different exception types\n- Response conversion\n- Resource cleanup\n\nThis violates the Single Responsibility Principle and makes the function harder to test and maintain.\n\n## Recommendation\nBreak the function into smaller, focused helpers:\n\n```c\nstatic int build_and_execute_request(\n    SocketHTTPClient_T client,\n    SocketHTTP_Method method,\n    const char *url,\n    const char **headers,\n    const void *body,\n    size_t body_len,\n    SocketHTTPClient_Response *lib_response\n);\n\nint Socket_simple_http_request(\n    SocketSimple_HTTPMethod method,\n    const char *url,\n    const char **headers,\n    const void *body,\n    size_t body_len,\n    const SocketSimple_HTTPOptions *opts,\n    SocketSimple_HTTPResponse *response\n) {\n    // Validation\n    if (!url || !response) {\n        simple_set_error(...);\n        return -1;\n    }\n\n    // Create client\n    SocketSimple_HTTP_T client = Socket_simple_http_new_ex(opts);\n    if (!client) return -1;\n\n    // Execute request\n    SocketHTTPClient_Response lib_response = {0};\n    int ret = build_and_execute_request(\n        client->client,\n        simple_method_to_http_method(method),\n        url, headers, body, body_len,\n        &lib_response\n    );\n\n    // Convert and cleanup\n    if (ret == 0) {\n        ret = convert_response(&lib_response, response);\n    }\n    SocketHTTPClient_Response_free(&lib_response);\n    Socket_simple_http_free(&client);\n\n    return ret;\n}\n```\n\n## Impact\n- Improves code readability\n- Makes testing easier (can test request building separately)\n- Reduces cognitive complexity\n- Follows Single Responsibility Principle\n- Aligns with CLAUDE.md anti-pattern guidelines (God Functions)",
  "labels": [
    "enhancement"
  ],
  "state": "OPEN",
  "dependencies": []
}