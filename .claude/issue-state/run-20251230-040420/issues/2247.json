{
  "number": 2247,
  "title": "refactor(simple-async): break down async_operation_common function",
  "body": "## Summary\n\nThe \\`async_operation_common\\` function in \\`src/simple/SocketSimple-async.c\\` spans 75 lines (lines 183-257) and handles multiple responsibilities, making it difficult to test and maintain.\n\n## Details\n\n**File:** \\`src/simple/SocketSimple-async.c\\`\n**Lines:** 183-257\n**Severity:** HIGH\n**Pattern:** LONG_FUNCTION_100\n\nThe function performs:\n1. Parameter validation (async, socket, callback)\n2. Socket type checking\n3. Callback context allocation\n4. Operation submission with timeout logic\n5. Exception handling\n\n## Current Code Structure\n\n\\`\\`\\`c\nstatic unsigned\nasync_operation_common (SocketSimple_Async_T async,\n                        SocketSimple_Socket_T socket, void *buf, size_t len,\n                        SocketSimple_AsyncCallback cb, void *user_data,\n                        SocketSimple_AsyncFlags flags, int64_t timeout_ms,\n                        AsyncOpFunc op_func, AsyncOpTimeoutFunc op_timeout_func,\n                        const char *error_msg)\n{\n  // 75 lines of validation, allocation, and submission logic\n}\n\\`\\`\\`\n\n## Recommendation\n\nBreak into focused helper functions:\n\n\\`\\`\\`c\nstatic int validate_async_params(SocketSimple_Async_T async, \n                                   SocketSimple_Socket_T socket,\n                                   SocketSimple_AsyncCallback cb);\n\nstatic struct CallbackContext* allocate_callback_context(\n    SocketSimple_AsyncCallback cb,\n    void *user_data,\n    SocketSimple_Socket_T socket);\n\nstatic unsigned submit_async_operation(\n    SocketAsync_T async,\n    Socket_T core_socket,\n    void *buf, size_t len,\n    struct CallbackContext *ctx,\n    SocketAsync_Flags flags,\n    int64_t timeout_ms,\n    AsyncOpFunc op_func,\n    AsyncOpTimeoutFunc op_timeout_func);\n\\`\\`\\`\n\n## Benefits\n\n- Easier to unit test individual validation steps\n- Clearer separation of concerns\n- Reduced cognitive complexity\n- Better adherence to Single Responsibility Principle\n\n## References\n\nPer CLAUDE.md \"God Functions\" anti-pattern section.",
  "labels": [],
  "state": "OPEN",
  "dependencies": []
}