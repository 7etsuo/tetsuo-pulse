{
  "number": 1712,
  "title": "refactor(http-client-arena): flatten 3-level nesting in httpclient_get_arena_cache",
  "body": "## Summary\n\nThe `httpclient_get_arena_cache` function in `/home/tetsuo/git/tetsuo-socket/src/http/SocketHTTPClient-arena.c` contains 3-level nested if statements (lines 98-110) that reduce readability.\n\n## Current Code\n\n```c\ncache = pthread_getspecific (arena_cache_key);\nif (cache == NULL)              // Depth 1\n  {\n    cache = calloc (1, sizeof (*cache));\n    if (cache)                  // Depth 2\n      {\n        if (pthread_setspecific (arena_cache_key, cache) != 0)  // Depth 3\n          {\n            /* Failed to store in TLS - free and continue without cache */\n            free (cache);\n            cache = NULL;\n          }\n      }\n  }\n\nreturn cache;\n```\n\n## Issue Details\n\n- **File**: `/home/tetsuo/git/tetsuo-socket/src/http/SocketHTTPClient-arena.c`\n- **Lines**: 98-110\n- **Function**: `httpclient_get_arena_cache`\n- **Nesting Depth**: 3 levels\n- **Severity**: MEDIUM\n- **Pattern**: DEEP_NESTING_3\n\n## Recommendation\n\nFlatten with early returns or guard clauses:\n\n```c\ncache = pthread_getspecific (arena_cache_key);\nif (cache != NULL)\n  return cache;\n\ncache = calloc (1, sizeof (*cache));\nif (!cache)\n  return NULL;\n\nif (pthread_setspecific (arena_cache_key, cache) != 0)\n  {\n    free (cache);\n    return NULL;\n  }\n\nreturn cache;\n```\n\nThis improves readability by eliminating nested blocks and making the control flow more linear.\n\n## Benefits\n\n- Easier to follow control flow\n- Reduced cognitive load\n- Consistent with project's readability standards\n- Matches pattern from recent refactoring in HPACK (#1696, #1697) and HTTP client cookie (#1700)",
  "labels": [
    "wip:claude-1767050066-3589118"
  ],
  "state": "OPEN",
  "dependencies": []
}