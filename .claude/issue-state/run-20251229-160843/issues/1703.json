{
  "number": 1703,
  "title": "refactor(hpack): inline single-use decode_string_header function",
  "body": "## Summary\n\nThe function `decode_string_header` (lines 346-355) is a 10-line wrapper called exactly once. It can be inlined to reduce indirection.\n\n## File\n`src/http/SocketHPACK.c`\n\n## Line Range\n346-355\n\n## Pattern\nSINGLE_USE_INLINE\n\n## Severity\nHIGH\n\n## Issue\nSingle-use function that extracts the Huffman flag and decodes string length:\n\n```c\nstatic SocketHPACK_Result\ndecode_string_header (const unsigned char *input, size_t input_len,\n                      size_t *pos, int *huffman, uint64_t *str_len)\n{\n  if (input_len == 0)\n    return HPACK_INCOMPLETE;\n\n  *huffman = (input[0] & HPACK_STRING_HUFFMAN_FLAG) != 0;\n  return SocketHPACK_int_decode (input, input_len, HPACK_PREFIX_STRING,\n                                 str_len, pos);\n}\n```\n\nCalled only once at line 420 in `hpack_decode_string`:\n```c\nresult = decode_string_header (input, input_len, &pos, &huffman, &str_len);\nif (result != HPACK_OK)\n  return result;\n```\n\n## Call Count\nDefinition: Line 346\nCalls: Line 420 (1 call total)\n\n## Recommendation\n\nInline the function at its single call site:\n\n```c\nstatic SocketHPACK_Result\nhpack_decode_string (const unsigned char *input, size_t input_len,\n                     char **str_out, size_t *str_len_out, size_t *consumed,\n                     Arena_T arena)\n{\n  size_t pos = 0;\n  int huffman;\n  uint64_t str_len;\n  SocketHPACK_Result result;\n\n  // Inline decode_string_header\n  if (input_len == 0)\n    return HPACK_INCOMPLETE;\n\n  huffman = (input[0] & HPACK_STRING_HUFFMAN_FLAG) != 0;\n  result = SocketHPACK_int_decode (input, input_len, HPACK_PREFIX_STRING,\n                                   &str_len, &pos);\n  if (result != HPACK_OK)\n    return result;\n\n  // ... rest of function\n}\n```\n\nThis eliminates unnecessary function call overhead while keeping the logic clear.\n\n## Category\nrefactor\n\n## Analysis Source\nAutomated readability analysis - HPACK pipeline run",
  "labels": [],
  "state": "OPEN",
  "dependencies": []
}