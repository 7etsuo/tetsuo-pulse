{
  "number": 1728,
  "title": "refactor(http1-serialize): inline single-use add_request_extras function",
  "body": "## Summary\n\nThe static function `add_request_extras` (lines 316-328) is only called once in the entire file, making it a candidate for inlining to improve code locality.\n\n## Location\n\n**File**: `src/http/SocketHTTP1-serialize.c`\n**Lines**: 316-328 (13 lines)\n**Called at**: Line 365 in `SocketHTTP1_serialize_request`\n\n## Current Code\n\n```c\nstatic int\nadd_request_extras (const SocketHTTP_Request *request, char **buf,\n                    size_t *remaining)\n{\n  if (add_optional_host_header (request, buf, remaining) < 0)\n    return -1;\n\n  if (append_content_length_header (buf, remaining, request->headers,\n                                    request->has_body, request->content_length)\n      < 0)\n    return -1;\n\n  return safe_append_crlf (buf, remaining);\n}\n```\n\n**Single call site** (line 365):\n```c\nif (add_request_extras (request, &p, &remaining) < 0)\n  return -1;\n```\n\n## Recommendation\n\nInline this 13-line wrapper function directly into its only call site at line 365 in `SocketHTTP1_serialize_request` to:\n- Improve code locality and readability\n- Reduce unnecessary abstraction layer\n- Make the request serialization flow more explicit\n\n## Pattern\n\n- **Type**: SINGLE_USE_INLINE\n- **Severity**: HIGH (small wrapper function, clear inline candidate)\n- **Category**: Refactoring / Readability\n\n## Note\n\nThis function calls `add_optional_host_header` which is also single-use (#1723), so inlining this would chain-inline that function as well.",
  "labels": [
    "enhancement"
  ],
  "state": "OPEN",
  "dependencies": []
}