{
  "number": 2281,
  "title": "refactor(simple): remove redundant errno save/restore in simple_create_udp_handle",
  "body": "## Summary\n\nThe function `simple_create_udp_handle()` in `/home/tetsuo/git/tetsuo-socket/src/simple/SocketSimple.c` contains redundant errno save/restore operations at lines 129-130.\n\n## Location\n\n**File**: `/home/tetsuo/git/tetsuo-socket/src/simple/SocketSimple.c`  \n**Function**: `simple_create_udp_handle()`  \n**Lines**: 129-130\n\n## Issue\n\n```c\nif (!handle)\n  {\n    int saved_errno = errno; /* Preserve errno immediately */\n    errno = saved_errno;     /* Restore before helper call */\n    simple_set_error (SOCKET_SIMPLE_ERR_MEMORY, \"Memory allocation failed\");\n    return NULL;\n  }\n```\n\nThe code saves errno and immediately restores it without any intervening operations that could modify errno. This is dead code - identical to the issue in `simple_create_handle()`.\n\n## Root Cause\n\nThe pattern appears to be defensive programming, but the `simple_set_error()` function doesn't rely on errno being set - it takes an explicit error code parameter. There are no operations between the save and restore.\n\n## Recommendation\n\nRemove the redundant save/restore:\n\n```c\nif (!handle)\n  {\n    simple_set_error (SOCKET_SIMPLE_ERR_MEMORY, \"Memory allocation failed\");\n    return NULL;\n  }\n```\n\nNote: If errno preservation is needed for the error message, it's already captured in line 37 (`simple_error.errno_value = errno;`) inside `simple_set_error()`.\n\n## Impact\n\n- **Severity**: LOW\n- **Category**: Redundancy/Code Quality\n- **Performance**: Negligible (2 unnecessary stack operations)\n- **Maintainability**: Minor improvement (clearer code)\n\n## Pattern\n\nThis is the same pattern as in `simple_create_handle()` (issue #2275). These should be fixed together in a single commit.",
  "labels": [
    "enhancement",
    "wip:claude-1767092676-3930812"
  ],
  "state": "OPEN",
  "dependencies": []
}