{
  "number": 2293,
  "title": "perf(simple-http): use SocketHTTP_Headers_get_n with STRLEN_LIT for header lookups",
  "body": "## Issue\nFile: `src/simple/SocketSimple-http.c`\nLines: 119, 133\n\n**Pattern:** STYLE_HEADER_LOOKUP\n**Severity:** LOW\n**Category:** Performance\n\n## Description\nThe `convert_response` function uses `SocketHTTP_Headers_get` with string literals for header names, which causes runtime `strlen()` calls. According to CLAUDE.md Performance Patterns section, well-known HTTP header lookups with string literals should use the `_n` variants with `STRLEN_LIT()` for compile-time length calculation.\n\nCurrent code:\n```c\nct = SocketHTTP_Headers_get (src->headers, \"Content-Type\");\n// ...\nloc = SocketHTTP_Headers_get (src->headers, \"Location\");\n```\n\nThis calls `strlen(\"Content-Type\")` and `strlen(\"Location\")` at runtime on every response conversion.\n\n## Recommendation\nUse the `_n` variant with `STRLEN_LIT` macro:\n\n```c\n#define STRLEN_LIT(s) (sizeof(s) - 1)\n\nct = SocketHTTP_Headers_get_n (src->headers, \"Content-Type\",\n                                STRLEN_LIT(\"Content-Type\"));\nloc = SocketHTTP_Headers_get_n (src->headers, \"Location\",\n                                 STRLEN_LIT(\"Location\"));\n```\n\n## Impact\n- Eliminates runtime `strlen()` calls on hot path (every HTTP response)\n- Compile-time optimization for known header names\n- Follows CLAUDE.md performance best practices\n- Consistent with codebase performance patterns\n\n## Reference\nFrom CLAUDE.md:\n> When looking up well-known HTTP headers (string literals), use the `_n` variants with `STRLEN_LIT()` to avoid runtime `strlen()` calls",
  "labels": [
    "enhancement"
  ],
  "state": "OPEN",
  "dependencies": []
}