{
  "number": 2287,
  "title": "refactor(simple): break down Socket_simple_reconnect_new into smaller functions",
  "body": "## Summary\nThe `Socket_simple_reconnect_new()` function in `src/simple/SocketSimple-reconnect.c` is 59 lines long, exceeding the recommended 50-line guideline from CLAUDE.md.\n\n## Location\n**File**: `src/simple/SocketSimple-reconnect.c`  \n**Lines**: 74-133  \n**Function**: `Socket_simple_reconnect_new()`\n\n## Issue\nThe function handles multiple responsibilities:\n1. Input validation (host, port)\n2. Handle allocation\n3. Policy structure initialization and field mapping (15 lines of repetitive assignments)\n4. Core SocketReconnect creation with exception handling\n5. Error cleanup\n\n## Current Structure\n```c\nSocketSimple_Reconnect_T\nSocket_simple_reconnect_new (const char *host, int port,\n                              const SocketSimple_Reconnect_Policy *policy)\n{\n  // 59 lines of logic\n  // Lines 101-115 are particularly repetitive policy field copying\n}\n```\n\n## Recommendation\nExtract the policy initialization logic into a helper function:\n\n```c\nstatic void\ninit_core_policy(SocketReconnect_Policy_T *core_policy,\n                 const SocketSimple_Reconnect_Policy *policy)\n{\n  SocketReconnect_policy_defaults(core_policy);\n  \n  if (policy) {\n    core_policy->initial_delay_ms = policy->initial_delay_ms;\n    // ... other field mappings\n  }\n}\n```\n\nThis would reduce `Socket_simple_reconnect_new()` to ~45 lines and improve readability.\n\n## Benefits\n- Improves function readability\n- Makes policy initialization reusable\n- Follows \"God Functions\" anti-pattern guidance in CLAUDE.md\n- Easier to test policy initialization logic independently\n\n## Pattern\nPattern ID: `LONG_FUNCTION_50`  \nCategory: Refactoring  \nSeverity: MEDIUM\n\n## Related\nSee CLAUDE.md \"C Anti-Patterns and Fixes\" section on God Functions.",
  "labels": [
    "enhancement",
    "wip:claude-1767092676-3930812"
  ],
  "state": "OPEN",
  "dependencies": []
}