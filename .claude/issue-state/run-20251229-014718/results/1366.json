{
  "issue": 1366,
  "status": "already_resolved",
  "resolution": "The refactoring described in this issue has already been completed. The file src/socket/Socket-iov.c now contains:\n\n1. socket_wait_with_timeout() (lines 704-730) - Consolidates poll wait error handling with timeout calculation, exactly as requested in the issue\n2. socket_io_with_timeout() (lines 762-807) - Generic I/O with timeout helper using function pointers to eliminate duplication\n3. socket_send_with_timeout() and socket_recv_with_timeout() (lines 821-846) - Both use the consolidated helper instead of duplicating logic\n\nThe duplicate pattern mentioned in the issue (lines 642-653 for send and 714-725 for recv with nearly identical poll wait logic) no longer exists. The code has been refactored to use a single implementation that handles both send and recv cases through the poll_event parameter (POLLIN vs POLLOUT).\n\nAll benefits listed in the issue have been achieved:\n- Eliminates duplication (~20 lines of duplicate code removed)\n- Consistent error handling (single implementation)\n- Easier to maintain (changes to poll logic only need one edit)\n- Better testability (can test poll wait logic in isolation)\n- Clearer intent (function names document purpose)\n\nNo further action is required for this issue."
}
