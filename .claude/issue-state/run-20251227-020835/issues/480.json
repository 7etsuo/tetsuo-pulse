{
  "number": 480,
  "title": "refactor(socket): split long functions in socket modules",
  "body": "## Summary\n\nSeveral functions in the socket module exceed 100 lines and contain distinct logical sections that should be extracted into focused helper functions.\n\n## Functions to Refactor\n\n### 1. `socketcommon_perform_getaddrinfo` (SocketCommon.c:1228-1348)\n**Current Size**: ~121 lines\n\n**Proposed Extractions**:\n1. Extract `socketcommon_getaddrinfo_fallback()` - Handle direct getaddrinfo when resolver unavailable (~40 lines)\n2. Extract `socketcommon_resolve_ip_direct()` - Fast path for IP addresses (~36 lines)\n3. Keep DNS resolver path in main function\n\n**Rationale**: Three distinct code paths with duplicated error handling patterns.\n\n---\n\n### 2. `SocketProxy_tunnel` (SocketProxy.c:1626-1761)\n**Current Size**: ~136 lines\n\n**Proposed Extractions**:\n1. Extract `proxy_tunnel_tls_handshake()` - TLS handshake loop for HTTPS proxy (~83 lines)\n2. Keep validation, context setup, and main flow in caller\n\n**Rationale**: TLS handshake is a self-contained operation with its own state machine.\n\n---\n\n### 3. `socketproxy_parse_hostport` (SocketProxy.c:308-417)\n**Current Size**: ~110 lines\n\n**Proposed Extractions**:\n1. Extract `socketproxy_parse_ipv6_hostport()` - IPv6 bracket notation parsing (~43 lines)\n2. Extract `socketproxy_parse_ipv4_hostport()` - Regular host:port parsing (~35 lines)\n3. Keep dispatch and validation in main function\n\n**Rationale**: Two parsing paths share no logic and can be cleanly separated.\n\n---\n\n### 4. `SocketReconnect_new` (SocketReconnect.c:744-851)\n**Current Size**: ~108 lines\n\n**Proposed Extractions**:\n1. Extract `socketreconnect_validate_policy()` - Policy parameter validation and defaults (~28 lines)\n2. Extract `socketreconnect_copy_hostname()` - Hostname validation and arena allocation (~26 lines)\n3. Keep allocation and state initialization in constructor\n\n**Rationale**: Policy validation is reusable and hostname copy has distinct error handling.\n\n## Implementation Notes\n\n- Each extraction should be a static helper function\n- Maintain existing error handling patterns (exceptions vs return codes)\n- No functional changes - pure refactoring\n\n## Category\nRefactoring - Long Function",
  "labels": [],
  "state": "OPEN",
  "dependencies": []
}