<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tetsuo Pulse: HTTP Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="socket-brand.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Tetsuo Pulse<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">High-performance networking from Tetsuo</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('http_guide.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">HTTP Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Brief</b>: Complete HTTP/1.1 and HTTP/2 client/server implementation | <b>Tags</b>: <code>http</code>, <code>http1</code>, <code>http2</code>, <code>client</code>, <code>server</code>, <code>parsing</code></p>
<p>Complete guide to HTTP/1.1 and HTTP/2 support in the Socket Library.</p>
<p><b>Module Group</b>: HTTP | <b>Related Modules</b>: SocketHTTP, SocketHTTP1, SocketHTTP2, <a class="el" href="group__http.html#structSocketHTTPClient" title="Main HTTP client instance managing configuration, pool, auth, and state.">SocketHTTPClient</a>, <a class="el" href="group__http.html#structSocketHTTPServer" title="Internal implementation of the SocketHTTPServer opaque type.">SocketHTTPServer</a></p>
<hr  />
<h1><a class="anchor" id="autotoc_md842"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md843"></a>
Simple HTTP GET</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketHTTPClient_8h.html">http/SocketHTTPClient.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">SocketHTTPClient_T client = <a class="code hl_function" href="group__http__client.html#ga2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a>(NULL);</div>
<div class="line"><a class="code hl_struct" href="group__http__client.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a> response = {0};</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="group__http__client.html#gafef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, <span class="stringliteral">&quot;https://example.com&quot;</span>, &amp;response) == 0) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Status: %d\n&quot;</span>, response.<a class="code hl_variable" href="group__http__client.html#ga0baa2f233436d7bb00f28214d6382542">status_code</a>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Body: %.*s\n&quot;</span>, (<span class="keywordtype">int</span>)response.<a class="code hl_variable" href="group__http__client.html#gaae64f48637811f9ddbc8e12aea55e0e6">body_len</a>, (<span class="keywordtype">char</span>*)response.<a class="code hl_variable" href="group__http__client.html#gab7f8558743b64c751b64ac26231dca31">body</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a>(&amp;response);</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga01d6c9bebdcda63949ba9af698f8e7e5">SocketHTTPClient_free</a>(&amp;client);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html"><div class="ttname"><a href="SocketHTTPClient_8h.html">SocketHTTPClient.h</a></div><div class="ttdoc">Public API for the HTTP client module, including types, functions, and configuration.</div></div>
<div class="ttc" id="agroup__http__client_html_ga01d6c9bebdcda63949ba9af698f8e7e5"><div class="ttname"><a href="group__http__client.html#ga01d6c9bebdcda63949ba9af698f8e7e5">SocketHTTPClient_free</a></div><div class="ttdeci">void SocketHTTPClient_free(SocketHTTPClient_T *client)</div><div class="ttdoc">Destroy HTTP client and release all resources.</div></div>
<div class="ttc" id="agroup__http__client_html_ga0baa2f233436d7bb00f28214d6382542"><div class="ttname"><a href="group__http__client.html#ga0baa2f233436d7bb00f28214d6382542">SocketHTTPClient_Response::status_code</a></div><div class="ttdeci">int status_code</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00603">SocketHTTPClient.h:603</a></div></div>
<div class="ttc" id="agroup__http__client_html_ga2d57db3a9a6388315f253caa099e4205"><div class="ttname"><a href="group__http__client.html#ga2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a></div><div class="ttdeci">SocketHTTPClient_T SocketHTTPClient_new(const SocketHTTPClient_Config *config)</div><div class="ttdoc">Create new HTTP client instance.</div></div>
<div class="ttc" id="agroup__http__client_html_ga826bca53483c23de2c8b03d456010149"><div class="ttname"><a href="group__http__client.html#ga826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a></div><div class="ttdeci">void SocketHTTPClient_Response_free(SocketHTTPClient_Response *response)</div><div class="ttdoc">Free response resources.</div></div>
<div class="ttc" id="agroup__http__client_html_gaae64f48637811f9ddbc8e12aea55e0e6"><div class="ttname"><a href="group__http__client.html#gaae64f48637811f9ddbc8e12aea55e0e6">SocketHTTPClient_Response::body_len</a></div><div class="ttdeci">size_t body_len</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00606">SocketHTTPClient.h:606</a></div></div>
<div class="ttc" id="agroup__http__client_html_gab7f8558743b64c751b64ac26231dca31"><div class="ttname"><a href="group__http__client.html#gab7f8558743b64c751b64ac26231dca31">SocketHTTPClient_Response::body</a></div><div class="ttdeci">void * body</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00605">SocketHTTPClient.h:605</a></div></div>
<div class="ttc" id="agroup__http__client_html_gafef425814e66932f7cf1f36e9356b70e"><div class="ttname"><a href="group__http__client.html#gafef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a></div><div class="ttdeci">int SocketHTTPClient_get(SocketHTTPClient_T client, const char *url, SocketHTTPClient_Response *response)</div><div class="ttdoc">Perform synchronous GET request.</div></div>
<div class="ttc" id="agroup__http__client_html_structSocketHTTPClient__Response"><div class="ttname"><a href="group__http__client.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a></div><div class="ttdoc">HTTP response structure returned by client functions.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00601">SocketHTTPClient.h:602</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md844"></a>
Simple HTTP POST</h2>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *json = <span class="stringliteral">&quot;{\&quot;name\&quot;: \&quot;value\&quot;}&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="group__http__client.html#ga9b47bc2dd38d4a6700af79ced0acecb2">SocketHTTPClient_post</a>(client, <span class="stringliteral">&quot;https://api.example.com/data&quot;</span>,</div>
<div class="line">                          <span class="stringliteral">&quot;application/json&quot;</span>, json, strlen(json),</div>
<div class="line">                          &amp;response) == 0) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Status: %d\n&quot;</span>, response.<a class="code hl_variable" href="group__http__client.html#ga0baa2f233436d7bb00f28214d6382542">status_code</a>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__http__client_html_ga9b47bc2dd38d4a6700af79ced0acecb2"><div class="ttname"><a href="group__http__client.html#ga9b47bc2dd38d4a6700af79ced0acecb2">SocketHTTPClient_post</a></div><div class="ttdeci">int SocketHTTPClient_post(SocketHTTPClient_T client, const char *url, const char *content_type, const void *body, size_t body_len, SocketHTTPClient_Response *response)</div><div class="ttdoc">Perform synchronous POST request.</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md846"></a>
HTTP Client API</h1>
<p>The <code>SocketHTTPClient_T</code> provides a high-level HTTP client with automatic:</p><ul>
<li>Protocol negotiation (HTTP/1.1 and HTTP/2)</li>
<li><a class="el" href="group__connection__mgmt.html#structConnection" title="Internal structure representing a pooled connection slot.">Connection</a> pooling</li>
<li>Cookie handling</li>
<li>Redirect following</li>
<li>Compression (gzip/deflate/brotli)</li>
</ul>
<h2><a class="anchor" id="autotoc_md847"></a>
Creating a Client</h2>
<div class="fragment"><div class="line"><span class="comment">/* With default configuration */</span></div>
<div class="line">SocketHTTPClient_T client = <a class="code hl_function" href="group__http__client.html#ga2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a>(NULL);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* With custom configuration */</span></div>
<div class="line"><a class="code hl_struct" href="group__http__client.html#structSocketHTTPClient__Config">SocketHTTPClient_Config</a> config;</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#gaad5ad81c60bb230588b5f660a834f40e">SocketHTTPClient_config_defaults</a>(&amp;config);</div>
<div class="line"> </div>
<div class="line">config.<a class="code hl_variable" href="group__http__client.html#gaeeeb2ea03d33db0ba500da1c7782f7f3">max_version</a> = HTTP_VERSION_2_0;        <span class="comment">/* Prefer HTTP/2 */</span></div>
<div class="line">config.<a class="code hl_variable" href="group__http__client.html#ga1e5a28b4e256802af5f979726c728553">follow_redirects</a> = 5;                   <span class="comment">/* Max 5 redirects */</span></div>
<div class="line">config.<a class="code hl_variable" href="group__http__client.html#gad0964ac6e0738a3c4914054529bb51a7">connect_timeout_ms</a> = 10000;             <span class="comment">/* 10 second timeout */</span></div>
<div class="line">config.<a class="code hl_variable" href="group__http__client.html#gac81b35696b105b13f703c5d71f5c5692">enable_connection_pool</a> = 1;             <span class="comment">/* Enable pooling */</span></div>
<div class="line">config.<a class="code hl_variable" href="group__http__client.html#gad87a23b29168c1a6a738bd07268247de">max_connections_per_host</a> = 6;           <span class="comment">/* HTTP/1.1 default */</span></div>
<div class="line"> </div>
<div class="line">SocketHTTPClient_T client = <a class="code hl_function" href="group__http__client.html#ga2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a>(&amp;config);</div>
<div class="ttc" id="agroup__http__client_html_ga1e5a28b4e256802af5f979726c728553"><div class="ttname"><a href="group__http__client.html#ga1e5a28b4e256802af5f979726c728553">SocketHTTPClient_Config::follow_redirects</a></div><div class="ttdeci">int follow_redirects</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00506">SocketHTTPClient.h:506</a></div></div>
<div class="ttc" id="agroup__http__client_html_gaad5ad81c60bb230588b5f660a834f40e"><div class="ttname"><a href="group__http__client.html#gaad5ad81c60bb230588b5f660a834f40e">SocketHTTPClient_config_defaults</a></div><div class="ttdeci">void SocketHTTPClient_config_defaults(SocketHTTPClient_Config *config)</div><div class="ttdoc">Initialize SocketHTTPClient_Config structure with production-safe defaults.</div></div>
<div class="ttc" id="agroup__http__client_html_gac81b35696b105b13f703c5d71f5c5692"><div class="ttname"><a href="group__http__client.html#gac81b35696b105b13f703c5d71f5c5692">SocketHTTPClient_Config::enable_connection_pool</a></div><div class="ttdeci">int enable_connection_pool</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00493">SocketHTTPClient.h:493</a></div></div>
<div class="ttc" id="agroup__http__client_html_gad0964ac6e0738a3c4914054529bb51a7"><div class="ttname"><a href="group__http__client.html#gad0964ac6e0738a3c4914054529bb51a7">SocketHTTPClient_Config::connect_timeout_ms</a></div><div class="ttdeci">int connect_timeout_ms</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00501">SocketHTTPClient.h:501</a></div></div>
<div class="ttc" id="agroup__http__client_html_gad87a23b29168c1a6a738bd07268247de"><div class="ttname"><a href="group__http__client.html#gad87a23b29168c1a6a738bd07268247de">SocketHTTPClient_Config::max_connections_per_host</a></div><div class="ttdeci">size_t max_connections_per_host</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00494">SocketHTTPClient.h:494</a></div></div>
<div class="ttc" id="agroup__http__client_html_gaeeeb2ea03d33db0ba500da1c7782f7f3"><div class="ttname"><a href="group__http__client.html#gaeeeb2ea03d33db0ba500da1c7782f7f3">SocketHTTPClient_Config::max_version</a></div><div class="ttdeci">SocketHTTP_Version max_version</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00489">SocketHTTPClient.h:489</a></div></div>
<div class="ttc" id="agroup__http__client_html_structSocketHTTPClient__Config"><div class="ttname"><a href="group__http__client.html#structSocketHTTPClient__Config">SocketHTTPClient_Config</a></div><div class="ttdoc">HTTP client configuration structure.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00486">SocketHTTPClient.h:487</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md848"></a>
Configuration Options</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>max_version</code>   </td><td class="markdownTableBodyNone"><code>HTTP_VERSION_2_0</code>   </td><td class="markdownTableBodyNone">Maximum HTTP version to use    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>enable_connection_pool</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">Enable connection reuse    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>max_connections_per_host</code>   </td><td class="markdownTableBodyNone"><code>6</code>   </td><td class="markdownTableBodyNone">Per-host connection limit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>max_total_connections</code>   </td><td class="markdownTableBodyNone"><code>100</code>   </td><td class="markdownTableBodyNone">Total connection limit    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>connect_timeout_ms</code>   </td><td class="markdownTableBodyNone"><code>30000</code>   </td><td class="markdownTableBodyNone"><a class="el" href="group__connection__mgmt.html#structConnection" title="Internal structure representing a pooled connection slot.">Connection</a> timeout    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>request_timeout_ms</code>   </td><td class="markdownTableBodyNone"><code>60000</code>   </td><td class="markdownTableBodyNone">Request timeout    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>follow_redirects</code>   </td><td class="markdownTableBodyNone"><code>10</code>   </td><td class="markdownTableBodyNone">Max redirects (0 = disabled)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>accept_encoding</code>   </td><td class="markdownTableBodyNone">All   </td><td class="markdownTableBodyNone">Accepted compression methods    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>auto_decompress</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">Auto-decompress responses    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>verify_ssl</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">Verify TLS certificates   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md849"></a>
Simple API</h2>
<p>The simple API covers common use cases:</p>
<div class="fragment"><div class="line"><span class="comment">/* GET request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="group__http__client.html#gafef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, url, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* HEAD request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="group__http__client.html#ga4efcd265a023ce14464f07ef360fb030">SocketHTTPClient_head</a>(client, url, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* POST request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="group__http__client.html#ga9b47bc2dd38d4a6700af79ced0acecb2">SocketHTTPClient_post</a>(client, url, content_type, body, body_len, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* PUT request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="group__http__client.html#ga9d15a2624c43ac163f993827d3756efc">SocketHTTPClient_put</a>(client, url, content_type, body, body_len, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* DELETE request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="group__http__client.html#ga6bc9ded2b6017d03733c50c493605ef7">SocketHTTPClient_delete</a>(client, url, &amp;response);</div>
<div class="ttc" id="agroup__http__client_html_ga4efcd265a023ce14464f07ef360fb030"><div class="ttname"><a href="group__http__client.html#ga4efcd265a023ce14464f07ef360fb030">SocketHTTPClient_head</a></div><div class="ttdeci">int SocketHTTPClient_head(SocketHTTPClient_T client, const char *url, SocketHTTPClient_Response *response)</div><div class="ttdoc">Perform synchronous HEAD request.</div></div>
<div class="ttc" id="agroup__http__client_html_ga6bc9ded2b6017d03733c50c493605ef7"><div class="ttname"><a href="group__http__client.html#ga6bc9ded2b6017d03733c50c493605ef7">SocketHTTPClient_delete</a></div><div class="ttdeci">int SocketHTTPClient_delete(SocketHTTPClient_T client, const char *url, SocketHTTPClient_Response *response)</div><div class="ttdoc">Perform synchronous DELETE request.</div></div>
<div class="ttc" id="agroup__http__client_html_ga9d15a2624c43ac163f993827d3756efc"><div class="ttname"><a href="group__http__client.html#ga9d15a2624c43ac163f993827d3756efc">SocketHTTPClient_put</a></div><div class="ttdeci">int SocketHTTPClient_put(SocketHTTPClient_T client, const char *url, const char *content_type, const void *body, size_t body_len, SocketHTTPClient_Response *response)</div><div class="ttdoc">Perform synchronous PUT request.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md850"></a>
Request Builder API</h2>
<p>For more control, use the request builder:</p>
<div class="fragment"><div class="line">SocketHTTPClient_Request_T req = <a class="code hl_function" href="group__http__client.html#ga46c9c2ab8d3334dd0ad1359d2bb93102">SocketHTTPClient_Request_new</a>(</div>
<div class="line">    client, <a class="code hl_enumvalue" href="group__http.html#ggaf6f90bb536a5cd085f4327bda4d3ee8fa1944682922ac79b2e682312d8f3f71e2">HTTP_METHOD_POST</a>, <span class="stringliteral">&quot;https://api.example.com/upload&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Add headers */</span></div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga8a7c54a81dc916af60f9747162e844a2">SocketHTTPClient_Request_header</a>(req, <span class="stringliteral">&quot;Content-Type&quot;</span>, <span class="stringliteral">&quot;application/json&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga8a7c54a81dc916af60f9747162e844a2">SocketHTTPClient_Request_header</a>(req, <span class="stringliteral">&quot;Authorization&quot;</span>, <span class="stringliteral">&quot;Bearer token123&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga8a7c54a81dc916af60f9747162e844a2">SocketHTTPClient_Request_header</a>(req, <span class="stringliteral">&quot;X-Custom-Header&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Set body */</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *body = <span class="stringliteral">&quot;{\&quot;data\&quot;: \&quot;test\&quot;}&quot;</span>;</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#gae8f21b1fc1aae1ef8b1bbe43ce875247">SocketHTTPClient_Request_body</a>(req, body, strlen(body));</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Set timeout */</span></div>
<div class="line"><a class="code hl_function" href="group__http__client.html#gabe918e0dacc9d507f1ad288a399dfca6">SocketHTTPClient_Request_timeout</a>(req, 5000);  <span class="comment">/* 5 seconds */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Execute */</span></div>
<div class="line"><a class="code hl_struct" href="group__http__client.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a> response;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="group__http__client.html#ga4ba09b6d59cc2aee465749978f62ad76">SocketHTTPClient_Request_execute</a>(req, &amp;response) == 0) {</div>
<div class="line">    <span class="comment">/* Handle response */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga31f46990e2a8d948bfe7db2e22b85565">SocketHTTPClient_Request_free</a>(&amp;req);</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a>(&amp;response);</div>
<div class="ttc" id="agroup__http__client_html_ga31f46990e2a8d948bfe7db2e22b85565"><div class="ttname"><a href="group__http__client.html#ga31f46990e2a8d948bfe7db2e22b85565">SocketHTTPClient_Request_free</a></div><div class="ttdeci">void SocketHTTPClient_Request_free(SocketHTTPClient_Request_T *req)</div><div class="ttdoc">Free request builder and release resources.</div></div>
<div class="ttc" id="agroup__http__client_html_ga46c9c2ab8d3334dd0ad1359d2bb93102"><div class="ttname"><a href="group__http__client.html#ga46c9c2ab8d3334dd0ad1359d2bb93102">SocketHTTPClient_Request_new</a></div><div class="ttdeci">SocketHTTPClient_Request_T SocketHTTPClient_Request_new(SocketHTTPClient_T client, SocketHTTP_Method method, const char *url)</div><div class="ttdoc">Create request builder.</div></div>
<div class="ttc" id="agroup__http__client_html_ga4ba09b6d59cc2aee465749978f62ad76"><div class="ttname"><a href="group__http__client.html#ga4ba09b6d59cc2aee465749978f62ad76">SocketHTTPClient_Request_execute</a></div><div class="ttdeci">int SocketHTTPClient_Request_execute(SocketHTTPClient_Request_T req, SocketHTTPClient_Response *response)</div><div class="ttdoc">Execute request.</div></div>
<div class="ttc" id="agroup__http__client_html_ga8a7c54a81dc916af60f9747162e844a2"><div class="ttname"><a href="group__http__client.html#ga8a7c54a81dc916af60f9747162e844a2">SocketHTTPClient_Request_header</a></div><div class="ttdeci">int SocketHTTPClient_Request_header(SocketHTTPClient_Request_T req, const char *name, const char *value)</div><div class="ttdoc">Add header.</div></div>
<div class="ttc" id="agroup__http__client_html_gabe918e0dacc9d507f1ad288a399dfca6"><div class="ttname"><a href="group__http__client.html#gabe918e0dacc9d507f1ad288a399dfca6">SocketHTTPClient_Request_timeout</a></div><div class="ttdeci">void SocketHTTPClient_Request_timeout(SocketHTTPClient_Request_T req, int ms)</div><div class="ttdoc">Set per-request timeout.</div></div>
<div class="ttc" id="agroup__http__client_html_gae8f21b1fc1aae1ef8b1bbe43ce875247"><div class="ttname"><a href="group__http__client.html#gae8f21b1fc1aae1ef8b1bbe43ce875247">SocketHTTPClient_Request_body</a></div><div class="ttdeci">int SocketHTTPClient_Request_body(SocketHTTPClient_Request_T req, const void *data, size_t len)</div><div class="ttdoc">Set request body.</div></div>
<div class="ttc" id="agroup__http_html_ggaf6f90bb536a5cd085f4327bda4d3ee8fa1944682922ac79b2e682312d8f3f71e2"><div class="ttname"><a href="group__http.html#ggaf6f90bb536a5cd085f4327bda4d3ee8fa1944682922ac79b2e682312d8f3f71e2">HTTP_METHOD_POST</a></div><div class="ttdeci">@ HTTP_METHOD_POST</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTP_8h_source.html#l00319">SocketHTTP.h:318</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md851"></a>
Response Handling</h2>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <span class="keywordtype">int</span> status_code;              <span class="comment">/* HTTP status code (200, 404, etc.) */</span></div>
<div class="line">    SocketHTTP_Headers_T headers; <span class="comment">/* Response headers */</span></div>
<div class="line">    <span class="keywordtype">void</span> *body;                   <span class="comment">/* Response body */</span></div>
<div class="line">    <span class="keywordtype">size_t</span> body_len;              <span class="comment">/* Body length */</span></div>
<div class="line">    <a class="code hl_enumeration" href="group__http.html#gac46610efb2f138f9f5c58f9134f11a78">SocketHTTP_Version</a> version;   <span class="comment">/* Protocol version used */</span></div>
<div class="line">    <a class="code hl_typedef" href="group__foundation.html#gac1ed22b9df4eff7a3398cac608c090cc">Arena_T</a> arena;                <span class="comment">/* Internal - for cleanup */</span></div>
<div class="line">} <a class="code hl_struct" href="group__http__client.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Access headers */</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *content_type = <a class="code hl_function" href="group__http.html#ga14656f39c3a134218da1afd58407bda1">SocketHTTP_Headers_get</a>(response.<a class="code hl_variable" href="group__http__client.html#ga8b459516887245f8e4b77f8d8517ede1">headers</a>, <span class="stringliteral">&quot;Content-Type&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Always free response when done */</span></div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a>(&amp;response);</div>
<div class="ttc" id="agroup__foundation_html_gac1ed22b9df4eff7a3398cac608c090cc"><div class="ttname"><a href="group__foundation.html#gac1ed22b9df4eff7a3398cac608c090cc">Arena_T</a></div><div class="ttdeci">struct Arena_T * Arena_T</div><div class="ttdef"><b>Definition</b> <a href="Arena_8h_source.html#l00080">Arena.h:80</a></div></div>
<div class="ttc" id="agroup__http__client_html_ga8b459516887245f8e4b77f8d8517ede1"><div class="ttname"><a href="group__http__client.html#ga8b459516887245f8e4b77f8d8517ede1">SocketHTTPClient_Response::headers</a></div><div class="ttdeci">SocketHTTP_Headers_T headers</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00604">SocketHTTPClient.h:604</a></div></div>
<div class="ttc" id="agroup__http_html_ga14656f39c3a134218da1afd58407bda1"><div class="ttname"><a href="group__http.html#ga14656f39c3a134218da1afd58407bda1">SocketHTTP_Headers_get</a></div><div class="ttdeci">const char * SocketHTTP_Headers_get(SocketHTTP_Headers_T headers, const char *name)</div><div class="ttdoc">Get first header value (case-insensitive).</div></div>
<div class="ttc" id="agroup__http_html_gac46610efb2f138f9f5c58f9134f11a78"><div class="ttname"><a href="group__http.html#gac46610efb2f138f9f5c58f9134f11a78">SocketHTTP_Version</a></div><div class="ttdeci">SocketHTTP_Version</div><div class="ttdoc">HTTP protocol versions supported by the library.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTP_8h_source.html#l00265">SocketHTTP.h:266</a></div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md853"></a>
Authentication</h1>
<p>The client supports three authentication schemes. All authentication is handled automatically - the client will retry requests when receiving 401 responses.</p>
<h2><a class="anchor" id="autotoc_md854"></a>
Supported Authentication Types</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">RFC   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Use Case    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>HTTP_AUTH_BASIC</code>   </td><td class="markdownTableBodyNone">RFC 7617   </td><td class="markdownTableBodyNone">Base64 encoded credentials   </td><td class="markdownTableBodyNone">Simple APIs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>HTTP_AUTH_DIGEST</code>   </td><td class="markdownTableBodyNone">RFC 7616   </td><td class="markdownTableBodyNone">Challenge-response with hash   </td><td class="markdownTableBodyNone">Legacy systems    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>HTTP_AUTH_BEARER</code>   </td><td class="markdownTableBodyNone">RFC 6750   </td><td class="markdownTableBodyNone">Token-based (OAuth 2.0)   </td><td class="markdownTableBodyNone">Modern APIs   </td></tr>
</table>
<p><b>Not Supported:</b></p><ul>
<li>NTLM (Microsoft proprietary, requires DES/MD4)</li>
<li>Negotiate/SPNEGO (requires GSSAPI/Kerberos)</li>
<li>AWS Signature (use dedicated AWS SDK)</li>
</ul>
<h2><a class="anchor" id="autotoc_md855"></a>
Basic Authentication (RFC 7617)</h2>
<p>Sends <code>Authorization: Basic base64(username:password)</code> with every request.</p>
<p><b>WARNING:</b> Credentials are sent in cleartext (base64 is encoding, not encryption). Only use Basic auth over HTTPS!</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__http__client.html#structSocketHTTPClient__Auth">SocketHTTPClient_Auth</a> auth = {0};</div>
<div class="line">auth.<a class="code hl_variable" href="group__http__client.html#gaea321b9aeb6d8d36babd95cd7af87d35">type</a> = <a class="code hl_enumvalue" href="group__http__client.html#gga720036180c834b3f4b41f437d0ce1f30a946b7e60a754342e83205964b31a77ba">HTTP_AUTH_BASIC</a>;</div>
<div class="line">auth.<a class="code hl_variable" href="group__http__client.html#gaebecaec836c2d21aeb36c83c6a037b58">username</a> = <span class="stringliteral">&quot;user&quot;</span>;</div>
<div class="line">auth.<a class="code hl_variable" href="group__http__client.html#ga709145c7dcf32bbfbdbc68da8da0842f">password</a> = <span class="stringliteral">&quot;secret&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Set as default for all requests */</span></div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga1e9410043754e2ad4dbaa3572c595547">SocketHTTPClient_set_auth</a>(client, &amp;auth);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Or per-request */</span></div>
<div class="line">SocketHTTPClient_Request_T req = <a class="code hl_function" href="group__http__client.html#ga46c9c2ab8d3334dd0ad1359d2bb93102">SocketHTTPClient_Request_new</a>(</div>
<div class="line">    client, <a class="code hl_enumvalue" href="group__http.html#ggaf6f90bb536a5cd085f4327bda4d3ee8fa90754abc55dbb76862fa50abee5af659">HTTP_METHOD_GET</a>, <span class="stringliteral">&quot;https://api.example.com/protected&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga4aaf34db687d93fcbaa8e13b35916b6a">SocketHTTPClient_Request_auth</a>(req, &amp;auth);</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga4ba09b6d59cc2aee465749978f62ad76">SocketHTTPClient_Request_execute</a>(req, &amp;response);</div>
<div class="ttc" id="agroup__http__client_html_ga1e9410043754e2ad4dbaa3572c595547"><div class="ttname"><a href="group__http__client.html#ga1e9410043754e2ad4dbaa3572c595547">SocketHTTPClient_set_auth</a></div><div class="ttdeci">void SocketHTTPClient_set_auth(SocketHTTPClient_T client, const SocketHTTPClient_Auth *auth)</div><div class="ttdoc">Set default authentication credentials for all requests.</div></div>
<div class="ttc" id="agroup__http__client_html_ga4aaf34db687d93fcbaa8e13b35916b6a"><div class="ttname"><a href="group__http__client.html#ga4aaf34db687d93fcbaa8e13b35916b6a">SocketHTTPClient_Request_auth</a></div><div class="ttdeci">void SocketHTTPClient_Request_auth(SocketHTTPClient_Request_T req, const SocketHTTPClient_Auth *auth)</div><div class="ttdoc">Set per-request authentication.</div></div>
<div class="ttc" id="agroup__http__client_html_ga709145c7dcf32bbfbdbc68da8da0842f"><div class="ttname"><a href="group__http__client.html#ga709145c7dcf32bbfbdbc68da8da0842f">SocketHTTPClient_Auth::password</a></div><div class="ttdeci">const char * password</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00437">SocketHTTPClient.h:437</a></div></div>
<div class="ttc" id="agroup__http__client_html_gaea321b9aeb6d8d36babd95cd7af87d35"><div class="ttname"><a href="group__http__client.html#gaea321b9aeb6d8d36babd95cd7af87d35">SocketHTTPClient_Auth::type</a></div><div class="ttdeci">SocketHTTPClient_AuthType type</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00435">SocketHTTPClient.h:435</a></div></div>
<div class="ttc" id="agroup__http__client_html_gaebecaec836c2d21aeb36c83c6a037b58"><div class="ttname"><a href="group__http__client.html#gaebecaec836c2d21aeb36c83c6a037b58">SocketHTTPClient_Auth::username</a></div><div class="ttdeci">const char * username</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00436">SocketHTTPClient.h:436</a></div></div>
<div class="ttc" id="agroup__http__client_html_gga720036180c834b3f4b41f437d0ce1f30a946b7e60a754342e83205964b31a77ba"><div class="ttname"><a href="group__http__client.html#gga720036180c834b3f4b41f437d0ce1f30a946b7e60a754342e83205964b31a77ba">HTTP_AUTH_BASIC</a></div><div class="ttdeci">@ HTTP_AUTH_BASIC</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00408">SocketHTTPClient.h:408</a></div></div>
<div class="ttc" id="agroup__http__client_html_structSocketHTTPClient__Auth"><div class="ttname"><a href="group__http__client.html#structSocketHTTPClient__Auth">SocketHTTPClient_Auth</a></div><div class="ttdoc">Authentication credentials structure.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00433">SocketHTTPClient.h:434</a></div></div>
<div class="ttc" id="agroup__http_html_ggaf6f90bb536a5cd085f4327bda4d3ee8fa90754abc55dbb76862fa50abee5af659"><div class="ttname"><a href="group__http.html#ggaf6f90bb536a5cd085f4327bda4d3ee8fa90754abc55dbb76862fa50abee5af659">HTTP_METHOD_GET</a></div><div class="ttdeci">@ HTTP_METHOD_GET</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTP_8h_source.html#l00315">SocketHTTP.h:314</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md856"></a>
Digest Authentication (RFC 7616)</h2>
<p>More secure than Basic - uses challenge-response with hashing. The client:</p><ol type="1">
<li>Makes initial request</li>
<li>Receives 401 with <code>WWW-Authenticate: Digest ...</code> challenge</li>
<li>Computes response using MD5 or SHA-256</li>
<li>Retries request with <code>Authorization: Digest ...</code> header</li>
</ol>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__http__client.html#structSocketHTTPClient__Auth">SocketHTTPClient_Auth</a> auth = {0};</div>
<div class="line">auth.<a class="code hl_variable" href="group__http__client.html#gaea321b9aeb6d8d36babd95cd7af87d35">type</a> = <a class="code hl_enumvalue" href="group__http__client.html#gga720036180c834b3f4b41f437d0ce1f30a2de9030bd220adb7701f5cbdeadfc4a3">HTTP_AUTH_DIGEST</a>;</div>
<div class="line">auth.<a class="code hl_variable" href="group__http__client.html#gaebecaec836c2d21aeb36c83c6a037b58">username</a> = <span class="stringliteral">&quot;user&quot;</span>;</div>
<div class="line">auth.<a class="code hl_variable" href="group__http__client.html#ga709145c7dcf32bbfbdbc68da8da0842f">password</a> = <span class="stringliteral">&quot;secret&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Digest auth handles 401 challenges automatically */</span></div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga1e9410043754e2ad4dbaa3572c595547">SocketHTTPClient_set_auth</a>(client, &amp;auth);</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#gafef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, <span class="stringliteral">&quot;https://api.example.com/data&quot;</span>, &amp;response);</div>
<div class="ttc" id="agroup__http__client_html_gga720036180c834b3f4b41f437d0ce1f30a2de9030bd220adb7701f5cbdeadfc4a3"><div class="ttname"><a href="group__http__client.html#gga720036180c834b3f4b41f437d0ce1f30a2de9030bd220adb7701f5cbdeadfc4a3">HTTP_AUTH_DIGEST</a></div><div class="ttdeci">@ HTTP_AUTH_DIGEST</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00409">SocketHTTPClient.h:409</a></div></div>
</div><!-- fragment --><p><b>Supported Features:</b></p><ul>
<li>MD5 and SHA-256 algorithms</li>
<li><code>qop=auth</code> (authentication quality of protection)</li>
<li>Stale nonce handling (automatic retry on expired nonce)</li>
</ul>
<p><b>Limitations:</b></p><ul>
<li><code>qop=auth-int</code> (integrity protection) is NOT supported</li>
<li>Session-based algorithms (<code>MD5-sess</code>, <code>SHA-256-sess</code>) are NOT supported</li>
</ul>
<h2><a class="anchor" id="autotoc_md857"></a>
Bearer Token (RFC 6750)</h2>
<p>For OAuth 2.0 and JWT-based authentication:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__http__client.html#structSocketHTTPClient__Auth">SocketHTTPClient_Auth</a> auth = {0};</div>
<div class="line">auth.<a class="code hl_variable" href="group__http__client.html#gaea321b9aeb6d8d36babd95cd7af87d35">type</a> = <a class="code hl_enumvalue" href="group__http__client.html#gga720036180c834b3f4b41f437d0ce1f30acda827d72fd9c0a84535434c81558c96">HTTP_AUTH_BEARER</a>;</div>
<div class="line">auth.<a class="code hl_variable" href="group__http__client.html#ga75371d88c2cb09feb95620c237b37882">token</a> = <span class="stringliteral">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga1e9410043754e2ad4dbaa3572c595547">SocketHTTPClient_set_auth</a>(client, &amp;auth);</div>
<div class="ttc" id="agroup__http__client_html_ga75371d88c2cb09feb95620c237b37882"><div class="ttname"><a href="group__http__client.html#ga75371d88c2cb09feb95620c237b37882">SocketHTTPClient_Auth::token</a></div><div class="ttdeci">const char * token</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00438">SocketHTTPClient.h:438</a></div></div>
<div class="ttc" id="agroup__http__client_html_gga720036180c834b3f4b41f437d0ce1f30acda827d72fd9c0a84535434c81558c96"><div class="ttname"><a href="group__http__client.html#gga720036180c834b3f4b41f437d0ce1f30acda827d72fd9c0a84535434c81558c96">HTTP_AUTH_BEARER</a></div><div class="ttdeci">@ HTTP_AUTH_BEARER</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00411">SocketHTTPClient.h:410</a></div></div>
</div><!-- fragment --><p>Sends <code>Authorization: Bearer &lt;token&gt;</code> with every request.</p>
<p><b>Note:</b> The application is responsible for:</p><ul>
<li>Obtaining tokens (OAuth flows, API key management)</li>
<li>Refreshing expired tokens</li>
<li>Handling token revocation</li>
</ul>
<h2><a class="anchor" id="autotoc_md858"></a>
Credential Security</h2>
<p>Credentials are securely cleared from memory when:</p><ul>
<li>Setting new authentication (old credentials cleared)</li>
<li>Freeing the client (<code><a class="el" href="group__http__client.html#ga01d6c9bebdcda63949ba9af698f8e7e5" title="Destroy HTTP client and release all resources.">SocketHTTPClient_free()</a></code>)</li>
<li>After generating authorization headers</li>
</ul>
<p>The library uses <code><a class="el" href="group__foundation.html#ga00f94677d393f24e0b0c549be7bbcdf2" title="Securely clear sensitive data from memory.">SocketCrypto_secure_clear()</a></code> which prevents compiler optimization from removing the clearing operation.</p>
<h2><a class="anchor" id="autotoc_md859"></a>
Automatic 401 Retry</h2>
<p>The client automatically handles 401 responses:</p>
<ol type="1">
<li><b>Basic Auth:</b> If credentials weren't sent, retries once</li>
<li><b>Digest Auth:</b> Computes response from challenge, retries</li>
<li><b>Stale Nonce:</b> If server indicates <code>stale=true</code>, retries with new nonce</li>
<li><b>Max Retries:</b> 2 retries to prevent infinite loops</li>
</ol>
<p>After max retries, the 401 response is returned to the application.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md861"></a>
Cookie Handling</h1>
<p>The client includes a cookie jar (RFC 6265):</p>
<div class="fragment"><div class="line"><span class="comment">/* Create cookie jar */</span></div>
<div class="line">SocketHTTPClient_CookieJar_T jar = <a class="code hl_function" href="group__http__client.html#ga7f6bd73797f507766f9edc1242b9772e">SocketHTTPClient_CookieJar_new</a>(NULL);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Associate with client */</span></div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga07b465d99995da22fc317dc170d09787">SocketHTTPClient_set_cookie_jar</a>(client, jar);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Cookies are automatically managed:</span></div>
<div class="line"><span class="comment"> * - Set-Cookie headers populate the jar</span></div>
<div class="line"><span class="comment"> * - Matching cookies sent with requests</span></div>
<div class="line"><span class="comment"> * - Domain/path/expiry honored */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Manual cookie operations */</span></div>
<div class="line"><a class="code hl_function" href="group__http__client.html#gae276f63daea601b662eae51e1973f3e5">SocketHTTPClient_CookieJar_set</a>(jar, <span class="stringliteral">&quot;example.com&quot;</span>, <span class="stringliteral">&quot;/&quot;</span>, <span class="stringliteral">&quot;session&quot;</span>, <span class="stringliteral">&quot;abc123&quot;</span>);</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *value = <a class="code hl_function" href="group__http__client.html#ga79838faf1567b0b9946b95b946de4392">SocketHTTPClient_CookieJar_get</a>(jar, <span class="stringliteral">&quot;example.com&quot;</span>, <span class="stringliteral">&quot;/&quot;</span>, <span class="stringliteral">&quot;session&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Persistence */</span></div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga4f086bf1231cc24fee20d8b0461fec05">SocketHTTPClient_CookieJar_save</a>(jar, <span class="stringliteral">&quot;/path/to/cookies.txt&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga0804b639cfe122234e22b14498f2af13">SocketHTTPClient_CookieJar_load</a>(jar, <span class="stringliteral">&quot;/path/to/cookies.txt&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga628b803f0ccfdc41d8425bf1c1064d7e">SocketHTTPClient_CookieJar_free</a>(&amp;jar);</div>
<div class="ttc" id="agroup__http__client_html_ga07b465d99995da22fc317dc170d09787"><div class="ttname"><a href="group__http__client.html#ga07b465d99995da22fc317dc170d09787">SocketHTTPClient_set_cookie_jar</a></div><div class="ttdeci">void SocketHTTPClient_set_cookie_jar(SocketHTTPClient_T client, SocketHTTPClient_CookieJar_T jar)</div><div class="ttdoc">Associate jar with client.</div></div>
<div class="ttc" id="agroup__http__client_html_ga0804b639cfe122234e22b14498f2af13"><div class="ttname"><a href="group__http__client.html#ga0804b639cfe122234e22b14498f2af13">SocketHTTPClient_CookieJar_load</a></div><div class="ttdeci">int SocketHTTPClient_CookieJar_load(SocketHTTPClient_CookieJar_T jar, const char *filename)</div><div class="ttdoc">Load cookies from file.</div></div>
<div class="ttc" id="agroup__http__client_html_ga4f086bf1231cc24fee20d8b0461fec05"><div class="ttname"><a href="group__http__client.html#ga4f086bf1231cc24fee20d8b0461fec05">SocketHTTPClient_CookieJar_save</a></div><div class="ttdeci">int SocketHTTPClient_CookieJar_save(SocketHTTPClient_CookieJar_T jar, const char *filename)</div><div class="ttdoc">Save cookies to file.</div></div>
<div class="ttc" id="agroup__http__client_html_ga628b803f0ccfdc41d8425bf1c1064d7e"><div class="ttname"><a href="group__http__client.html#ga628b803f0ccfdc41d8425bf1c1064d7e">SocketHTTPClient_CookieJar_free</a></div><div class="ttdeci">void SocketHTTPClient_CookieJar_free(SocketHTTPClient_CookieJar_T *jar)</div><div class="ttdoc">Free cookie jar and all stored cookies.</div></div>
<div class="ttc" id="agroup__http__client_html_ga79838faf1567b0b9946b95b946de4392"><div class="ttname"><a href="group__http__client.html#ga79838faf1567b0b9946b95b946de4392">SocketHTTPClient_CookieJar_get</a></div><div class="ttdeci">const SocketHTTPClient_Cookie * SocketHTTPClient_CookieJar_get(SocketHTTPClient_CookieJar_T jar, const char *domain, const char *path, const char *name)</div><div class="ttdoc">Clear all cookies.</div></div>
<div class="ttc" id="agroup__http__client_html_ga7f6bd73797f507766f9edc1242b9772e"><div class="ttname"><a href="group__http__client.html#ga7f6bd73797f507766f9edc1242b9772e">SocketHTTPClient_CookieJar_new</a></div><div class="ttdeci">SocketHTTPClient_CookieJar_T SocketHTTPClient_CookieJar_new(void)</div><div class="ttdoc">Create cookie jar.</div></div>
<div class="ttc" id="agroup__http__client_html_gae276f63daea601b662eae51e1973f3e5"><div class="ttname"><a href="group__http__client.html#gae276f63daea601b662eae51e1973f3e5">SocketHTTPClient_CookieJar_set</a></div><div class="ttdeci">int SocketHTTPClient_CookieJar_set(SocketHTTPClient_CookieJar_T jar, const SocketHTTPClient_Cookie *cookie)</div><div class="ttdoc">Set cookie.</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md863"></a>
HTTP/2 Features</h1>
<p>When connecting to an HTTPS endpoint, the client automatically negotiates HTTP/2 via ALPN if the server supports it.</p>
<h2><a class="anchor" id="autotoc_md864"></a>
Flow Control Security Enhancements</h2>
<p>Recent updates strengthen HTTP/2 flow control against attacks (RFC 9113 5.2, 6.5.2):</p>
<ul>
<li><b>Overflow/Underflow Protection</b>: Window updates use 64-bit checks to prevent exceeding 2^31-1. Adjustments for <code>SETTINGS_INITIAL_WINDOW_SIZE</code> (signed delta) validate against negative values or overflows; invalid cases trigger <code>FLOW_CONTROL_ERROR</code> and connection closure.</li>
<li><b>Validation</b>: Zero increments rejected as <code>PROTOCOL_ERROR</code>. Consumption clamps to prevent negative windows; queries return safe &gt;=0 values.</li>
<li><b>Mitigations</b>: Reasonable initials (streams: 65KB, connection: 1MB) limit DoS blast radius. Errors logged + metricated (e.g., <code>SOCKET_CTR_HTTP2_FLOW_OVERFLOW</code>) for monitoring.</li>
<li><b>Best Practices</b>: Pair with pool rate limits; monitor metrics for anomalies. See <code>SocketHTTP2-flow.c</code> and <a href="SECURITY.md#http2-security-rfc-9113" target="_blank">security.md</a> for details.</li>
</ul>
<p>This hardening prevents exhaustion DoS, invalid state manipulation, and UB from malformed frames/SETTINGS.</p>
<h2><a class="anchor" id="autotoc_md865"></a>
Checking Protocol Version</h2>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__http__client.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a> response;</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#gafef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, <span class="stringliteral">&quot;https://example.com&quot;</span>, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (response.<a class="code hl_variable" href="group__http__client.html#gaccda45708658a8ada478121524f85e5e">version</a> == HTTP_VERSION_2_0) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Using HTTP/2\n&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__http__client_html_gaccda45708658a8ada478121524f85e5e"><div class="ttname"><a href="group__http__client.html#gaccda45708658a8ada478121524f85e5e">SocketHTTPClient_Response::version</a></div><div class="ttdeci">SocketHTTP_Version version</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00607">SocketHTTPClient.h:607</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md866"></a>
HTTP/2 Benefits</h2>
<ul>
<li><b>Multiplexing</b>: Multiple requests over single connection</li>
<li><b>Header Compression</b>: HPACK reduces overhead</li>
<li><b>Binary Protocol</b>: More efficient parsing</li>
<li><b>Server Push</b>: Server can push resources (server-side)</li>
</ul>
<h2><a class="anchor" id="autotoc_md867"></a>
HTTP/2 Cleartext (h2c)</h2>
<p>For non-TLS HTTP/2 (rare):</p>
<div class="fragment"><div class="line">config.<a class="code hl_variable" href="group__http__client.html#ga9a480ef82e914f17714c7c57d12f88af">allow_http2_cleartext</a> = 1;  <span class="comment">/* Enable h2c upgrade */</span></div>
<div class="ttc" id="agroup__http__client_html_ga9a480ef82e914f17714c7c57d12f88af"><div class="ttname"><a href="group__http__client.html#ga9a480ef82e914f17714c7c57d12f88af">SocketHTTPClient_Config::allow_http2_cleartext</a></div><div class="ttdeci">int allow_http2_cleartext</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00490">SocketHTTPClient.h:490</a></div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md869"></a>
HTTP Server API</h1>
<p>The <code>SocketHTTPServer_T</code> provides an event-driven HTTP server:</p>
<h2><a class="anchor" id="autotoc_md870"></a>
Creating a Server</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketHTTPServer_8h.html">http/SocketHTTPServer.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="group__http.html#structSocketHTTPServer__Config">SocketHTTPServer_Config</a> config;</div>
<div class="line"><a class="code hl_function" href="group__http.html#ga08bbe8e6a3560817cd898a51622bc6ce">SocketHTTPServer_config_defaults</a>(&amp;config);</div>
<div class="line">config.<a class="code hl_variable" href="group__http.html#aaa846da9282ae7cc08293d9e3ae100c5">port</a> = 8080;</div>
<div class="line">config.<a class="code hl_variable" href="group__http.html#ab0bf8c280cce766a64efd9064f93bef2">bind_address</a> = <span class="stringliteral">&quot;0.0.0.0&quot;</span>;</div>
<div class="line">config.<a class="code hl_variable" href="group__http.html#aba7a435867737c5dda694445481fbc7c">max_connections</a> = 1000;</div>
<div class="line"> </div>
<div class="line">SocketHTTPServer_T server = <a class="code hl_function" href="group__http.html#gaea4fe38f3115faefc4bbc7f28e6b7362">SocketHTTPServer_new</a>(&amp;config);</div>
<div class="ttc" id="aSocketHTTPServer_8h_html"><div class="ttname"><a href="SocketHTTPServer_8h.html">SocketHTTPServer.h</a></div><div class="ttdoc">High-level HTTP server supporting HTTP/1.1 and HTTP/2 protocols.</div></div>
<div class="ttc" id="agroup__http_html_aaa846da9282ae7cc08293d9e3ae100c5"><div class="ttname"><a href="group__http.html#aaa846da9282ae7cc08293d9e3ae100c5">SocketHTTPServer_Config::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Listen port (default: 8080).</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00313">SocketHTTPServer.h:313</a></div></div>
<div class="ttc" id="agroup__http_html_ab0bf8c280cce766a64efd9064f93bef2"><div class="ttname"><a href="group__http.html#ab0bf8c280cce766a64efd9064f93bef2">SocketHTTPServer_Config::bind_address</a></div><div class="ttdeci">const char * bind_address</div><div class="ttdoc">Bind address (NULL = all interfaces, default: &quot;0.0.0.0&quot;).</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00314">SocketHTTPServer.h:314</a></div></div>
<div class="ttc" id="agroup__http_html_aba7a435867737c5dda694445481fbc7c"><div class="ttname"><a href="group__http.html#aba7a435867737c5dda694445481fbc7c">SocketHTTPServer_Config::max_connections</a></div><div class="ttdeci">size_t max_connections</div><div class="ttdoc">Total maximum concurrent connections (default: 1000). Enforced globally; new connections rejected whe...</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00377">SocketHTTPServer.h:377</a></div></div>
<div class="ttc" id="agroup__http_html_ga08bbe8e6a3560817cd898a51622bc6ce"><div class="ttname"><a href="group__http.html#ga08bbe8e6a3560817cd898a51622bc6ce">SocketHTTPServer_config_defaults</a></div><div class="ttdeci">void SocketHTTPServer_config_defaults(SocketHTTPServer_Config *config)</div><div class="ttdoc">Initialize SocketHTTPServer_Config with safe default values.</div></div>
<div class="ttc" id="agroup__http_html_gaea4fe38f3115faefc4bbc7f28e6b7362"><div class="ttname"><a href="group__http.html#gaea4fe38f3115faefc4bbc7f28e6b7362">SocketHTTPServer_new</a></div><div class="ttdeci">SocketHTTPServer_T SocketHTTPServer_new(const SocketHTTPServer_Config *config)</div><div class="ttdoc">Allocate and initialize a new HTTP server instance.</div></div>
<div class="ttc" id="agroup__http_html_structSocketHTTPServer__Config"><div class="ttname"><a href="group__http.html#structSocketHTTPServer__Config">SocketHTTPServer_Config</a></div><div class="ttdoc">HTTP server configuration structure.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00310">SocketHTTPServer.h:311</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md871"></a>
Request Handler</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_handler(SocketHTTPServer_Request_T req, <span class="keywordtype">void</span> *userdata) {</div>
<div class="line">    <span class="comment">/* Get request details */</span></div>
<div class="line">    <a class="code hl_enumeration" href="group__http.html#gaf6f90bb536a5cd085f4327bda4d3ee8f">SocketHTTP_Method</a> method = <a class="code hl_function" href="group__http.html#ga62a61206448cffe1710070a6c64b554d">SocketHTTPServer_Request_method</a>(req);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *path = <a class="code hl_function" href="group__http.html#ga62b0e10b9c135a08852e56eb1eae8ac4">SocketHTTPServer_Request_path</a>(req);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *query = <a class="code hl_function" href="group__http.html#ga7bb246b4e39b4d74d3821201b6f72456">SocketHTTPServer_Request_query</a>(req);</div>
<div class="line">    SocketHTTP_Headers_T headers = <a class="code hl_function" href="group__http.html#ga51f26503d221c39a5e867b5d4c683ae7">SocketHTTPServer_Request_headers</a>(req);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> *body = <a class="code hl_function" href="group__http.html#ga7e95ae3464cb9cf8c0d0b172db13456e">SocketHTTPServer_Request_body</a>(req);</div>
<div class="line">    <span class="keywordtype">size_t</span> body_len = <a class="code hl_function" href="group__http.html#ga5ac308a85217f94c0fc5ced8525b55e5">SocketHTTPServer_Request_body_len</a>(req);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Set response */</span></div>
<div class="line">    <a class="code hl_function" href="group__http.html#ga4d1d923d82851f33216006a798844e99">SocketHTTPServer_Request_status</a>(req, 200);</div>
<div class="line">    <a class="code hl_function" href="group__http.html#ga776474c545e883c3ee264a53bd31bfc7">SocketHTTPServer_Request_header</a>(req, <span class="stringliteral">&quot;Content-Type&quot;</span>, <span class="stringliteral">&quot;text/html&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="group__http.html#ga26d33e6cf21f83cbd542b1d5a41e7bca">SocketHTTPServer_Request_body_string</a>(req, <span class="stringliteral">&quot;&lt;h1&gt;Hello!&lt;/h1&gt;&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Finish response */</span></div>
<div class="line">    <a class="code hl_function" href="group__http.html#ga908829abf68bcfe935568fe4f45c0330">SocketHTTPServer_Request_finish</a>(req);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__http.html#gaaf56db2565e6fdebcebf0bb7df24b959">SocketHTTPServer_set_handler</a>(server, my_handler, NULL);</div>
<div class="ttc" id="agroup__http_html_ga26d33e6cf21f83cbd542b1d5a41e7bca"><div class="ttname"><a href="group__http.html#ga26d33e6cf21f83cbd542b1d5a41e7bca">SocketHTTPServer_Request_body_string</a></div><div class="ttdeci">void SocketHTTPServer_Request_body_string(SocketHTTPServer_Request_T req, const char *str)</div><div class="ttdoc">Set the response body from a null-terminated C string.</div></div>
<div class="ttc" id="agroup__http_html_ga4d1d923d82851f33216006a798844e99"><div class="ttname"><a href="group__http.html#ga4d1d923d82851f33216006a798844e99">SocketHTTPServer_Request_status</a></div><div class="ttdeci">void SocketHTTPServer_Request_status(SocketHTTPServer_Request_T req, int code)</div><div class="ttdoc">Set the HTTP status code for the response.</div></div>
<div class="ttc" id="agroup__http_html_ga51f26503d221c39a5e867b5d4c683ae7"><div class="ttname"><a href="group__http.html#ga51f26503d221c39a5e867b5d4c683ae7">SocketHTTPServer_Request_headers</a></div><div class="ttdeci">SocketHTTP_Headers_T SocketHTTPServer_Request_headers(SocketHTTPServer_Request_T req)</div><div class="ttdoc">Access the parsed request headers as a headers container.</div></div>
<div class="ttc" id="agroup__http_html_ga5ac308a85217f94c0fc5ced8525b55e5"><div class="ttname"><a href="group__http.html#ga5ac308a85217f94c0fc5ced8525b55e5">SocketHTTPServer_Request_body_len</a></div><div class="ttdeci">size_t SocketHTTPServer_Request_body_len(SocketHTTPServer_Request_T req)</div><div class="ttdoc">Retrieve the length of the request body in bytes.</div></div>
<div class="ttc" id="agroup__http_html_ga62a61206448cffe1710070a6c64b554d"><div class="ttname"><a href="group__http.html#ga62a61206448cffe1710070a6c64b554d">SocketHTTPServer_Request_method</a></div><div class="ttdeci">SocketHTTP_Method SocketHTTPServer_Request_method(SocketHTTPServer_Request_T req)</div><div class="ttdoc">Retrieve the parsed HTTP method from the request.</div></div>
<div class="ttc" id="agroup__http_html_ga62b0e10b9c135a08852e56eb1eae8ac4"><div class="ttname"><a href="group__http.html#ga62b0e10b9c135a08852e56eb1eae8ac4">SocketHTTPServer_Request_path</a></div><div class="ttdeci">const char * SocketHTTPServer_Request_path(SocketHTTPServer_Request_T req)</div><div class="ttdoc">Get the request path (URI path component).</div></div>
<div class="ttc" id="agroup__http_html_ga776474c545e883c3ee264a53bd31bfc7"><div class="ttname"><a href="group__http.html#ga776474c545e883c3ee264a53bd31bfc7">SocketHTTPServer_Request_header</a></div><div class="ttdeci">void SocketHTTPServer_Request_header(SocketHTTPServer_Request_T req, const char *name, const char *value)</div><div class="ttdoc">Add a header field to the HTTP response.</div></div>
<div class="ttc" id="agroup__http_html_ga7bb246b4e39b4d74d3821201b6f72456"><div class="ttname"><a href="group__http.html#ga7bb246b4e39b4d74d3821201b6f72456">SocketHTTPServer_Request_query</a></div><div class="ttdeci">const char * SocketHTTPServer_Request_query(SocketHTTPServer_Request_T req)</div><div class="ttdoc">Get the query string portion of the request URI.</div></div>
<div class="ttc" id="agroup__http_html_ga7e95ae3464cb9cf8c0d0b172db13456e"><div class="ttname"><a href="group__http.html#ga7e95ae3464cb9cf8c0d0b172db13456e">SocketHTTPServer_Request_body</a></div><div class="ttdeci">const void * SocketHTTPServer_Request_body(SocketHTTPServer_Request_T req)</div><div class="ttdoc">Get pointer to fully buffered request body data.</div></div>
<div class="ttc" id="agroup__http_html_ga908829abf68bcfe935568fe4f45c0330"><div class="ttname"><a href="group__http.html#ga908829abf68bcfe935568fe4f45c0330">SocketHTTPServer_Request_finish</a></div><div class="ttdeci">void SocketHTTPServer_Request_finish(SocketHTTPServer_Request_T req)</div><div class="ttdoc">Finalize the response and transmit it to the client.</div></div>
<div class="ttc" id="agroup__http_html_gaaf56db2565e6fdebcebf0bb7df24b959"><div class="ttname"><a href="group__http.html#gaaf56db2565e6fdebcebf0bb7df24b959">SocketHTTPServer_set_handler</a></div><div class="ttdeci">void SocketHTTPServer_set_handler(SocketHTTPServer_T server, SocketHTTPServer_Handler handler, void *userdata)</div><div class="ttdoc">Register the primary request handler callback and associated user data.</div></div>
<div class="ttc" id="agroup__http_html_gaf6f90bb536a5cd085f4327bda4d3ee8f"><div class="ttname"><a href="group__http.html#gaf6f90bb536a5cd085f4327bda4d3ee8f">SocketHTTP_Method</a></div><div class="ttdeci">SocketHTTP_Method</div><div class="ttdoc">Standard HTTP request methods as defined in RFC 9110 and extensions.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTP_8h_source.html#l00312">SocketHTTP.h:313</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md872"></a>
Running the Server</h2>
<div class="fragment"><div class="line"><span class="comment">/* Start listening */</span></div>
<div class="line"><a class="code hl_function" href="group__http.html#gafa06caca93c0fac3e52f7749abe03be9">SocketHTTPServer_start</a>(server);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Event loop */</span></div>
<div class="line"><span class="keywordflow">while</span> (<a class="code hl_variable" href="connection__pool_8c.html#af1f449cc09f8d36befcce07bc38c29c0">running</a>) {</div>
<div class="line">    <a class="code hl_function" href="group__http.html#gab2ad4e6a795964f1edabf14a71b83985">SocketHTTPServer_process</a>(server, 1000);  <span class="comment">/* 1 second timeout */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Shutdown */</span></div>
<div class="line"><a class="code hl_function" href="group__http.html#gaf332d06f999890e277dc83777d669f00">SocketHTTPServer_stop</a>(server);</div>
<div class="line"><a class="code hl_function" href="group__http.html#gacf5856e5b1728e44bbb68ef2e4637318">SocketHTTPServer_free</a>(&amp;server);</div>
<div class="ttc" id="aconnection__pool_8c_html_af1f449cc09f8d36befcce07bc38c29c0"><div class="ttname"><a href="connection__pool_8c.html#af1f449cc09f8d36befcce07bc38c29c0">running</a></div><div class="ttdeci">static volatile int running</div><div class="ttdef"><b>Definition</b> <a href="connection__pool_8c_source.html#l00029">connection_pool.c:29</a></div></div>
<div class="ttc" id="agroup__http_html_gab2ad4e6a795964f1edabf14a71b83985"><div class="ttname"><a href="group__http.html#gab2ad4e6a795964f1edabf14a71b83985">SocketHTTPServer_process</a></div><div class="ttdeci">int SocketHTTPServer_process(SocketHTTPServer_T server, int timeout_ms)</div><div class="ttdoc">Main event loop step: poll, accept, parse, handle requests.</div></div>
<div class="ttc" id="agroup__http_html_gacf5856e5b1728e44bbb68ef2e4637318"><div class="ttname"><a href="group__http.html#gacf5856e5b1728e44bbb68ef2e4637318">SocketHTTPServer_free</a></div><div class="ttdeci">void SocketHTTPServer_free(SocketHTTPServer_T *server)</div><div class="ttdoc">Dispose of HTTP server instance and release all resources.</div></div>
<div class="ttc" id="agroup__http_html_gaf332d06f999890e277dc83777d669f00"><div class="ttname"><a href="group__http.html#gaf332d06f999890e277dc83777d669f00">SocketHTTPServer_stop</a></div><div class="ttdeci">void SocketHTTPServer_stop(SocketHTTPServer_T server)</div><div class="ttdoc">Stop accepting new connections while allowing existing ones to complete.</div></div>
<div class="ttc" id="agroup__http_html_gafa06caca93c0fac3e52f7749abe03be9"><div class="ttname"><a href="group__http.html#gafa06caca93c0fac3e52f7749abe03be9">SocketHTTPServer_start</a></div><div class="ttdeci">int SocketHTTPServer_start(SocketHTTPServer_T server)</div><div class="ttdoc">Bind to address/port and start listening for incoming connections.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md873"></a>
WebSocket Upgrade</h2>
<p>The server can detect and handle WebSocket upgrades:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_handler(SocketHTTPServer_Request_T req, <span class="keywordtype">void</span> *userdata) {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="group__http.html#gadea7c22d784dde56835abffcd57ee516">SocketHTTPServer_Request_is_websocket</a>(req)) {</div>
<div class="line">        SocketWS_T ws = <a class="code hl_function" href="group__http.html#ga27bf639b401330e8d40ebbaf0c93e12b">SocketHTTPServer_Request_upgrade_websocket</a>(req);</div>
<div class="line">        <span class="keywordflow">if</span> (ws) {</div>
<div class="line">            <span class="comment">/* Handle WebSocket - see WEBSOCKET.md */</span></div>
<div class="line">            <span class="comment">/* Don&#39;t call finish() after upgrade */</span></div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Normal HTTP handling */</span></div>
<div class="line">    <a class="code hl_function" href="group__http.html#ga908829abf68bcfe935568fe4f45c0330">SocketHTTPServer_Request_finish</a>(req);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__http_html_ga27bf639b401330e8d40ebbaf0c93e12b"><div class="ttname"><a href="group__http.html#ga27bf639b401330e8d40ebbaf0c93e12b">SocketHTTPServer_Request_upgrade_websocket</a></div><div class="ttdeci">SocketWS_T SocketHTTPServer_Request_upgrade_websocket(SocketHTTPServer_Request_T req)</div><div class="ttdoc">Accept WebSocket upgrade and switch protocol.</div></div>
<div class="ttc" id="agroup__http_html_gadea7c22d784dde56835abffcd57ee516"><div class="ttname"><a href="group__http.html#gadea7c22d784dde56835abffcd57ee516">SocketHTTPServer_Request_is_websocket</a></div><div class="ttdeci">int SocketHTTPServer_Request_is_websocket(SocketHTTPServer_Request_T req)</div><div class="ttdoc">Check if the request is a WebSocket upgrade attempt.</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md875"></a>
Error Handling</h1>
<h2><a class="anchor" id="autotoc_md876"></a>
Client Exceptions</h2>
<div class="fragment"><div class="line"><a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a> {</div>
<div class="line">    <a class="code hl_function" href="group__http__client.html#gafef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, url, &amp;response);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__http__client.html#ga50039c8c595271d7d51b28ed5a4e7196">SocketHTTPClient_DNSFailed</a>) {</div>
<div class="line">    <span class="comment">/* DNS resolution failed */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__http__client.html#ga83bda6e77bc5fb165e4e7fead483094b">SocketHTTPClient_ConnectFailed</a>) {</div>
<div class="line">    <span class="comment">/* Connection to server failed */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__http__client.html#gac109f9bf9ba67f2f56db130172b3dd94">SocketHTTPClient_TLSFailed</a>) {</div>
<div class="line">    <span class="comment">/* TLS/SSL error */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__http__client.html#gaa0847dd6efa2f627e07173f29b29c8ae">SocketHTTPClient_Timeout</a>) {</div>
<div class="line">    <span class="comment">/* Request timed out */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__http__client.html#gafd7d2611128ad32cc65cb256403c671f">SocketHTTPClient_TooManyRedirects</a>) {</div>
<div class="line">    <span class="comment">/* Redirect limit exceeded */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__http__client.html#ga24ffae352f53c9580d861d3590b61e2a">SocketHTTPClient_ProtocolError</a>) {</div>
<div class="line">    <span class="comment">/* HTTP parse error */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__http__client.html#ga4ed14f04119b1dec3cb25c432b7a383d">SocketHTTPClient_ResponseTooLarge</a>) {</div>
<div class="line">    <span class="comment">/* Response exceeded max_response_size */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#ga0e2a75478cd44f1666a6aca626c5c50b">FINALLY</a> {</div>
<div class="line">    <a class="code hl_function" href="group__http__client.html#ga826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a>(&amp;response);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="ttc" id="agroup__foundation_html_ga0e2a75478cd44f1666a6aca626c5c50b"><div class="ttname"><a href="group__foundation.html#ga0e2a75478cd44f1666a6aca626c5c50b">FINALLY</a></div><div class="ttdeci">#define FINALLY</div><div class="ttdoc">Define cleanup code that executes regardless of exceptions.</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l01326">Except.h:1326</a></div></div>
<div class="ttc" id="agroup__foundation_html_gab5e72fc2bd41014c75e0ace4feabfe8e"><div class="ttname"><a href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a></div><div class="ttdeci">#define EXCEPT(e)</div><div class="ttdoc">Catch a specific exception type within a TRY block.</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l01105">Except.h:1105</a></div></div>
<div class="ttc" id="agroup__foundation_html_gad2746371528bdf15c3910b7bf217dac0"><div class="ttname"><a href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div><div class="ttdeci">#define TRY</div><div class="ttdoc">Start a TRY/EXCEPT/FINALLY exception handling block.</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l00991">Except.h:991</a></div></div>
<div class="ttc" id="agroup__foundation_html_gae6628ac788ad213363b89dba9868420b"><div class="ttname"><a href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a></div><div class="ttdeci">#define END_TRY</div><div class="ttdoc">Complete a TRY/EXCEPT/FINALLY exception handling block.</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l01439">Except.h:1439</a></div></div>
<div class="ttc" id="agroup__http__client_html_ga24ffae352f53c9580d861d3590b61e2a"><div class="ttname"><a href="group__http__client.html#ga24ffae352f53c9580d861d3590b61e2a">SocketHTTPClient_ProtocolError</a></div><div class="ttdeci">const Except_T SocketHTTPClient_ProtocolError</div><div class="ttdoc">HTTP protocol error.</div></div>
<div class="ttc" id="agroup__http__client_html_ga4ed14f04119b1dec3cb25c432b7a383d"><div class="ttname"><a href="group__http__client.html#ga4ed14f04119b1dec3cb25c432b7a383d">SocketHTTPClient_ResponseTooLarge</a></div><div class="ttdeci">const Except_T SocketHTTPClient_ResponseTooLarge</div><div class="ttdoc">Response body exceeds limit.</div></div>
<div class="ttc" id="agroup__http__client_html_ga50039c8c595271d7d51b28ed5a4e7196"><div class="ttname"><a href="group__http__client.html#ga50039c8c595271d7d51b28ed5a4e7196">SocketHTTPClient_DNSFailed</a></div><div class="ttdeci">const Except_T SocketHTTPClient_DNSFailed</div><div class="ttdoc">DNS resolution failure.</div></div>
<div class="ttc" id="agroup__http__client_html_ga83bda6e77bc5fb165e4e7fead483094b"><div class="ttname"><a href="group__http__client.html#ga83bda6e77bc5fb165e4e7fead483094b">SocketHTTPClient_ConnectFailed</a></div><div class="ttdeci">const Except_T SocketHTTPClient_ConnectFailed</div><div class="ttdoc">TCP connection failure.</div></div>
<div class="ttc" id="agroup__http__client_html_gaa0847dd6efa2f627e07173f29b29c8ae"><div class="ttname"><a href="group__http__client.html#gaa0847dd6efa2f627e07173f29b29c8ae">SocketHTTPClient_Timeout</a></div><div class="ttdeci">const Except_T SocketHTTPClient_Timeout</div><div class="ttdoc">Request timeout exceeded.</div></div>
<div class="ttc" id="agroup__http__client_html_gac109f9bf9ba67f2f56db130172b3dd94"><div class="ttname"><a href="group__http__client.html#gac109f9bf9ba67f2f56db130172b3dd94">SocketHTTPClient_TLSFailed</a></div><div class="ttdeci">const Except_T SocketHTTPClient_TLSFailed</div><div class="ttdoc">TLS/SSL handshake or I/O failure.</div></div>
<div class="ttc" id="agroup__http__client_html_gafd7d2611128ad32cc65cb256403c671f"><div class="ttname"><a href="group__http__client.html#gafd7d2611128ad32cc65cb256403c671f">SocketHTTPClient_TooManyRedirects</a></div><div class="ttdeci">const Except_T SocketHTTPClient_TooManyRedirects</div><div class="ttdoc">Redirect limit exceeded.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md877"></a>
Server Exceptions</h2>
<div class="fragment"><div class="line"><a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a> {</div>
<div class="line">    <a class="code hl_function" href="group__http.html#gafa06caca93c0fac3e52f7749abe03be9">SocketHTTPServer_start</a>(server);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__http.html#gab0cf03445c053391004f6234e29812f5">SocketHTTPServer_BindFailed</a>) {</div>
<div class="line">    <span class="comment">/* Port in use or permission denied */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__http.html#gab0e17c60a6e02fe69434302760371464">SocketHTTPServer_Failed</a>) {</div>
<div class="line">    <span class="comment">/* General server error */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="ttc" id="agroup__http_html_gab0cf03445c053391004f6234e29812f5"><div class="ttname"><a href="group__http.html#gab0cf03445c053391004f6234e29812f5">SocketHTTPServer_BindFailed</a></div><div class="ttdeci">const Except_T SocketHTTPServer_BindFailed</div><div class="ttdoc">Exception raised when binding to address/port fails (EADDRINUSE, EADDRNOTAVAIL, etc....</div></div>
<div class="ttc" id="agroup__http_html_gab0e17c60a6e02fe69434302760371464"><div class="ttname"><a href="group__http.html#gab0e17c60a6e02fe69434302760371464">SocketHTTPServer_Failed</a></div><div class="ttdeci">const Except_T SocketHTTPServer_Failed</div><div class="ttdoc">Exception raised on general server failures such as allocation errors or internal state corruption.</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md879"></a>
Proxy Support</h1>
<p>The HTTP client can connect through proxies:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketProxy_8h.html">socket/SocketProxy.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Configure proxy */</span></div>
<div class="line"><a class="code hl_struct" href="group__proxy.html#structSocketProxy__Config">SocketProxy_Config</a> proxy;</div>
<div class="line"><a class="code hl_function" href="group__core__io.html#ga197242786615adf218d849747bc0fd67">SocketProxy_config_defaults</a>(&amp;proxy);</div>
<div class="line">proxy.<a class="code hl_variable" href="group__proxy.html#aa04cfa88d52d6c1f889f9f936a141141">type</a> = <a class="code hl_enumvalue" href="group__core__io.html#ggaaa33f7bdae951cc7b53a2fb049e89132a65e12b32adeb0ad03fc8a1031423c21f">SOCKET_PROXY_SOCKS5</a>;</div>
<div class="line">proxy.<a class="code hl_variable" href="group__proxy.html#a507287d832417162da30794693e16a6e">host</a> = <span class="stringliteral">&quot;proxy.example.com&quot;</span>;</div>
<div class="line">proxy.<a class="code hl_variable" href="group__proxy.html#aff28145ee5466be9d0e12fba3e07dc97">port</a> = 1080;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Set as default proxy for client */</span></div>
<div class="line">config.proxy = &amp;proxy;</div>
<div class="line">SocketHTTPClient_T client = <a class="code hl_function" href="group__http__client.html#ga2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a>(&amp;config);</div>
<div class="ttc" id="aSocketProxy_8h_html"><div class="ttname"><a href="SocketProxy_8h.html">SocketProxy.h</a></div><div class="ttdoc">Proxy tunneling module for HTTP CONNECT and SOCKS protocols.</div></div>
<div class="ttc" id="agroup__core__io_html_ga197242786615adf218d849747bc0fd67"><div class="ttname"><a href="group__core__io.html#ga197242786615adf218d849747bc0fd67">SocketProxy_config_defaults</a></div><div class="ttdeci">void SocketProxy_config_defaults(SocketProxy_Config *config)</div><div class="ttdoc">Initialize proxy configuration with safe default values.</div></div>
<div class="ttc" id="agroup__core__io_html_ggaaa33f7bdae951cc7b53a2fb049e89132a65e12b32adeb0ad03fc8a1031423c21f"><div class="ttname"><a href="group__core__io.html#ggaaa33f7bdae951cc7b53a2fb049e89132a65e12b32adeb0ad03fc8a1031423c21f">SOCKET_PROXY_SOCKS5</a></div><div class="ttdeci">@ SOCKET_PROXY_SOCKS5</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00265">SocketProxy.h:264</a></div></div>
<div class="ttc" id="agroup__proxy_html_a507287d832417162da30794693e16a6e"><div class="ttname"><a href="group__proxy.html#a507287d832417162da30794693e16a6e">SocketProxy_Config::host</a></div><div class="ttdeci">const char * host</div><div class="ttdoc">Proxy server details.</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00385">SocketProxy.h:385</a></div></div>
<div class="ttc" id="agroup__proxy_html_aa04cfa88d52d6c1f889f9f936a141141"><div class="ttname"><a href="group__proxy.html#aa04cfa88d52d6c1f889f9f936a141141">SocketProxy_Config::type</a></div><div class="ttdeci">SocketProxyType type</div><div class="ttdoc">Proxy protocol type (e.g., SOCKET_PROXY_SOCKS5).</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00382">SocketProxy.h:382</a></div></div>
<div class="ttc" id="agroup__proxy_html_aff28145ee5466be9d0e12fba3e07dc97"><div class="ttname"><a href="group__proxy.html#aff28145ee5466be9d0e12fba3e07dc97">SocketProxy_Config::port</a></div><div class="ttdeci">int port</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00387">SocketProxy.h:387</a></div></div>
<div class="ttc" id="agroup__proxy_html_structSocketProxy__Config"><div class="ttname"><a href="group__proxy.html#structSocketProxy__Config">SocketProxy_Config</a></div><div class="ttdoc">Configuration structure for proxy connections.</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00379">SocketProxy.h:380</a></div></div>
</div><!-- fragment --><p>See <a class="el" href="proxy_guide.html">PROXY.md</a> for complete proxy documentation.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md881"></a>
Advanced Topics</h1>
<h2><a class="anchor" id="autotoc_md882"></a>
Streaming Requests</h2>
<p>For large uploads:</p>
<div class="fragment"><div class="line">ssize_t read_callback(<span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> len, <span class="keywordtype">void</span> *userdata) {</div>
<div class="line">    FILE *fp = userdata;</div>
<div class="line">    <span class="keywordflow">return</span> fread(buf, 1, len, fp);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">FILE *fp = fopen(<span class="stringliteral">&quot;large_file.bin&quot;</span>, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="group__http__client.html#ga8470d0864afe35f5265bda12d221f14e">SocketHTTPClient_Request_body_stream</a>(req, read_callback, fp);</div>
<div class="ttc" id="agroup__http__client_html_ga8470d0864afe35f5265bda12d221f14e"><div class="ttname"><a href="group__http__client.html#ga8470d0864afe35f5265bda12d221f14e">SocketHTTPClient_Request_body_stream</a></div><div class="ttdeci">int SocketHTTPClient_Request_body_stream(SocketHTTPClient_Request_T req, ssize_t(*read_cb)(void *buf, size_t len, void *userdata), void *userdata)</div><div class="ttdoc">Set streaming body.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md883"></a>
Custom TLS Context</h2>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__security.html#structSocketTLSContext__T">SocketTLSContext_T</a> tls = <a class="code hl_function" href="group__security.html#ga7fe51da14439d768bdf72f4ed8fbb022">SocketTLSContext_new_client</a>(NULL);</div>
<div class="line"><a class="code hl_function" href="group__security.html#ga71084c00bec22f65b90301188868b759">SocketTLSContext_set_verify_mode</a>(tls, SSL_VERIFY_PEER);</div>
<div class="line">SocketTLSContext_set_ca_file(tls, <span class="stringliteral">&quot;/path/to/ca-bundle.crt&quot;</span>);</div>
<div class="line"> </div>
<div class="line">config.<a class="code hl_variable" href="group__http.html#a2bbd51b98734877f1e4dd9e0176b82b7">tls_context</a> = tls;</div>
<div class="ttc" id="agroup__http_html_a2bbd51b98734877f1e4dd9e0176b82b7"><div class="ttname"><a href="group__http.html#a2bbd51b98734877f1e4dd9e0176b82b7">SocketHTTPServer_Config::tls_context</a></div><div class="ttdeci">SocketTLSContext_T tls_context</div><div class="ttdoc">TLS context for HTTPS (NULL = plain HTTP). Requires SOCKET_HAS_TLS and valid OpenSSL/LibreSSL context...</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00320">SocketHTTPServer.h:320</a></div></div>
<div class="ttc" id="agroup__security_html_ga71084c00bec22f65b90301188868b759"><div class="ttname"><a href="group__security.html#ga71084c00bec22f65b90301188868b759">SocketTLSContext_set_verify_mode</a></div><div class="ttdeci">void SocketTLSContext_set_verify_mode(SocketTLSContext_T ctx, TLSVerifyMode mode)</div><div class="ttdoc">Set certificate verification policy.</div></div>
<div class="ttc" id="agroup__security_html_ga7fe51da14439d768bdf72f4ed8fbb022"><div class="ttname"><a href="group__security.html#ga7fe51da14439d768bdf72f4ed8fbb022">SocketTLSContext_new_client</a></div><div class="ttdeci">SocketTLSContext_T SocketTLSContext_new_client(const char *ca_file)</div><div class="ttdoc">Create client TLS context.</div></div>
<div class="ttc" id="agroup__security_html_structSocketTLSContext__T"><div class="ttname"><a href="group__security.html#structSocketTLSContext__T">SocketTLSContext_T</a></div><div class="ttdoc">TLS context structure for managing OpenSSL SSL_CTX with secure defaults, certificates,...</div><div class="ttdef"><b>Definition</b> <a href="SocketTLS-private_8h_source.html#l00619">SocketTLS-private.h:620</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md884"></a>
Connection Pooling Behavior</h2>
<ul>
<li>HTTP/1.1: Multiple connections per host (default: 6)</li>
<li>HTTP/2: Single connection with multiplexed streams</li>
<li>Idle connections automatically closed after <code>idle_timeout_ms</code></li>
<li>Pool cleaned on <code><a class="el" href="group__http__client.html#ga01d6c9bebdcda63949ba9af698f8e7e5" title="Destroy HTTP client and release all resources.">SocketHTTPClient_free()</a></code></li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md886"></a>
Thread Safety</h1>
<ul>
<li><code>SocketHTTPClient_T</code> instances are <b>NOT</b> thread-safe</li>
<li>Use one client per thread, or protect with mutex</li>
<li>Response data can be safely used from any thread after request completes</li>
<li><code>SocketHTTPServer_T</code> instances are <b>NOT</b> thread-safe</li>
<li>Use one server per thread for event loop</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md888"></a>
Performance Tips</h1>
<ol type="1">
<li><b>Reuse clients</b> - Creating clients is expensive</li>
<li><b>Use HTTP/2</b> - Better for multiple requests to same host</li>
<li><b>Enable pooling</b> - Avoid connection setup overhead</li>
<li><b>Set appropriate timeouts</b> - Prevent hung connections</li>
<li><b>Use compression</b> - Reduce bandwidth (auto-enabled)</li>
<li><b>Consider async</b> - For high concurrency scenarios</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md890"></a>
See Also</h1>
<ul>
<li><a class="el" href="websocket_guide.html">WebSocket Guide</a></li>
<li><a class="el" href="proxy_guide.html">Proxy Guide</a></li>
<li><a class="el" href="security_guide.html">Security Guide</a></li>
<li><a class="el" href="SocketHTTPClient_8h.html">SocketHTTPClient.h</a></li>
<li><a class="el" href="SocketHTTPServer_8h.html">SocketHTTPServer.h</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md891"></a>
HTTP/1.1 Parser Security Enhancements (Recent Fixes)</h2>
<p>The SocketHTTP1 parser now includes stronger protections against HTTP request smuggling and DoS:</p>
<ul>
<li><b>Multi-Header Validation</b>:<ul>
<li>Content-Length: All instances must parse to identical value; mismatch triggers <code>HTTP1_ERROR_INVALID_CONTENT_LENGTH</code> (strict mode detects smuggling).</li>
<li>Transfer-Encoding: Scans <b>all</b> TE headers for "chunked" token. Hidden chunked in later headers now detected.</li>
</ul>
</li>
<li><b>Strict Transfer-Encoding Handling</b>:<ul>
<li>Reject unsupported codings (gzip, compress, deflate, identity) in strict mode.</li>
<li>For "chunked" with extras (e.g., "chunked,identity"), reject if strict_mode=1 (<code>HTTP1_ERROR_UNSUPPORTED_TRANSFER_CODING</code>).</li>
<li>Fallback to until_close only if no chunked and not strict.</li>
</ul>
</li>
<li><b>DoS Mitigations</b>:<ul>
<li>New config <code>max_header_line</code> (default 16KB): Limits individual header line length (name + value + OWS).</li>
<li>Existing limits (max_headers, max_header_size) enforced before alloc.</li>
</ul>
</li>
<li><b>URI Validation</b>:<ul>
<li>Post-parse <code>SocketHTTP_URI_parse</code> integration in finalize_request: Rejects invalid syntax/encodings (<code>HTTP1_ERROR_INVALID_URI</code>).</li>
</ul>
</li>
<li><b>Testing</b>:<ul>
<li>New tests in <code>test_http1_parser.c</code>: Multi-header vectors, strict rejections, long lines, invalid URI.</li>
<li>Run <code>ctest -R http1</code> to verify.</li>
</ul>
</li>
</ul>
<p>Update configs for production: Set <code>strict_mode=1</code> for servers/proxies.</p>
<p>For full details, see security.md and <a class="el" href="SocketHTTP1_8h.html" title="HTTP/1.1 message syntax parsing and serialization (RFC 9112).">SocketHTTP1.h</a> docs. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- Custom footer for Tetsuo Pulse -->
<div id="nav-path" class="navpath">
  <ul>
    <li class="footer" style="text-align: center; width: 100%;">
       <a href="https://tetsuocorp.com" target="_blank" rel="noopener">Tetsuo Corp</a>
    </li>
  </ul>
</div>
</body>
</html>
