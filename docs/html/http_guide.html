<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="High-performance, exception-driven socket toolkit for POSIX systems">
<meta name="keywords" content="socket, networking, C, POSIX, TCP, UDP, TLS, async, high-performance, library">
<meta name="author" content="Tetsuo Corporation">
<meta name="theme-color" content="#3b82f6">
<title>HTTP Guide</title>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="socket-theme.css" rel="stylesheet" type="text/css"/>
<link href="socket-theme.css" rel="stylesheet" type="text/css"/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' stop-color='%233b82f6'/><stop offset='100%25' stop-color='%238b5cf6'/></linearGradient></defs><rect width='100' height='100' rx='20' fill='url(%23g)'/><text x='50' y='68' font-size='50' text-anchor='middle' fill='white' font-family='sans-serif' font-weight='bold'>S</text></svg>">
</head>
<body>
<div id="top">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Socket Library<span id="projectnumber">1.0.0</span></div>
   <div id="projectbrief">High-performance, exception-driven socket toolkit for POSIX systems</div>
  </td>
  <td style="text-align: right; padding: 20px; vertical-align: middle;">
    <div style="display: flex; gap: 8px; justify-content: flex-end; flex-wrap: wrap; align-items: center;">
      <a href="index.html" class="quick-link">Home</a>
      <a href="annotated.html" class="quick-link">Structures</a>
      <a href="files.html" class="quick-link">Files</a>
      <a href="globals.html" class="quick-link">API</a>
    </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('http_guide.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">HTTP Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Complete guide to HTTP/1.1 and HTTP/2 support in the Socket Library.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md77"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md78"></a>
Simple HTTP GET</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketHTTPClient_8h.html">http/SocketHTTPClient.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="SocketHTTPClient_8h.html#aba14ae9994f5645e5aa8488f905aad54">SocketHTTPClient_T</a> client = <a class="code hl_function" href="SocketHTTPClient_8h.html#a2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a>(NULL);</div>
<div class="line"><a class="code hl_struct" href="SocketHTTPClient_8h.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a> response = {0};</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="SocketHTTPClient_8h.html#afef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, <span class="stringliteral">&quot;https://example.com&quot;</span>, &amp;response) == 0) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Status: %d\n&quot;</span>, response.<a class="code hl_variable" href="SocketHTTPClient_8h.html#a0baa2f233436d7bb00f28214d6382542">status_code</a>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Body: %.*s\n&quot;</span>, (<span class="keywordtype">int</span>)response.<a class="code hl_variable" href="SocketHTTPClient_8h.html#aae64f48637811f9ddbc8e12aea55e0e6">body_len</a>, (<span class="keywordtype">char</span>*)response.<a class="code hl_variable" href="SocketHTTPClient_8h.html#ab7f8558743b64c751b64ac26231dca31">body</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a>(&amp;response);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a01d6c9bebdcda63949ba9af698f8e7e5">SocketHTTPClient_free</a>(&amp;client);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html"><div class="ttname"><a href="SocketHTTPClient_8h.html">SocketHTTPClient.h</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a01d6c9bebdcda63949ba9af698f8e7e5"><div class="ttname"><a href="SocketHTTPClient_8h.html#a01d6c9bebdcda63949ba9af698f8e7e5">SocketHTTPClient_free</a></div><div class="ttdeci">void SocketHTTPClient_free(SocketHTTPClient_T *client)</div><div class="ttdoc">SocketHTTPClient_free - Free client and all resources @client: Pointer to client (set to NULL)</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a0baa2f233436d7bb00f28214d6382542"><div class="ttname"><a href="SocketHTTPClient_8h.html#a0baa2f233436d7bb00f28214d6382542">SocketHTTPClient_Response::status_code</a></div><div class="ttdeci">int status_code</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00394">SocketHTTPClient.h:394</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a2d57db3a9a6388315f253caa099e4205"><div class="ttname"><a href="SocketHTTPClient_8h.html#a2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a></div><div class="ttdeci">SocketHTTPClient_T SocketHTTPClient_new(const SocketHTTPClient_Config *config)</div><div class="ttdoc">SocketHTTPClient_new - Create HTTP client @config: Configuration (NULL for defaults)</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a826bca53483c23de2c8b03d456010149"><div class="ttname"><a href="SocketHTTPClient_8h.html#a826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a></div><div class="ttdeci">void SocketHTTPClient_Response_free(SocketHTTPClient_Response *response)</div><div class="ttdoc">SocketHTTPClient_Response_free - Free response resources @response: Response to free.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_aae64f48637811f9ddbc8e12aea55e0e6"><div class="ttname"><a href="SocketHTTPClient_8h.html#aae64f48637811f9ddbc8e12aea55e0e6">SocketHTTPClient_Response::body_len</a></div><div class="ttdeci">size_t body_len</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00397">SocketHTTPClient.h:397</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_ab7f8558743b64c751b64ac26231dca31"><div class="ttname"><a href="SocketHTTPClient_8h.html#ab7f8558743b64c751b64ac26231dca31">SocketHTTPClient_Response::body</a></div><div class="ttdeci">void * body</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00396">SocketHTTPClient.h:396</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_aba14ae9994f5645e5aa8488f905aad54"><div class="ttname"><a href="SocketHTTPClient_8h.html#aba14ae9994f5645e5aa8488f905aad54">SocketHTTPClient_T</a></div><div class="ttdeci">struct SocketHTTPClient * SocketHTTPClient_T</div><div class="ttdoc">HTTP client instance.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00374">SocketHTTPClient.h:374</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_afef425814e66932f7cf1f36e9356b70e"><div class="ttname"><a href="SocketHTTPClient_8h.html#afef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a></div><div class="ttdeci">int SocketHTTPClient_get(SocketHTTPClient_T client, const char *url, SocketHTTPClient_Response *response)</div><div class="ttdoc">SocketHTTPClient_get - Perform GET request @client: Client instance @url: Full URL (http:// or https:...</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_structSocketHTTPClient__Response"><div class="ttname"><a href="SocketHTTPClient_8h.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a></div><div class="ttdoc">HTTP response (owned by caller)</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00392">SocketHTTPClient.h:393</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md79"></a>
Simple HTTP POST</h2>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *json = <span class="stringliteral">&quot;{\&quot;name\&quot;: \&quot;value\&quot;}&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="SocketHTTPClient_8h.html#a9b47bc2dd38d4a6700af79ced0acecb2">SocketHTTPClient_post</a>(client, <span class="stringliteral">&quot;https://api.example.com/data&quot;</span>,</div>
<div class="line">                          <span class="stringliteral">&quot;application/json&quot;</span>, json, strlen(json),</div>
<div class="line">                          &amp;response) == 0) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Status: %d\n&quot;</span>, response.<a class="code hl_variable" href="SocketHTTPClient_8h.html#a0baa2f233436d7bb00f28214d6382542">status_code</a>);</div>
<div class="line">}</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a9b47bc2dd38d4a6700af79ced0acecb2"><div class="ttname"><a href="SocketHTTPClient_8h.html#a9b47bc2dd38d4a6700af79ced0acecb2">SocketHTTPClient_post</a></div><div class="ttdeci">int SocketHTTPClient_post(SocketHTTPClient_T client, const char *url, const char *content_type, const void *body, size_t body_len, SocketHTTPClient_Response *response)</div><div class="ttdoc">SocketHTTPClient_post - Perform POST request @client: Client @url: Full URL @content_type: Content-Ty...</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md81"></a>
HTTP Client API</h1>
<p>The <code>SocketHTTPClient_T</code> provides a high-level HTTP client with automatic:</p><ul>
<li><a class="el" href="namespace_3globalScope_4.html#protocolProtocol-p" title="Socket_new - Create a new socket @domain: Address family (AF_INET, AF_INET6, etc.) @type: Socket type...">Protocol</a> negotiation (HTTP/1.1 and HTTP/2)</li>
<li>Connection pooling</li>
<li>Cookie handling</li>
<li>Redirect following</li>
<li>Compression (gzip/deflate/brotli)</li>
</ul>
<h2><a class="anchor" id="autotoc_md82"></a>
Creating a Client</h2>
<div class="fragment"><div class="line"><span class="comment">/* With default configuration */</span></div>
<div class="line"><a class="code hl_typedef" href="SocketHTTPClient_8h.html#aba14ae9994f5645e5aa8488f905aad54">SocketHTTPClient_T</a> client = <a class="code hl_function" href="SocketHTTPClient_8h.html#a2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a>(NULL);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* With custom configuration */</span></div>
<div class="line"><a class="code hl_struct" href="SocketHTTPClient_8h.html#structSocketHTTPClient__Config">SocketHTTPClient_Config</a> config;</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#aad5ad81c60bb230588b5f660a834f40e">SocketHTTPClient_config_defaults</a>(&amp;config);</div>
<div class="line"> </div>
<div class="line">config.<a class="code hl_variable" href="SocketHTTPClient_8h.html#aeeeb2ea03d33db0ba500da1c7782f7f3">max_version</a> = HTTP_VERSION_2_0;        <span class="comment">/* Prefer HTTP/2 */</span></div>
<div class="line">config.<a class="code hl_variable" href="SocketHTTPClient_8h.html#a1e5a28b4e256802af5f979726c728553">follow_redirects</a> = 5;                   <span class="comment">/* Max 5 redirects */</span></div>
<div class="line">config.<a class="code hl_variable" href="SocketHTTPClient_8h.html#ad0964ac6e0738a3c4914054529bb51a7">connect_timeout_ms</a> = 10000;             <span class="comment">/* 10 second timeout */</span></div>
<div class="line">config.<a class="code hl_variable" href="SocketHTTPClient_8h.html#ac81b35696b105b13f703c5d71f5c5692">enable_connection_pool</a> = 1;             <span class="comment">/* Enable pooling */</span></div>
<div class="line">config.<a class="code hl_variable" href="SocketHTTPClient_8h.html#ad87a23b29168c1a6a738bd07268247de">max_connections_per_host</a> = 6;           <span class="comment">/* HTTP/1.1 default */</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="SocketHTTPClient_8h.html#aba14ae9994f5645e5aa8488f905aad54">SocketHTTPClient_T</a> client = <a class="code hl_function" href="SocketHTTPClient_8h.html#a2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a>(&amp;config);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a1e5a28b4e256802af5f979726c728553"><div class="ttname"><a href="SocketHTTPClient_8h.html#a1e5a28b4e256802af5f979726c728553">SocketHTTPClient_Config::follow_redirects</a></div><div class="ttdeci">int follow_redirects</div><div class="ttdoc">Max redirects (0 = disabled)</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00329">SocketHTTPClient.h:329</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_aad5ad81c60bb230588b5f660a834f40e"><div class="ttname"><a href="SocketHTTPClient_8h.html#aad5ad81c60bb230588b5f660a834f40e">SocketHTTPClient_config_defaults</a></div><div class="ttdeci">void SocketHTTPClient_config_defaults(SocketHTTPClient_Config *config)</div><div class="ttdoc">SocketHTTPClient_config_defaults - Initialize config with defaults @config: Configuration structure t...</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_ac81b35696b105b13f703c5d71f5c5692"><div class="ttname"><a href="SocketHTTPClient_8h.html#ac81b35696b105b13f703c5d71f5c5692">SocketHTTPClient_Config::enable_connection_pool</a></div><div class="ttdeci">int enable_connection_pool</div><div class="ttdoc">Enable pooling (default: 1)</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00316">SocketHTTPClient.h:316</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_ad0964ac6e0738a3c4914054529bb51a7"><div class="ttname"><a href="SocketHTTPClient_8h.html#ad0964ac6e0738a3c4914054529bb51a7">SocketHTTPClient_Config::connect_timeout_ms</a></div><div class="ttdeci">int connect_timeout_ms</div><div class="ttdoc">Connection timeout.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00324">SocketHTTPClient.h:324</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_ad87a23b29168c1a6a738bd07268247de"><div class="ttname"><a href="SocketHTTPClient_8h.html#ad87a23b29168c1a6a738bd07268247de">SocketHTTPClient_Config::max_connections_per_host</a></div><div class="ttdeci">size_t max_connections_per_host</div><div class="ttdoc">Per-host limit (default: 6)</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00317">SocketHTTPClient.h:317</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_aeeeb2ea03d33db0ba500da1c7782f7f3"><div class="ttname"><a href="SocketHTTPClient_8h.html#aeeeb2ea03d33db0ba500da1c7782f7f3">SocketHTTPClient_Config::max_version</a></div><div class="ttdeci">SocketHTTP_Version max_version</div><div class="ttdoc">Max HTTP version (default: HTTP/2)</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00312">SocketHTTPClient.h:312</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_structSocketHTTPClient__Config"><div class="ttname"><a href="SocketHTTPClient_8h.html#structSocketHTTPClient__Config">SocketHTTPClient_Config</a></div><div class="ttdoc">HTTP client configuration.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00309">SocketHTTPClient.h:310</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md83"></a>
Configuration Options</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>max_version</code>   </td><td class="markdownTableBodyNone"><code>HTTP_VERSION_2_0</code>   </td><td class="markdownTableBodyNone">Maximum HTTP version to use    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>enable_connection_pool</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">Enable connection reuse    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>max_connections_per_host</code>   </td><td class="markdownTableBodyNone"><code>6</code>   </td><td class="markdownTableBodyNone">Per-host connection limit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>max_total_connections</code>   </td><td class="markdownTableBodyNone"><code>100</code>   </td><td class="markdownTableBodyNone">Total connection limit    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>connect_timeout_ms</code>   </td><td class="markdownTableBodyNone"><code>30000</code>   </td><td class="markdownTableBodyNone">Connection timeout    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>request_timeout_ms</code>   </td><td class="markdownTableBodyNone"><code>60000</code>   </td><td class="markdownTableBodyNone">Request timeout    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>follow_redirects</code>   </td><td class="markdownTableBodyNone"><code>10</code>   </td><td class="markdownTableBodyNone">Max redirects (0 = disabled)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>accept_encoding</code>   </td><td class="markdownTableBodyNone">All   </td><td class="markdownTableBodyNone">Accepted compression methods    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>auto_decompress</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">Auto-decompress responses    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>verify_ssl</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">Verify TLS certificates   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md84"></a>
Simple API</h2>
<p>The simple API covers common use cases:</p>
<div class="fragment"><div class="line"><span class="comment">/* GET request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="SocketHTTPClient_8h.html#afef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, url, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* HEAD request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="SocketHTTPClient_8h.html#a4efcd265a023ce14464f07ef360fb030">SocketHTTPClient_head</a>(client, url, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* POST request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="SocketHTTPClient_8h.html#a9b47bc2dd38d4a6700af79ced0acecb2">SocketHTTPClient_post</a>(client, url, content_type, body, body_len, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* PUT request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="SocketHTTPClient_8h.html#a9d15a2624c43ac163f993827d3756efc">SocketHTTPClient_put</a>(client, url, content_type, body, body_len, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* DELETE request */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="SocketHTTPClient_8h.html#a6bc9ded2b6017d03733c50c493605ef7">SocketHTTPClient_delete</a>(client, url, &amp;response);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a4efcd265a023ce14464f07ef360fb030"><div class="ttname"><a href="SocketHTTPClient_8h.html#a4efcd265a023ce14464f07ef360fb030">SocketHTTPClient_head</a></div><div class="ttdeci">int SocketHTTPClient_head(SocketHTTPClient_T client, const char *url, SocketHTTPClient_Response *response)</div><div class="ttdoc">SocketHTTPClient_head - Perform HEAD request.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a6bc9ded2b6017d03733c50c493605ef7"><div class="ttname"><a href="SocketHTTPClient_8h.html#a6bc9ded2b6017d03733c50c493605ef7">SocketHTTPClient_delete</a></div><div class="ttdeci">int SocketHTTPClient_delete(SocketHTTPClient_T client, const char *url, SocketHTTPClient_Response *response)</div><div class="ttdoc">SocketHTTPClient_delete - Perform DELETE request.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a9d15a2624c43ac163f993827d3756efc"><div class="ttname"><a href="SocketHTTPClient_8h.html#a9d15a2624c43ac163f993827d3756efc">SocketHTTPClient_put</a></div><div class="ttdeci">int SocketHTTPClient_put(SocketHTTPClient_T client, const char *url, const char *content_type, const void *body, size_t body_len, SocketHTTPClient_Response *response)</div><div class="ttdoc">SocketHTTPClient_put - Perform PUT request.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md85"></a>
Request Builder API</h2>
<p>For more control, use the request builder:</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="SocketHTTPClient_8h.html#a265c0209bd77c39f219d72c3956a8818">SocketHTTPClient_Request_T</a> req = <a class="code hl_function" href="SocketHTTPClient_8h.html#a46c9c2ab8d3334dd0ad1359d2bb93102">SocketHTTPClient_Request_new</a>(</div>
<div class="line">    client, <a class="code hl_enumvalue" href="SocketHTTP_8h.html#af6f90bb536a5cd085f4327bda4d3ee8fa1944682922ac79b2e682312d8f3f71e2">HTTP_METHOD_POST</a>, <span class="stringliteral">&quot;https://api.example.com/upload&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Add headers */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a8a7c54a81dc916af60f9747162e844a2">SocketHTTPClient_Request_header</a>(req, <span class="stringliteral">&quot;Content-Type&quot;</span>, <span class="stringliteral">&quot;application/json&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a8a7c54a81dc916af60f9747162e844a2">SocketHTTPClient_Request_header</a>(req, <span class="stringliteral">&quot;Authorization&quot;</span>, <span class="stringliteral">&quot;Bearer token123&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a8a7c54a81dc916af60f9747162e844a2">SocketHTTPClient_Request_header</a>(req, <span class="stringliteral">&quot;X-Custom-Header&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Set body */</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *body = <span class="stringliteral">&quot;{\&quot;data\&quot;: \&quot;test\&quot;}&quot;</span>;</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#ae8f21b1fc1aae1ef8b1bbe43ce875247">SocketHTTPClient_Request_body</a>(req, body, strlen(body));</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Set timeout */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#abe918e0dacc9d507f1ad288a399dfca6">SocketHTTPClient_Request_timeout</a>(req, 5000);  <span class="comment">/* 5 seconds */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Execute */</span></div>
<div class="line"><a class="code hl_struct" href="SocketHTTPClient_8h.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a> response;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="SocketHTTPClient_8h.html#a4ba09b6d59cc2aee465749978f62ad76">SocketHTTPClient_Request_execute</a>(req, &amp;response) == 0) {</div>
<div class="line">    <span class="comment">/* Handle response */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a31f46990e2a8d948bfe7db2e22b85565">SocketHTTPClient_Request_free</a>(&amp;req);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a>(&amp;response);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a265c0209bd77c39f219d72c3956a8818"><div class="ttname"><a href="SocketHTTPClient_8h.html#a265c0209bd77c39f219d72c3956a8818">SocketHTTPClient_Request_T</a></div><div class="ttdeci">struct SocketHTTPClient_Request * SocketHTTPClient_Request_T</div><div class="ttdoc">HTTP request builder.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00377">SocketHTTPClient.h:377</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a31f46990e2a8d948bfe7db2e22b85565"><div class="ttname"><a href="SocketHTTPClient_8h.html#a31f46990e2a8d948bfe7db2e22b85565">SocketHTTPClient_Request_free</a></div><div class="ttdeci">void SocketHTTPClient_Request_free(SocketHTTPClient_Request_T *req)</div><div class="ttdoc">SocketHTTPClient_Request_free - Free request builder @req: Pointer to request (set to NULL)</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a46c9c2ab8d3334dd0ad1359d2bb93102"><div class="ttname"><a href="SocketHTTPClient_8h.html#a46c9c2ab8d3334dd0ad1359d2bb93102">SocketHTTPClient_Request_new</a></div><div class="ttdeci">SocketHTTPClient_Request_T SocketHTTPClient_Request_new(SocketHTTPClient_T client, SocketHTTP_Method method, const char *url)</div><div class="ttdoc">SocketHTTPClient_Request_new - Create request builder @client: Client instance @method: HTTP method @...</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a4ba09b6d59cc2aee465749978f62ad76"><div class="ttname"><a href="SocketHTTPClient_8h.html#a4ba09b6d59cc2aee465749978f62ad76">SocketHTTPClient_Request_execute</a></div><div class="ttdeci">int SocketHTTPClient_Request_execute(SocketHTTPClient_Request_T req, SocketHTTPClient_Response *response)</div><div class="ttdoc">SocketHTTPClient_Request_execute - Execute request @req: Request @response: Output response.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a8a7c54a81dc916af60f9747162e844a2"><div class="ttname"><a href="SocketHTTPClient_8h.html#a8a7c54a81dc916af60f9747162e844a2">SocketHTTPClient_Request_header</a></div><div class="ttdeci">int SocketHTTPClient_Request_header(SocketHTTPClient_Request_T req, const char *name, const char *value)</div><div class="ttdoc">Cookie SameSite attribute values.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_abe918e0dacc9d507f1ad288a399dfca6"><div class="ttname"><a href="SocketHTTPClient_8h.html#abe918e0dacc9d507f1ad288a399dfca6">SocketHTTPClient_Request_timeout</a></div><div class="ttdeci">void SocketHTTPClient_Request_timeout(SocketHTTPClient_Request_T req, int ms)</div><div class="ttdoc">SocketHTTPClient_Request_timeout - Set per-request timeout @req: Request @ms: Timeout in milliseconds...</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_ae8f21b1fc1aae1ef8b1bbe43ce875247"><div class="ttname"><a href="SocketHTTPClient_8h.html#ae8f21b1fc1aae1ef8b1bbe43ce875247">SocketHTTPClient_Request_body</a></div><div class="ttdeci">int SocketHTTPClient_Request_body(SocketHTTPClient_Request_T req, const void *data, size_t len)</div><div class="ttdoc">SocketHTTPClient_Request_body - Set request body @req: Request @data: Body data @len: Data length.</div></div>
<div class="ttc" id="aSocketHTTP_8h_html_af6f90bb536a5cd085f4327bda4d3ee8fa1944682922ac79b2e682312d8f3f71e2"><div class="ttname"><a href="SocketHTTP_8h.html#af6f90bb536a5cd085f4327bda4d3ee8fa1944682922ac79b2e682312d8f3f71e2">HTTP_METHOD_POST</a></div><div class="ttdeci">@ HTTP_METHOD_POST</div><div class="ttdoc">RFC 9110 Section 9.3.3.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTP_8h_source.html#l00136">SocketHTTP.h:136</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md86"></a>
Response Handling</h2>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <span class="keywordtype">int</span> status_code;              <span class="comment">/* HTTP status code (200, 404, etc.) */</span></div>
<div class="line">    <a class="code hl_typedef" href="SocketProxy_8h.html#af1f6772bf122ad6e2e90639b2877754f">SocketHTTP_Headers_T</a> headers; <span class="comment">/* Response headers */</span></div>
<div class="line">    <span class="keywordtype">void</span> *body;                   <span class="comment">/* Response body */</span></div>
<div class="line">    <span class="keywordtype">size_t</span> body_len;              <span class="comment">/* Body length */</span></div>
<div class="line">    <a class="code hl_enumeration" href="SocketHTTP_8h.html#ac46610efb2f138f9f5c58f9134f11a78">SocketHTTP_Version</a> version;   <span class="comment">/* Protocol version used */</span></div>
<div class="line">    <a class="code hl_typedef" href="Arena_8h.html#ac1ed22b9df4eff7a3398cac608c090cc">Arena_T</a> arena;                <span class="comment">/* Internal - for cleanup */</span></div>
<div class="line">} <a class="code hl_struct" href="SocketHTTPClient_8h.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Access headers */</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *content_type = SocketHTTP_Headers_get(response.<a class="code hl_variable" href="SocketHTTPClient_8h.html#a8b459516887245f8e4b77f8d8517ede1">headers</a>, <span class="stringliteral">&quot;Content-Type&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Always free response when done */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a>(&amp;response);</div>
<div class="ttc" id="aArena_8h_html_ac1ed22b9df4eff7a3398cac608c090cc"><div class="ttname"><a href="Arena_8h.html#ac1ed22b9df4eff7a3398cac608c090cc">Arena_T</a></div><div class="ttdeci">struct Arena_T * Arena_T</div><div class="ttdef"><b>Definition</b> <a href="Arena_8h_source.html#l00038">Arena.h:38</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a8b459516887245f8e4b77f8d8517ede1"><div class="ttname"><a href="SocketHTTPClient_8h.html#a8b459516887245f8e4b77f8d8517ede1">SocketHTTPClient_Response::headers</a></div><div class="ttdeci">SocketHTTP_Headers_T headers</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00395">SocketHTTPClient.h:395</a></div></div>
<div class="ttc" id="aSocketHTTP_8h_html_ac46610efb2f138f9f5c58f9134f11a78"><div class="ttname"><a href="SocketHTTP_8h.html#ac46610efb2f138f9f5c58f9134f11a78">SocketHTTP_Version</a></div><div class="ttdeci">SocketHTTP_Version</div><div class="ttdoc">HTTP protocol versions.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTP_8h_source.html#l00096">SocketHTTP.h:97</a></div></div>
<div class="ttc" id="aSocketProxy_8h_html_af1f6772bf122ad6e2e90639b2877754f"><div class="ttname"><a href="SocketProxy_8h.html#af1f6772bf122ad6e2e90639b2877754f">SocketHTTP_Headers_T</a></div><div class="ttdeci">struct SocketHTTP_Headers * SocketHTTP_Headers_T</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00095">SocketProxy.h:95</a></div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md88"></a>
Authentication</h1>
<p>The client supports three authentication schemes. All authentication is handled automatically - the client will retry requests when receiving 401 responses.</p>
<h2><a class="anchor" id="autotoc_md89"></a>
Supported Authentication Types</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">RFC   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Use Case    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>HTTP_AUTH_BASIC</code>   </td><td class="markdownTableBodyNone">RFC 7617   </td><td class="markdownTableBodyNone">Base64 encoded credentials   </td><td class="markdownTableBodyNone">Simple APIs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>HTTP_AUTH_DIGEST</code>   </td><td class="markdownTableBodyNone">RFC 7616   </td><td class="markdownTableBodyNone">Challenge-response with hash   </td><td class="markdownTableBodyNone">Legacy systems    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>HTTP_AUTH_BEARER</code>   </td><td class="markdownTableBodyNone">RFC 6750   </td><td class="markdownTableBodyNone">Token-based (OAuth 2.0)   </td><td class="markdownTableBodyNone">Modern APIs   </td></tr>
</table>
<p><b>Not Supported:</b></p><ul>
<li>NTLM (Microsoft proprietary, requires DES/MD4)</li>
<li>Negotiate/SPNEGO (requires GSSAPI/Kerberos)</li>
<li>AWS Signature (use dedicated AWS SDK)</li>
</ul>
<h2><a class="anchor" id="autotoc_md90"></a>
Basic Authentication (RFC 7617)</h2>
<p>Sends <code>Authorization: Basic base64(username:password)</code> with every request.</p>
<p><b>WARNING:</b> Credentials are sent in cleartext (base64 is encoding, not encryption). Only use Basic auth over HTTPS!</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="SocketHTTPClient_8h.html#structSocketHTTPClient__Auth">SocketHTTPClient_Auth</a> auth = {0};</div>
<div class="line">auth.<a class="code hl_variable" href="SocketHTTPClient_8h.html#aea321b9aeb6d8d36babd95cd7af87d35">type</a> = <a class="code hl_enumvalue" href="SocketHTTPClient_8h.html#a720036180c834b3f4b41f437d0ce1f30a946b7e60a754342e83205964b31a77ba">HTTP_AUTH_BASIC</a>;</div>
<div class="line">auth.<a class="code hl_variable" href="SocketHTTPClient_8h.html#aebecaec836c2d21aeb36c83c6a037b58">username</a> = <span class="stringliteral">&quot;user&quot;</span>;</div>
<div class="line">auth.<a class="code hl_variable" href="SocketHTTPClient_8h.html#a709145c7dcf32bbfbdbc68da8da0842f">password</a> = <span class="stringliteral">&quot;secret&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Set as default for all requests */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a1e9410043754e2ad4dbaa3572c595547">SocketHTTPClient_set_auth</a>(client, &amp;auth);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Or per-request */</span></div>
<div class="line"><a class="code hl_typedef" href="SocketHTTPClient_8h.html#a265c0209bd77c39f219d72c3956a8818">SocketHTTPClient_Request_T</a> req = <a class="code hl_function" href="SocketHTTPClient_8h.html#a46c9c2ab8d3334dd0ad1359d2bb93102">SocketHTTPClient_Request_new</a>(</div>
<div class="line">    client, <a class="code hl_enumvalue" href="SocketHTTP_8h.html#af6f90bb536a5cd085f4327bda4d3ee8fa90754abc55dbb76862fa50abee5af659">HTTP_METHOD_GET</a>, <span class="stringliteral">&quot;https://api.example.com/protected&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a4aaf34db687d93fcbaa8e13b35916b6a">SocketHTTPClient_Request_auth</a>(req, &amp;auth);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a4ba09b6d59cc2aee465749978f62ad76">SocketHTTPClient_Request_execute</a>(req, &amp;response);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a1e9410043754e2ad4dbaa3572c595547"><div class="ttname"><a href="SocketHTTPClient_8h.html#a1e9410043754e2ad4dbaa3572c595547">SocketHTTPClient_set_auth</a></div><div class="ttdeci">void SocketHTTPClient_set_auth(SocketHTTPClient_T client, const SocketHTTPClient_Auth *auth)</div><div class="ttdoc">SocketHTTPClient_set_auth - Set default authentication @client: Client @auth: Authentication credenti...</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a4aaf34db687d93fcbaa8e13b35916b6a"><div class="ttname"><a href="SocketHTTPClient_8h.html#a4aaf34db687d93fcbaa8e13b35916b6a">SocketHTTPClient_Request_auth</a></div><div class="ttdeci">void SocketHTTPClient_Request_auth(SocketHTTPClient_Request_T req, const SocketHTTPClient_Auth *auth)</div><div class="ttdoc">SocketHTTPClient_Request_auth - Set per-request authentication @req: Request @auth: Authentication cr...</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a709145c7dcf32bbfbdbc68da8da0842f"><div class="ttname"><a href="SocketHTTPClient_8h.html#a709145c7dcf32bbfbdbc68da8da0842f">SocketHTTPClient_Auth::password</a></div><div class="ttdeci">const char * password</div><div class="ttdoc">For Basic, Digest.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00291">SocketHTTPClient.h:291</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a720036180c834b3f4b41f437d0ce1f30a946b7e60a754342e83205964b31a77ba"><div class="ttname"><a href="SocketHTTPClient_8h.html#a720036180c834b3f4b41f437d0ce1f30a946b7e60a754342e83205964b31a77ba">HTTP_AUTH_BASIC</a></div><div class="ttdeci">@ HTTP_AUTH_BASIC</div><div class="ttdoc">RFC 7617 - Basic Authentication.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00279">SocketHTTPClient.h:279</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_aea321b9aeb6d8d36babd95cd7af87d35"><div class="ttname"><a href="SocketHTTPClient_8h.html#aea321b9aeb6d8d36babd95cd7af87d35">SocketHTTPClient_Auth::type</a></div><div class="ttdeci">SocketHTTPClient_AuthType type</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00289">SocketHTTPClient.h:289</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_aebecaec836c2d21aeb36c83c6a037b58"><div class="ttname"><a href="SocketHTTPClient_8h.html#aebecaec836c2d21aeb36c83c6a037b58">SocketHTTPClient_Auth::username</a></div><div class="ttdeci">const char * username</div><div class="ttdoc">For Basic, Digest.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00290">SocketHTTPClient.h:290</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_structSocketHTTPClient__Auth"><div class="ttname"><a href="SocketHTTPClient_8h.html#structSocketHTTPClient__Auth">SocketHTTPClient_Auth</a></div><div class="ttdoc">Authentication credentials.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00287">SocketHTTPClient.h:288</a></div></div>
<div class="ttc" id="aSocketHTTP_8h_html_af6f90bb536a5cd085f4327bda4d3ee8fa90754abc55dbb76862fa50abee5af659"><div class="ttname"><a href="SocketHTTP_8h.html#af6f90bb536a5cd085f4327bda4d3ee8fa90754abc55dbb76862fa50abee5af659">HTTP_METHOD_GET</a></div><div class="ttdeci">@ HTTP_METHOD_GET</div><div class="ttdoc">RFC 9110 Section 9.3.1.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTP_8h_source.html#l00134">SocketHTTP.h:134</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md91"></a>
Digest Authentication (RFC 7616)</h2>
<p>More secure than Basic - uses challenge-response with hashing. The client:</p><ol type="1">
<li>Makes initial request</li>
<li>Receives 401 with <code>WWW-Authenticate: Digest ...</code> challenge</li>
<li>Computes response using MD5 or SHA-256</li>
<li>Retries request with <code>Authorization: Digest ...</code> header</li>
</ol>
<div class="fragment"><div class="line"><a class="code hl_struct" href="SocketHTTPClient_8h.html#structSocketHTTPClient__Auth">SocketHTTPClient_Auth</a> auth = {0};</div>
<div class="line">auth.<a class="code hl_variable" href="SocketHTTPClient_8h.html#aea321b9aeb6d8d36babd95cd7af87d35">type</a> = <a class="code hl_enumvalue" href="SocketHTTPClient_8h.html#a720036180c834b3f4b41f437d0ce1f30a2de9030bd220adb7701f5cbdeadfc4a3">HTTP_AUTH_DIGEST</a>;</div>
<div class="line">auth.<a class="code hl_variable" href="SocketHTTPClient_8h.html#aebecaec836c2d21aeb36c83c6a037b58">username</a> = <span class="stringliteral">&quot;user&quot;</span>;</div>
<div class="line">auth.<a class="code hl_variable" href="SocketHTTPClient_8h.html#a709145c7dcf32bbfbdbc68da8da0842f">password</a> = <span class="stringliteral">&quot;secret&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Digest auth handles 401 challenges automatically */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a1e9410043754e2ad4dbaa3572c595547">SocketHTTPClient_set_auth</a>(client, &amp;auth);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#afef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, <span class="stringliteral">&quot;https://api.example.com/data&quot;</span>, &amp;response);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a720036180c834b3f4b41f437d0ce1f30a2de9030bd220adb7701f5cbdeadfc4a3"><div class="ttname"><a href="SocketHTTPClient_8h.html#a720036180c834b3f4b41f437d0ce1f30a2de9030bd220adb7701f5cbdeadfc4a3">HTTP_AUTH_DIGEST</a></div><div class="ttdeci">@ HTTP_AUTH_DIGEST</div><div class="ttdoc">RFC 7616 - Digest Access Authentication.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00280">SocketHTTPClient.h:280</a></div></div>
</div><!-- fragment --><p><b>Supported Features:</b></p><ul>
<li>MD5 and SHA-256 algorithms</li>
<li><code>qop=auth</code> (authentication quality of protection)</li>
<li>Stale nonce handling (automatic retry on expired nonce)</li>
</ul>
<p><b>Limitations:</b></p><ul>
<li><code>qop=auth-int</code> (integrity protection) is NOT supported</li>
<li>Session-based algorithms (<code>MD5-sess</code>, <code>SHA-256-sess</code>) are NOT supported</li>
</ul>
<h2><a class="anchor" id="autotoc_md92"></a>
Bearer Token (RFC 6750)</h2>
<p>For OAuth 2.0 and JWT-based authentication:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="SocketHTTPClient_8h.html#structSocketHTTPClient__Auth">SocketHTTPClient_Auth</a> auth = {0};</div>
<div class="line">auth.<a class="code hl_variable" href="SocketHTTPClient_8h.html#aea321b9aeb6d8d36babd95cd7af87d35">type</a> = <a class="code hl_enumvalue" href="SocketHTTPClient_8h.html#a720036180c834b3f4b41f437d0ce1f30acda827d72fd9c0a84535434c81558c96">HTTP_AUTH_BEARER</a>;</div>
<div class="line">auth.<a class="code hl_variable" href="SocketHTTPClient_8h.html#a75371d88c2cb09feb95620c237b37882">token</a> = <span class="stringliteral">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a1e9410043754e2ad4dbaa3572c595547">SocketHTTPClient_set_auth</a>(client, &amp;auth);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a720036180c834b3f4b41f437d0ce1f30acda827d72fd9c0a84535434c81558c96"><div class="ttname"><a href="SocketHTTPClient_8h.html#a720036180c834b3f4b41f437d0ce1f30acda827d72fd9c0a84535434c81558c96">HTTP_AUTH_BEARER</a></div><div class="ttdeci">@ HTTP_AUTH_BEARER</div><div class="ttdoc">RFC 6750 - Bearer Token (OAuth 2.0)</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00282">SocketHTTPClient.h:281</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a75371d88c2cb09feb95620c237b37882"><div class="ttname"><a href="SocketHTTPClient_8h.html#a75371d88c2cb09feb95620c237b37882">SocketHTTPClient_Auth::token</a></div><div class="ttdeci">const char * token</div><div class="ttdoc">For Bearer.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00292">SocketHTTPClient.h:292</a></div></div>
</div><!-- fragment --><p>Sends <code>Authorization: Bearer &lt;token&gt;</code> with every request.</p>
<p><b>Note:</b> The application is responsible for:</p><ul>
<li>Obtaining tokens (OAuth flows, API key management)</li>
<li>Refreshing expired tokens</li>
<li>Handling token revocation</li>
</ul>
<h2><a class="anchor" id="autotoc_md93"></a>
Credential Security</h2>
<p>Credentials are securely cleared from memory when:</p><ul>
<li>Setting new authentication (old credentials cleared)</li>
<li>Freeing the client (<code><a class="el" href="SocketHTTPClient_8h.html#a01d6c9bebdcda63949ba9af698f8e7e5" title="SocketHTTPClient_free - Free client and all resources @client: Pointer to client (set to NULL)">SocketHTTPClient_free()</a></code>)</li>
<li>After generating authorization headers</li>
</ul>
<p>The library uses <code><a class="el" href="SocketCrypto_8h.html#a00f94677d393f24e0b0c549be7bbcdf2" title="SocketCrypto_secure_clear - Securely clear sensitive data @ptr: Buffer to clear @len: Length of buffe...">SocketCrypto_secure_clear()</a></code> which prevents compiler optimization from removing the clearing operation.</p>
<h2><a class="anchor" id="autotoc_md94"></a>
Automatic 401 Retry</h2>
<p>The client automatically handles 401 responses:</p>
<ol type="1">
<li><b>Basic Auth:</b> If credentials weren't sent, retries once</li>
<li><b>Digest Auth:</b> Computes response from challenge, retries</li>
<li><b>Stale Nonce:</b> If server indicates <code>stale=true</code>, retries with new nonce</li>
<li><b>Max Retries:</b> 2 retries to prevent infinite loops</li>
</ol>
<p>After max retries, the 401 response is returned to the application.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md96"></a>
Cookie Handling</h1>
<p>The client includes a cookie jar (RFC 6265):</p>
<div class="fragment"><div class="line"><span class="comment">/* Create cookie jar */</span></div>
<div class="line"><a class="code hl_typedef" href="SocketHTTPClient_8h.html#a118e7e43ad387b22241607355dbdec9f">SocketHTTPClient_CookieJar_T</a> jar = <a class="code hl_function" href="SocketHTTPClient_8h.html#a7f6bd73797f507766f9edc1242b9772e">SocketHTTPClient_CookieJar_new</a>(NULL);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Associate with client */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a07b465d99995da22fc317dc170d09787">SocketHTTPClient_set_cookie_jar</a>(client, jar);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Cookies are automatically managed:</span></div>
<div class="line"><span class="comment"> * - Set-Cookie headers populate the jar</span></div>
<div class="line"><span class="comment"> * - Matching cookies sent with requests</span></div>
<div class="line"><span class="comment"> * - Domain/path/expiry honored */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Manual cookie operations */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#ae276f63daea601b662eae51e1973f3e5">SocketHTTPClient_CookieJar_set</a>(jar, <span class="stringliteral">&quot;example.com&quot;</span>, <span class="stringliteral">&quot;/&quot;</span>, <span class="stringliteral">&quot;session&quot;</span>, <span class="stringliteral">&quot;abc123&quot;</span>);</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *value = <a class="code hl_function" href="SocketHTTPClient_8h.html#a79838faf1567b0b9946b95b946de4392">SocketHTTPClient_CookieJar_get</a>(jar, <span class="stringliteral">&quot;example.com&quot;</span>, <span class="stringliteral">&quot;/&quot;</span>, <span class="stringliteral">&quot;session&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Persistence */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a4f086bf1231cc24fee20d8b0461fec05">SocketHTTPClient_CookieJar_save</a>(jar, <span class="stringliteral">&quot;/path/to/cookies.txt&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a0804b639cfe122234e22b14498f2af13">SocketHTTPClient_CookieJar_load</a>(jar, <span class="stringliteral">&quot;/path/to/cookies.txt&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a628b803f0ccfdc41d8425bf1c1064d7e">SocketHTTPClient_CookieJar_free</a>(&amp;jar);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a07b465d99995da22fc317dc170d09787"><div class="ttname"><a href="SocketHTTPClient_8h.html#a07b465d99995da22fc317dc170d09787">SocketHTTPClient_set_cookie_jar</a></div><div class="ttdeci">void SocketHTTPClient_set_cookie_jar(SocketHTTPClient_T client, SocketHTTPClient_CookieJar_T jar)</div><div class="ttdoc">SocketHTTPClient_set_cookie_jar - Associate jar with client @client: Client @jar: Cookie jar (NULL to...</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a0804b639cfe122234e22b14498f2af13"><div class="ttname"><a href="SocketHTTPClient_8h.html#a0804b639cfe122234e22b14498f2af13">SocketHTTPClient_CookieJar_load</a></div><div class="ttdeci">int SocketHTTPClient_CookieJar_load(SocketHTTPClient_CookieJar_T jar, const char *filename)</div><div class="ttdoc">SocketHTTPClient_CookieJar_load - Load cookies from file @jar: Cookie jar @filename: File path.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a118e7e43ad387b22241607355dbdec9f"><div class="ttname"><a href="SocketHTTPClient_8h.html#a118e7e43ad387b22241607355dbdec9f">SocketHTTPClient_CookieJar_T</a></div><div class="ttdeci">struct SocketHTTPClient_CookieJar * SocketHTTPClient_CookieJar_T</div><div class="ttdoc">Cookie jar.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00383">SocketHTTPClient.h:383</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a4f086bf1231cc24fee20d8b0461fec05"><div class="ttname"><a href="SocketHTTPClient_8h.html#a4f086bf1231cc24fee20d8b0461fec05">SocketHTTPClient_CookieJar_save</a></div><div class="ttdeci">int SocketHTTPClient_CookieJar_save(SocketHTTPClient_CookieJar_T jar, const char *filename)</div><div class="ttdoc">SocketHTTPClient_CookieJar_save - Save cookies to file @jar: Cookie jar @filename: File path.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a628b803f0ccfdc41d8425bf1c1064d7e"><div class="ttname"><a href="SocketHTTPClient_8h.html#a628b803f0ccfdc41d8425bf1c1064d7e">SocketHTTPClient_CookieJar_free</a></div><div class="ttdeci">void SocketHTTPClient_CookieJar_free(SocketHTTPClient_CookieJar_T *jar)</div><div class="ttdoc">SocketHTTPClient_CookieJar_free - Free cookie jar @jar: Pointer to jar (set to NULL)</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a79838faf1567b0b9946b95b946de4392"><div class="ttname"><a href="SocketHTTPClient_8h.html#a79838faf1567b0b9946b95b946de4392">SocketHTTPClient_CookieJar_get</a></div><div class="ttdeci">const SocketHTTPClient_Cookie * SocketHTTPClient_CookieJar_get(SocketHTTPClient_CookieJar_T jar, const char *domain, const char *path, const char *name)</div><div class="ttdoc">SocketHTTPClient_CookieJar_clear - Clear all cookies @jar: Cookie jar.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a7f6bd73797f507766f9edc1242b9772e"><div class="ttname"><a href="SocketHTTPClient_8h.html#a7f6bd73797f507766f9edc1242b9772e">SocketHTTPClient_CookieJar_new</a></div><div class="ttdeci">SocketHTTPClient_CookieJar_T SocketHTTPClient_CookieJar_new(void)</div><div class="ttdoc">SocketHTTPClient_CookieJar_new - Create cookie jar.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_ae276f63daea601b662eae51e1973f3e5"><div class="ttname"><a href="SocketHTTPClient_8h.html#ae276f63daea601b662eae51e1973f3e5">SocketHTTPClient_CookieJar_set</a></div><div class="ttdeci">int SocketHTTPClient_CookieJar_set(SocketHTTPClient_CookieJar_T jar, const SocketHTTPClient_Cookie *cookie)</div><div class="ttdoc">SocketHTTPClient_CookieJar_set - Set cookie @jar: Cookie jar @cookie: Cookie to set.</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md98"></a>
HTTP/2 Features</h1>
<p>When connecting to an HTTPS endpoint, the client automatically negotiates HTTP/2 via ALPN if the server supports it.</p>
<h2><a class="anchor" id="autotoc_md99"></a>
Flow Control Security Enhancements</h2>
<p>Recent updates strengthen HTTP/2 flow control against attacks (RFC 9113 5.2, 6.5.2):</p>
<ul>
<li><b>Overflow/Underflow Protection</b>: Window updates use 64-bit checks to prevent exceeding 2^31-1. Adjustments for <code>SETTINGS_INITIAL_WINDOW_SIZE</code> (signed delta) validate against negative values or overflows; invalid cases trigger <code>FLOW_CONTROL_ERROR</code> and connection closure.</li>
<li><b>Validation</b>: Zero increments rejected as <code>PROTOCOL_ERROR</code>. Consumption clamps to prevent negative windows; queries return safe &gt;=0 values.</li>
<li><b>Mitigations</b>: Reasonable initials (streams: 65KB, connection: 1MB) limit DoS blast radius. Errors logged + metricated (e.g., <code>SOCKET_CTR_HTTP2_FLOW_OVERFLOW</code>) for monitoring.</li>
<li><b>Best Practices</b>: Pair with pool rate limits; monitor metrics for anomalies. See <code>SocketHTTP2-flow.c</code> and <a href="SECURITY.md#http2-security-rfc-9113" target="_blank">security.md</a> for details.</li>
</ul>
<p>This hardening prevents exhaustion DoS, invalid state manipulation, and UB from malformed frames/SETTINGS.</p>
<h2><a class="anchor" id="autotoc_md100"></a>
Checking Protocol Version</h2>
<div class="fragment"><div class="line"><a class="code hl_struct" href="SocketHTTPClient_8h.html#structSocketHTTPClient__Response">SocketHTTPClient_Response</a> response;</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#afef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, <span class="stringliteral">&quot;https://example.com&quot;</span>, &amp;response);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (response.<a class="code hl_variable" href="SocketHTTPClient_8h.html#accda45708658a8ada478121524f85e5e">version</a> == HTTP_VERSION_2_0) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Using HTTP/2\n&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_accda45708658a8ada478121524f85e5e"><div class="ttname"><a href="SocketHTTPClient_8h.html#accda45708658a8ada478121524f85e5e">SocketHTTPClient_Response::version</a></div><div class="ttdeci">SocketHTTP_Version version</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00398">SocketHTTPClient.h:398</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md101"></a>
HTTP/2 Benefits</h2>
<ul>
<li><b>Multiplexing</b>: Multiple requests over single connection</li>
<li><b>Header Compression</b>: HPACK reduces overhead</li>
<li><b>Binary <a class="el" href="namespace_3globalScope_4.html#protocolProtocol-p" title="Socket_new - Create a new socket @domain: Address family (AF_INET, AF_INET6, etc.) @type: Socket type...">Protocol</a></b>: More efficient parsing</li>
<li><b>Server Push</b>: Server can push resources (server-side)</li>
</ul>
<h2><a class="anchor" id="autotoc_md102"></a>
HTTP/2 Cleartext (h2c)</h2>
<p>For non-TLS HTTP/2 (rare):</p>
<div class="fragment"><div class="line">config.<a class="code hl_variable" href="SocketHTTPClient_8h.html#a9a480ef82e914f17714c7c57d12f88af">allow_http2_cleartext</a> = 1;  <span class="comment">/* Enable h2c upgrade */</span></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a9a480ef82e914f17714c7c57d12f88af"><div class="ttname"><a href="SocketHTTPClient_8h.html#a9a480ef82e914f17714c7c57d12f88af">SocketHTTPClient_Config::allow_http2_cleartext</a></div><div class="ttdeci">int allow_http2_cleartext</div><div class="ttdoc">Allow h2c upgrade (default: 0)</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPClient_8h_source.html#l00313">SocketHTTPClient.h:313</a></div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md104"></a>
HTTP Server API</h1>
<p>The <code>SocketHTTPServer_T</code> provides an event-driven HTTP server:</p>
<h2><a class="anchor" id="autotoc_md105"></a>
Creating a Server</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketHTTPServer_8h.html">http/SocketHTTPServer.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="SocketHTTPServer_8h.html#structSocketHTTPServer__Config">SocketHTTPServer_Config</a> config;</div>
<div class="line"><a class="code hl_function" href="SocketHTTPServer_8h.html#a08bbe8e6a3560817cd898a51622bc6ce">SocketHTTPServer_config_defaults</a>(&amp;config);</div>
<div class="line">config.<a class="code hl_variable" href="SocketHTTPServer_8h.html#aaa846da9282ae7cc08293d9e3ae100c5">port</a> = 8080;</div>
<div class="line">config.<a class="code hl_variable" href="SocketHTTPServer_8h.html#ab0bf8c280cce766a64efd9064f93bef2">bind_address</a> = <span class="stringliteral">&quot;0.0.0.0&quot;</span>;</div>
<div class="line">config.<a class="code hl_variable" href="SocketHTTPServer_8h.html#aba7a435867737c5dda694445481fbc7c">max_connections</a> = 1000;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="SocketHTTPServer_8h.html#ad59859e8ae07bfb95f5807590dd034f4">SocketHTTPServer_T</a> server = <a class="code hl_function" href="SocketHTTPServer_8h.html#aea4fe38f3115faefc4bbc7f28e6b7362">SocketHTTPServer_new</a>(&amp;config);</div>
<div class="ttc" id="aSocketHTTPServer_8h_html"><div class="ttname"><a href="SocketHTTPServer_8h.html">SocketHTTPServer.h</a></div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a08bbe8e6a3560817cd898a51622bc6ce"><div class="ttname"><a href="SocketHTTPServer_8h.html#a08bbe8e6a3560817cd898a51622bc6ce">SocketHTTPServer_config_defaults</a></div><div class="ttdeci">void SocketHTTPServer_config_defaults(SocketHTTPServer_Config *config)</div><div class="ttdoc">SocketHTTPServer_config_defaults - Initialize config with defaults @config: Configuration structure.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_aaa846da9282ae7cc08293d9e3ae100c5"><div class="ttname"><a href="SocketHTTPServer_8h.html#aaa846da9282ae7cc08293d9e3ae100c5">SocketHTTPServer_Config::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Listen port.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00271">SocketHTTPServer.h:271</a></div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_ab0bf8c280cce766a64efd9064f93bef2"><div class="ttname"><a href="SocketHTTPServer_8h.html#ab0bf8c280cce766a64efd9064f93bef2">SocketHTTPServer_Config::bind_address</a></div><div class="ttdeci">const char * bind_address</div><div class="ttdoc">Bind address (NULL = all interfaces)</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00272">SocketHTTPServer.h:272</a></div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_aba7a435867737c5dda694445481fbc7c"><div class="ttname"><a href="SocketHTTPServer_8h.html#aba7a435867737c5dda694445481fbc7c">SocketHTTPServer_Config::max_connections</a></div><div class="ttdeci">size_t max_connections</div><div class="ttdoc">Total max connections.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00293">SocketHTTPServer.h:293</a></div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_ad59859e8ae07bfb95f5807590dd034f4"><div class="ttname"><a href="SocketHTTPServer_8h.html#ad59859e8ae07bfb95f5807590dd034f4">SocketHTTPServer_T</a></div><div class="ttdeci">struct SocketHTTPServer * SocketHTTPServer_T</div><div class="ttdoc">HTTP server instance.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00304">SocketHTTPServer.h:304</a></div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_aea4fe38f3115faefc4bbc7f28e6b7362"><div class="ttname"><a href="SocketHTTPServer_8h.html#aea4fe38f3115faefc4bbc7f28e6b7362">SocketHTTPServer_new</a></div><div class="ttdeci">SocketHTTPServer_T SocketHTTPServer_new(const SocketHTTPServer_Config *config)</div><div class="ttdoc">SocketHTTPServer_new - Create HTTP server @config: Configuration.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_structSocketHTTPServer__Config"><div class="ttname"><a href="SocketHTTPServer_8h.html#structSocketHTTPServer__Config">SocketHTTPServer_Config</a></div><div class="ttdoc">HTTP server configuration.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00268">SocketHTTPServer.h:269</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md106"></a>
Request Handler</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_handler(<a class="code hl_typedef" href="SocketHTTPServer_8h.html#a071a3760545fbd5fca4c2df224af0fad">SocketHTTPServer_Request_T</a> req, <span class="keywordtype">void</span> *userdata) {</div>
<div class="line">    <span class="comment">/* Get request details */</span></div>
<div class="line">    <a class="code hl_enumeration" href="SocketHTTP_8h.html#af6f90bb536a5cd085f4327bda4d3ee8f">SocketHTTP_Method</a> method = <a class="code hl_function" href="SocketHTTPServer_8h.html#a62a61206448cffe1710070a6c64b554d">SocketHTTPServer_Request_method</a>(req);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *path = <a class="code hl_function" href="SocketHTTPServer_8h.html#a62b0e10b9c135a08852e56eb1eae8ac4">SocketHTTPServer_Request_path</a>(req);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *query = <a class="code hl_function" href="SocketHTTPServer_8h.html#a7bb246b4e39b4d74d3821201b6f72456">SocketHTTPServer_Request_query</a>(req);</div>
<div class="line">    <a class="code hl_typedef" href="SocketProxy_8h.html#af1f6772bf122ad6e2e90639b2877754f">SocketHTTP_Headers_T</a> headers = <a class="code hl_function" href="SocketHTTPServer_8h.html#a51f26503d221c39a5e867b5d4c683ae7">SocketHTTPServer_Request_headers</a>(req);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> *body = <a class="code hl_function" href="SocketHTTPServer_8h.html#a7e95ae3464cb9cf8c0d0b172db13456e">SocketHTTPServer_Request_body</a>(req);</div>
<div class="line">    <span class="keywordtype">size_t</span> body_len = <a class="code hl_function" href="SocketHTTPServer_8h.html#a5ac308a85217f94c0fc5ced8525b55e5">SocketHTTPServer_Request_body_len</a>(req);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Set response */</span></div>
<div class="line">    SocketHTTPServer_Request_status(req, 200);</div>
<div class="line">    SocketHTTPServer_Request_header(req, <span class="stringliteral">&quot;Content-Type&quot;</span>, <span class="stringliteral">&quot;text/html&quot;</span>);</div>
<div class="line">    SocketHTTPServer_Request_body_string(req, <span class="stringliteral">&quot;&lt;h1&gt;Hello!&lt;/h1&gt;&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Finish response */</span></div>
<div class="line">    SocketHTTPServer_Request_finish(req);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="SocketHTTPServer_8h.html#aaf56db2565e6fdebcebf0bb7df24b959">SocketHTTPServer_set_handler</a>(server, my_handler, NULL);</div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a071a3760545fbd5fca4c2df224af0fad"><div class="ttname"><a href="SocketHTTPServer_8h.html#a071a3760545fbd5fca4c2df224af0fad">SocketHTTPServer_Request_T</a></div><div class="ttdeci">struct SocketHTTPServer_Request * SocketHTTPServer_Request_T</div><div class="ttdoc">Server request context.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00307">SocketHTTPServer.h:307</a></div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a51f26503d221c39a5e867b5d4c683ae7"><div class="ttname"><a href="SocketHTTPServer_8h.html#a51f26503d221c39a5e867b5d4c683ae7">SocketHTTPServer_Request_headers</a></div><div class="ttdeci">SocketHTTP_Headers_T SocketHTTPServer_Request_headers(SocketHTTPServer_Request_T req)</div><div class="ttdoc">SocketHTTPServer_Request_headers - Get request headers.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a5ac308a85217f94c0fc5ced8525b55e5"><div class="ttname"><a href="SocketHTTPServer_8h.html#a5ac308a85217f94c0fc5ced8525b55e5">SocketHTTPServer_Request_body_len</a></div><div class="ttdeci">size_t SocketHTTPServer_Request_body_len(SocketHTTPServer_Request_T req)</div><div class="ttdoc">SocketHTTPServer_Request_body_len - Get request body length.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a62a61206448cffe1710070a6c64b554d"><div class="ttname"><a href="SocketHTTPServer_8h.html#a62a61206448cffe1710070a6c64b554d">SocketHTTPServer_Request_method</a></div><div class="ttdeci">SocketHTTP_Method SocketHTTPServer_Request_method(SocketHTTPServer_Request_T req)</div><div class="ttdoc">SocketHTTPServer_Request_method - Get request method.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a62b0e10b9c135a08852e56eb1eae8ac4"><div class="ttname"><a href="SocketHTTPServer_8h.html#a62b0e10b9c135a08852e56eb1eae8ac4">SocketHTTPServer_Request_path</a></div><div class="ttdeci">const char * SocketHTTPServer_Request_path(SocketHTTPServer_Request_T req)</div><div class="ttdoc">SocketHTTPServer_Request_path - Get request path.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a7bb246b4e39b4d74d3821201b6f72456"><div class="ttname"><a href="SocketHTTPServer_8h.html#a7bb246b4e39b4d74d3821201b6f72456">SocketHTTPServer_Request_query</a></div><div class="ttdeci">const char * SocketHTTPServer_Request_query(SocketHTTPServer_Request_T req)</div><div class="ttdoc">SocketHTTPServer_Request_query - Get query string.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a7e95ae3464cb9cf8c0d0b172db13456e"><div class="ttname"><a href="SocketHTTPServer_8h.html#a7e95ae3464cb9cf8c0d0b172db13456e">SocketHTTPServer_Request_body</a></div><div class="ttdeci">const void * SocketHTTPServer_Request_body(SocketHTTPServer_Request_T req)</div><div class="ttdoc">SocketHTTPServer_Request_body - Get request body.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_aaf56db2565e6fdebcebf0bb7df24b959"><div class="ttname"><a href="SocketHTTPServer_8h.html#aaf56db2565e6fdebcebf0bb7df24b959">SocketHTTPServer_set_handler</a></div><div class="ttdeci">void SocketHTTPServer_set_handler(SocketHTTPServer_T server, SocketHTTPServer_Handler handler, void *userdata)</div><div class="ttdoc">SocketHTTPServer_set_handler - Set request handler @server: Server instance @handler: Handler callbac...</div></div>
<div class="ttc" id="aSocketHTTP_8h_html_af6f90bb536a5cd085f4327bda4d3ee8f"><div class="ttname"><a href="SocketHTTP_8h.html#af6f90bb536a5cd085f4327bda4d3ee8f">SocketHTTP_Method</a></div><div class="ttdeci">SocketHTTP_Method</div><div class="ttdoc">HTTP request methods.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTP_8h_source.html#l00132">SocketHTTP.h:133</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md107"></a>
Running the Server</h2>
<div class="fragment"><div class="line"><span class="comment">/* Start listening */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPServer_8h.html#afa06caca93c0fac3e52f7749abe03be9">SocketHTTPServer_start</a>(server);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Event loop */</span></div>
<div class="line"><span class="keywordflow">while</span> (<a class="code hl_variable" href="http__server_8c.html#af1f449cc09f8d36befcce07bc38c29c0">running</a>) {</div>
<div class="line">    <a class="code hl_function" href="SocketHTTPServer_8h.html#ab2ad4e6a795964f1edabf14a71b83985">SocketHTTPServer_process</a>(server, 1000);  <span class="comment">/* 1 second timeout */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Shutdown */</span></div>
<div class="line"><a class="code hl_function" href="SocketHTTPServer_8h.html#af332d06f999890e277dc83777d669f00">SocketHTTPServer_stop</a>(server);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPServer_8h.html#acf5856e5b1728e44bbb68ef2e4637318">SocketHTTPServer_free</a>(&amp;server);</div>
<div class="ttc" id="aSocketHTTPServer_8h_html_ab2ad4e6a795964f1edabf14a71b83985"><div class="ttname"><a href="SocketHTTPServer_8h.html#ab2ad4e6a795964f1edabf14a71b83985">SocketHTTPServer_process</a></div><div class="ttdeci">int SocketHTTPServer_process(SocketHTTPServer_T server, int timeout_ms)</div><div class="ttdoc">SocketHTTPServer_process - Process events @server: Server instance @timeout_ms: Poll timeout in milli...</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_acf5856e5b1728e44bbb68ef2e4637318"><div class="ttname"><a href="SocketHTTPServer_8h.html#acf5856e5b1728e44bbb68ef2e4637318">SocketHTTPServer_free</a></div><div class="ttdeci">void SocketHTTPServer_free(SocketHTTPServer_T *server)</div><div class="ttdoc">SocketHTTPServer_free - Free server and resources @server: Pointer to server (set to NULL)</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_af332d06f999890e277dc83777d669f00"><div class="ttname"><a href="SocketHTTPServer_8h.html#af332d06f999890e277dc83777d669f00">SocketHTTPServer_stop</a></div><div class="ttdeci">void SocketHTTPServer_stop(SocketHTTPServer_T server)</div><div class="ttdoc">SocketHTTPServer_stop - Stop server @server: Server instance.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_afa06caca93c0fac3e52f7749abe03be9"><div class="ttname"><a href="SocketHTTPServer_8h.html#afa06caca93c0fac3e52f7749abe03be9">SocketHTTPServer_start</a></div><div class="ttdeci">int SocketHTTPServer_start(SocketHTTPServer_T server)</div><div class="ttdoc">SocketHTTPServer_start - Start listening @server: Server instance.</div></div>
<div class="ttc" id="ahttp__server_8c_html_af1f449cc09f8d36befcce07bc38c29c0"><div class="ttname"><a href="http__server_8c.html#af1f449cc09f8d36befcce07bc38c29c0">running</a></div><div class="ttdeci">static volatile int running</div><div class="ttdoc">http_server.c - Basic HTTP Server Example</div><div class="ttdef"><b>Definition</b> <a href="http__server_8c_source.html#l00032">http_server.c:32</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md108"></a>
WebSocket Upgrade</h2>
<p>The server can detect and handle WebSocket upgrades:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_handler(<a class="code hl_typedef" href="SocketHTTPServer_8h.html#a071a3760545fbd5fca4c2df224af0fad">SocketHTTPServer_Request_T</a> req, <span class="keywordtype">void</span> *userdata) {</div>
<div class="line">    <span class="keywordflow">if</span> (SocketHTTPServer_Request_is_websocket(req)) {</div>
<div class="line">        <a class="code hl_typedef" href="SocketHTTPServer_8h.html#a62eac457c36851d5e4a184e1a5602555">SocketWS_T</a> ws = SocketHTTPServer_Request_upgrade_websocket(req);</div>
<div class="line">        <span class="keywordflow">if</span> (ws) {</div>
<div class="line">            <span class="comment">/* Handle WebSocket - see WEBSOCKET.md */</span></div>
<div class="line">            <span class="comment">/* Don&#39;t call finish() after upgrade */</span></div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Normal HTTP handling */</span></div>
<div class="line">    SocketHTTPServer_Request_finish(req);</div>
<div class="line">}</div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a62eac457c36851d5e4a184e1a5602555"><div class="ttname"><a href="SocketHTTPServer_8h.html#a62eac457c36851d5e4a184e1a5602555">SocketWS_T</a></div><div class="ttdeci">struct SocketWS * SocketWS_T</div><div class="ttdoc">SocketHTTPServer.h - HTTP Server API.</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00059">SocketHTTPServer.h:59</a></div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md110"></a>
Error Handling</h1>
<h2><a class="anchor" id="autotoc_md111"></a>
Client Exceptions</h2>
<div class="fragment"><div class="line"><a class="code hl_define" href="Except_8h.html#ad2746371528bdf15c3910b7bf217dac0">TRY</a> {</div>
<div class="line">    <a class="code hl_function" href="SocketHTTPClient_8h.html#afef425814e66932f7cf1f36e9356b70e">SocketHTTPClient_get</a>(client, url, &amp;response);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="SocketHTTPClient_8h.html#a50039c8c595271d7d51b28ed5a4e7196">SocketHTTPClient_DNSFailed</a>) {</div>
<div class="line">    <span class="comment">/* DNS resolution failed */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="SocketHTTPClient_8h.html#a83bda6e77bc5fb165e4e7fead483094b">SocketHTTPClient_ConnectFailed</a>) {</div>
<div class="line">    <span class="comment">/* Connection to server failed */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="SocketHTTPClient_8h.html#ac109f9bf9ba67f2f56db130172b3dd94">SocketHTTPClient_TLSFailed</a>) {</div>
<div class="line">    <span class="comment">/* TLS/SSL error */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="SocketHTTPClient_8h.html#aa0847dd6efa2f627e07173f29b29c8ae">SocketHTTPClient_Timeout</a>) {</div>
<div class="line">    <span class="comment">/* Request timed out */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="SocketHTTPClient_8h.html#afd7d2611128ad32cc65cb256403c671f">SocketHTTPClient_TooManyRedirects</a>) {</div>
<div class="line">    <span class="comment">/* Redirect limit exceeded */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="SocketHTTPClient_8h.html#a24ffae352f53c9580d861d3590b61e2a">SocketHTTPClient_ProtocolError</a>) {</div>
<div class="line">    <span class="comment">/* HTTP parse error */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="SocketHTTPClient_8h.html#a4ed14f04119b1dec3cb25c432b7a383d">SocketHTTPClient_ResponseTooLarge</a>) {</div>
<div class="line">    <span class="comment">/* Response exceeded max_response_size */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#a0e2a75478cd44f1666a6aca626c5c50b">FINALLY</a> {</div>
<div class="line">    <a class="code hl_function" href="SocketHTTPClient_8h.html#a826bca53483c23de2c8b03d456010149">SocketHTTPClient_Response_free</a>(&amp;response);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="ttc" id="aExcept_8h_html_a0e2a75478cd44f1666a6aca626c5c50b"><div class="ttname"><a href="Except_8h.html#a0e2a75478cd44f1666a6aca626c5c50b">FINALLY</a></div><div class="ttdeci">#define FINALLY</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l00132">Except.h:132</a></div></div>
<div class="ttc" id="aExcept_8h_html_ab5e72fc2bd41014c75e0ace4feabfe8e"><div class="ttname"><a href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a></div><div class="ttdeci">#define EXCEPT(e)</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l00118">Except.h:118</a></div></div>
<div class="ttc" id="aExcept_8h_html_ad2746371528bdf15c3910b7bf217dac0"><div class="ttname"><a href="Except_8h.html#ad2746371528bdf15c3910b7bf217dac0">TRY</a></div><div class="ttdeci">#define TRY</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l00103">Except.h:103</a></div></div>
<div class="ttc" id="aExcept_8h_html_ae6628ac788ad213363b89dba9868420b"><div class="ttname"><a href="Except_8h.html#ae6628ac788ad213363b89dba9868420b">END_TRY</a></div><div class="ttdeci">#define END_TRY</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l00139">Except.h:139</a></div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a24ffae352f53c9580d861d3590b61e2a"><div class="ttname"><a href="SocketHTTPClient_8h.html#a24ffae352f53c9580d861d3590b61e2a">SocketHTTPClient_ProtocolError</a></div><div class="ttdeci">const Except_T SocketHTTPClient_ProtocolError</div><div class="ttdoc">SocketHTTPClient_ProtocolError - HTTP protocol error.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a4ed14f04119b1dec3cb25c432b7a383d"><div class="ttname"><a href="SocketHTTPClient_8h.html#a4ed14f04119b1dec3cb25c432b7a383d">SocketHTTPClient_ResponseTooLarge</a></div><div class="ttdeci">const Except_T SocketHTTPClient_ResponseTooLarge</div><div class="ttdoc">SocketHTTPClient_ResponseTooLarge - Response body exceeds limit.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a50039c8c595271d7d51b28ed5a4e7196"><div class="ttname"><a href="SocketHTTPClient_8h.html#a50039c8c595271d7d51b28ed5a4e7196">SocketHTTPClient_DNSFailed</a></div><div class="ttdeci">const Except_T SocketHTTPClient_DNSFailed</div><div class="ttdoc">SocketHTTPClient_DNSFailed - DNS resolution failure.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a83bda6e77bc5fb165e4e7fead483094b"><div class="ttname"><a href="SocketHTTPClient_8h.html#a83bda6e77bc5fb165e4e7fead483094b">SocketHTTPClient_ConnectFailed</a></div><div class="ttdeci">const Except_T SocketHTTPClient_ConnectFailed</div><div class="ttdoc">SocketHTTPClient_ConnectFailed - TCP connection failure.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_aa0847dd6efa2f627e07173f29b29c8ae"><div class="ttname"><a href="SocketHTTPClient_8h.html#aa0847dd6efa2f627e07173f29b29c8ae">SocketHTTPClient_Timeout</a></div><div class="ttdeci">const Except_T SocketHTTPClient_Timeout</div><div class="ttdoc">SocketHTTPClient_Timeout - Request timeout exceeded.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_ac109f9bf9ba67f2f56db130172b3dd94"><div class="ttname"><a href="SocketHTTPClient_8h.html#ac109f9bf9ba67f2f56db130172b3dd94">SocketHTTPClient_TLSFailed</a></div><div class="ttdeci">const Except_T SocketHTTPClient_TLSFailed</div><div class="ttdoc">SocketHTTPClient_TLSFailed - TLS/SSL handshake or I/O failure.</div></div>
<div class="ttc" id="aSocketHTTPClient_8h_html_afd7d2611128ad32cc65cb256403c671f"><div class="ttname"><a href="SocketHTTPClient_8h.html#afd7d2611128ad32cc65cb256403c671f">SocketHTTPClient_TooManyRedirects</a></div><div class="ttdeci">const Except_T SocketHTTPClient_TooManyRedirects</div><div class="ttdoc">SocketHTTPClient_TooManyRedirects - Redirect limit exceeded.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md112"></a>
Server Exceptions</h2>
<div class="fragment"><div class="line"><a class="code hl_define" href="Except_8h.html#ad2746371528bdf15c3910b7bf217dac0">TRY</a> {</div>
<div class="line">    <a class="code hl_function" href="SocketHTTPServer_8h.html#afa06caca93c0fac3e52f7749abe03be9">SocketHTTPServer_start</a>(server);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="SocketHTTPServer_8h.html#ab0cf03445c053391004f6234e29812f5">SocketHTTPServer_BindFailed</a>) {</div>
<div class="line">    <span class="comment">/* Port in use or permission denied */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="SocketHTTPServer_8h.html#ab0e17c60a6e02fe69434302760371464">SocketHTTPServer_Failed</a>) {</div>
<div class="line">    <span class="comment">/* General server error */</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_define" href="Except_8h.html#ae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="ttc" id="aSocketHTTPServer_8h_html_ab0cf03445c053391004f6234e29812f5"><div class="ttname"><a href="SocketHTTPServer_8h.html#ab0cf03445c053391004f6234e29812f5">SocketHTTPServer_BindFailed</a></div><div class="ttdeci">const Except_T SocketHTTPServer_BindFailed</div><div class="ttdoc">Bind failure.</div></div>
<div class="ttc" id="aSocketHTTPServer_8h_html_ab0e17c60a6e02fe69434302760371464"><div class="ttname"><a href="SocketHTTPServer_8h.html#ab0e17c60a6e02fe69434302760371464">SocketHTTPServer_Failed</a></div><div class="ttdeci">const Except_T SocketHTTPServer_Failed</div><div class="ttdoc">General server failure.</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md114"></a>
Proxy Support</h1>
<p>The HTTP client can connect through proxies:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketProxy_8h.html">socket/SocketProxy.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Configure proxy */</span></div>
<div class="line"><a class="code hl_struct" href="SocketProxy_8h.html#structSocketProxy__Config">SocketProxy_Config</a> proxy;</div>
<div class="line"><a class="code hl_function" href="SocketProxy_8h.html#a197242786615adf218d849747bc0fd67">SocketProxy_config_defaults</a>(&amp;proxy);</div>
<div class="line">proxy.<a class="code hl_variable" href="SocketProxy_8h.html#aa04cfa88d52d6c1f889f9f936a141141">type</a> = <a class="code hl_enumvalue" href="SocketProxy_8h.html#aaa33f7bdae951cc7b53a2fb049e89132a65e12b32adeb0ad03fc8a1031423c21f">SOCKET_PROXY_SOCKS5</a>;</div>
<div class="line">proxy.<a class="code hl_variable" href="SocketProxy_8h.html#a507287d832417162da30794693e16a6e">host</a> = <span class="stringliteral">&quot;proxy.example.com&quot;</span>;</div>
<div class="line">proxy.<a class="code hl_variable" href="SocketProxy_8h.html#aff28145ee5466be9d0e12fba3e07dc97">port</a> = 1080;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Set as default proxy for client */</span></div>
<div class="line">config.proxy = &amp;proxy;</div>
<div class="line"><a class="code hl_typedef" href="SocketHTTPClient_8h.html#aba14ae9994f5645e5aa8488f905aad54">SocketHTTPClient_T</a> client = <a class="code hl_function" href="SocketHTTPClient_8h.html#a2d57db3a9a6388315f253caa099e4205">SocketHTTPClient_new</a>(&amp;config);</div>
<div class="ttc" id="aSocketProxy_8h_html"><div class="ttname"><a href="SocketProxy_8h.html">SocketProxy.h</a></div></div>
<div class="ttc" id="aSocketProxy_8h_html_a197242786615adf218d849747bc0fd67"><div class="ttname"><a href="SocketProxy_8h.html#a197242786615adf218d849747bc0fd67">SocketProxy_config_defaults</a></div><div class="ttdeci">void SocketProxy_config_defaults(SocketProxy_Config *config)</div><div class="ttdoc">SocketProxy_config_defaults - Initialize config with defaults @config: Configuration structure to ini...</div></div>
<div class="ttc" id="aSocketProxy_8h_html_a507287d832417162da30794693e16a6e"><div class="ttname"><a href="SocketProxy_8h.html#a507287d832417162da30794693e16a6e">SocketProxy_Config::host</a></div><div class="ttdeci">const char * host</div><div class="ttdoc">Proxy hostname or IP.</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00247">SocketProxy.h:247</a></div></div>
<div class="ttc" id="aSocketProxy_8h_html_aa04cfa88d52d6c1f889f9f936a141141"><div class="ttname"><a href="SocketProxy_8h.html#aa04cfa88d52d6c1f889f9f936a141141">SocketProxy_Config::type</a></div><div class="ttdeci">SocketProxyType type</div><div class="ttdoc">Proxy type.</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00244">SocketProxy.h:244</a></div></div>
<div class="ttc" id="aSocketProxy_8h_html_aaa33f7bdae951cc7b53a2fb049e89132a65e12b32adeb0ad03fc8a1031423c21f"><div class="ttname"><a href="SocketProxy_8h.html#aaa33f7bdae951cc7b53a2fb049e89132a65e12b32adeb0ad03fc8a1031423c21f">SOCKET_PROXY_SOCKS5</a></div><div class="ttdeci">@ SOCKET_PROXY_SOCKS5</div><div class="ttdoc">SOCKS5 proxy (RFC 1928)</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00174">SocketProxy.h:174</a></div></div>
<div class="ttc" id="aSocketProxy_8h_html_aff28145ee5466be9d0e12fba3e07dc97"><div class="ttname"><a href="SocketProxy_8h.html#aff28145ee5466be9d0e12fba3e07dc97">SocketProxy_Config::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Proxy port (0 = default for type)</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00248">SocketProxy.h:248</a></div></div>
<div class="ttc" id="aSocketProxy_8h_html_structSocketProxy__Config"><div class="ttname"><a href="SocketProxy_8h.html#structSocketProxy__Config">SocketProxy_Config</a></div><div class="ttdoc">SocketProxy_Config - Proxy configuration.</div><div class="ttdef"><b>Definition</b> <a href="SocketProxy_8h_source.html#l00242">SocketProxy.h:243</a></div></div>
</div><!-- fragment --><p>See <a class="el" href="proxy_guide.html">PROXY.md</a> for complete proxy documentation.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md116"></a>
Advanced Topics</h1>
<h2><a class="anchor" id="autotoc_md117"></a>
Streaming Requests</h2>
<p>For large uploads:</p>
<div class="fragment"><div class="line">ssize_t read_callback(<span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> len, <span class="keywordtype">void</span> *userdata) {</div>
<div class="line">    FILE *fp = userdata;</div>
<div class="line">    <span class="keywordflow">return</span> fread(buf, 1, len, fp);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">FILE *fp = fopen(<span class="stringliteral">&quot;large_file.bin&quot;</span>, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="SocketHTTPClient_8h.html#a8470d0864afe35f5265bda12d221f14e">SocketHTTPClient_Request_body_stream</a>(req, read_callback, fp);</div>
<div class="ttc" id="aSocketHTTPClient_8h_html_a8470d0864afe35f5265bda12d221f14e"><div class="ttname"><a href="SocketHTTPClient_8h.html#a8470d0864afe35f5265bda12d221f14e">SocketHTTPClient_Request_body_stream</a></div><div class="ttdeci">int SocketHTTPClient_Request_body_stream(SocketHTTPClient_Request_T req, ssize_t(*read_cb)(void *buf, size_t len, void *userdata), void *userdata)</div><div class="ttdoc">SocketHTTPClient_Request_body_stream - Set streaming body @req: Request @read_cb: Callback to read bo...</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md118"></a>
Custom TLS Context</h2>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="SocketTLS_8h.html#ac46f2ab9dacbb1af2d590f2974e21577">SocketTLSContext_T</a> tls = <a class="code hl_function" href="SocketTLSContext_8h.html#a7fe51da14439d768bdf72f4ed8fbb022">SocketTLSContext_new_client</a>(NULL);</div>
<div class="line"><a class="code hl_function" href="SocketTLSContext_8h.html#a71084c00bec22f65b90301188868b759">SocketTLSContext_set_verify_mode</a>(tls, SSL_VERIFY_PEER);</div>
<div class="line">SocketTLSContext_set_ca_file(tls, <span class="stringliteral">&quot;/path/to/ca-bundle.crt&quot;</span>);</div>
<div class="line"> </div>
<div class="line">config.<a class="code hl_variable" href="SocketHTTPServer_8h.html#a2bbd51b98734877f1e4dd9e0176b82b7">tls_context</a> = tls;</div>
<div class="ttc" id="aSocketHTTPServer_8h_html_a2bbd51b98734877f1e4dd9e0176b82b7"><div class="ttname"><a href="SocketHTTPServer_8h.html#a2bbd51b98734877f1e4dd9e0176b82b7">SocketHTTPServer_Config::tls_context</a></div><div class="ttdeci">SocketTLSContext_T tls_context</div><div class="ttdoc">TLS context (NULL = HTTP only)</div><div class="ttdef"><b>Definition</b> <a href="SocketHTTPServer_8h_source.html#l00276">SocketHTTPServer.h:276</a></div></div>
<div class="ttc" id="aSocketTLSContext_8h_html_a71084c00bec22f65b90301188868b759"><div class="ttname"><a href="SocketTLSContext_8h.html#a71084c00bec22f65b90301188868b759">SocketTLSContext_set_verify_mode</a></div><div class="ttdeci">void SocketTLSContext_set_verify_mode(SocketTLSContext_T ctx, TLSVerifyMode mode)</div><div class="ttdoc">SocketTLSContext_set_verify_mode - Set certificate verification policy @ctx: The TLS context instance...</div></div>
<div class="ttc" id="aSocketTLSContext_8h_html_a7fe51da14439d768bdf72f4ed8fbb022"><div class="ttname"><a href="SocketTLSContext_8h.html#a7fe51da14439d768bdf72f4ed8fbb022">SocketTLSContext_new_client</a></div><div class="ttdeci">SocketTLSContext_T SocketTLSContext_new_client(const char *ca_file)</div><div class="ttdoc">SocketTLSContext_new_client - Create client TLS context @ca_file: Optional path to CA file/directory ...</div></div>
<div class="ttc" id="aSocketTLS_8h_html_ac46f2ab9dacbb1af2d590f2974e21577"><div class="ttname"><a href="SocketTLS_8h.html#ac46f2ab9dacbb1af2d590f2974e21577">SocketTLSContext_T</a></div><div class="ttdeci">struct SocketTLSContext_T * SocketTLSContext_T</div><div class="ttdef"><b>Definition</b> <a href="SocketTLS_8h_source.html#l00110">SocketTLS.h:110</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md119"></a>
Connection Pooling Behavior</h2>
<ul>
<li>HTTP/1.1: Multiple connections per host (default: 6)</li>
<li>HTTP/2: Single connection with multiplexed streams</li>
<li>Idle connections automatically closed after <code>idle_timeout_ms</code></li>
<li>Pool cleaned on <code><a class="el" href="SocketHTTPClient_8h.html#a01d6c9bebdcda63949ba9af698f8e7e5" title="SocketHTTPClient_free - Free client and all resources @client: Pointer to client (set to NULL)">SocketHTTPClient_free()</a></code></li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md121"></a>
Thread Safety</h1>
<ul>
<li><code>SocketHTTPClient_T</code> instances are <b>NOT</b> thread-safe</li>
<li>Use one client per thread, or protect with mutex</li>
<li>Response data can be safely used from any thread after request completes</li>
<li><code>SocketHTTPServer_T</code> instances are <b>NOT</b> thread-safe</li>
<li>Use one server per thread for event loop</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md123"></a>
Performance Tips</h1>
<ol type="1">
<li><b>Reuse clients</b> - Creating clients is expensive</li>
<li><b>Use HTTP/2</b> - Better for multiple requests to same host</li>
<li><b>Enable pooling</b> - Avoid connection setup overhead</li>
<li><b>Set appropriate timeouts</b> - Prevent hung connections</li>
<li><b>Use compression</b> - Reduce bandwidth (auto-enabled)</li>
<li><b>Consider async</b> - For high concurrency scenarios</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md125"></a>
See Also</h1>
<ul>
<li><a class="el" href="websocket_guide.html">WebSocket Guide</a></li>
<li><a class="el" href="proxy_guide.html">Proxy Guide</a></li>
<li><a class="el" href="security_guide.html">Security Guide</a></li>
<li><a class="el" href="SocketHTTPClient_8h.html">SocketHTTPClient.h</a></li>
<li><a class="el" href="SocketHTTPServer_8h.html">SocketHTTPServer.h</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<hr class="footer"/>
<footer class="footer">
  <div style="max-width: 960px; margin: 0 auto; padding: 40px 24px;">
    <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 40px;">
      <!-- Brand -->
      <div style="flex: 1; min-width: 200px;">
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
          <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); border-radius: 6px;"></div>
          <span style="font-size: 1rem; font-weight: 600; color: #f7f9fa;">Socket Library</span>
        </div>
        <p style="color: #8b98a5; font-size: 0.8125rem; line-height: 1.6; margin: 0;">
          High-performance socket toolkit for POSIX systems with exception-based error handling and TLS 1.3 support.
        </p>
      </div>
      <!-- Links -->
      <div style="display: flex; gap: 48px; flex-wrap: wrap;">
        <div>
          <h4 style="font-size: 0.75rem; font-weight: 600; color: #f7f9fa; text-transform: uppercase; letter-spacing: 0.05em; margin: 0 0 12px 0;">Documentation</h4>
          <ul style="list-style: none; padding: 0; margin: 0;">
            <li style="margin: 6px 0;"><a href="index.html" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">Getting Started</a></li>
            <li style="margin: 6px 0;"><a href="annotated.html" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">Data Structures</a></li>
            <li style="margin: 6px 0;"><a href="globals.html" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">API Reference</a></li>
          </ul>
        </div>
        <div>
          <h4 style="font-size: 0.75rem; font-weight: 600; color: #f7f9fa; text-transform: uppercase; letter-spacing: 0.05em; margin: 0 0 12px 0;">Resources</h4>
          <ul style="list-style: none; padding: 0; margin: 0;">
            <li style="margin: 6px 0;"><a href="files.html" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">Header Files</a></li>
            <li style="margin: 6px 0;"><a href="https://x.com/tetsuocorp" target="_blank" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">Twitter/X</a></li>
          </ul>
        </div>
      </div>
    </div>
    <!-- Bottom -->
    <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #30363d; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px;">
      <div style="display: flex; align-items: center; gap: 12px;">
        <span style="font-size: 0.75rem; font-weight: 500; color: #10b981; background: rgba(16, 185, 129, 0.1); padding: 4px 8px; border-radius: 4px;">C11</span>
        <span style="font-size: 0.75rem; font-weight: 500; color: #3b82f6; background: rgba(59, 130, 246, 0.1); padding: 4px 8px; border-radius: 4px;">POSIX</span>
        <span style="font-size: 0.75rem; font-weight: 500; color: #8b5cf6; background: rgba(139, 92, 246, 0.1); padding: 4px 8px; border-radius: 4px;">TLS 1.3</span>
      </div>
      <div style="color: #6e7681; font-size: 0.75rem; display: flex; align-items: center; gap: 8px;">
        <span> 2025 Tetsuo Corporation</span>
        <span style="color: #30363d;"></span>
        <a href="https://opensource.org/licenses/MIT" target="_blank" style="color: #8b98a5; text-decoration: none;">MIT License</a>
      </div>
    </div>
  </div>
</footer>
</body>
</html>
