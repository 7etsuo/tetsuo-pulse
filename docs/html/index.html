<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="High-performance, exception-driven socket toolkit for POSIX systems">
<meta name="keywords" content="socket, networking, C, POSIX, TCP, UDP, TLS, async, high-performance, library">
<meta name="author" content="Tetsuo Corporation">
<meta name="theme-color" content="#3b82f6">
<title>Socket Library</title>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="socket-theme.css" rel="stylesheet" type="text/css"/>
<link href="socket-theme.css" rel="stylesheet" type="text/css"/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' stop-color='%233b82f6'/><stop offset='100%25' stop-color='%238b5cf6'/></linearGradient></defs><rect width='100' height='100' rx='20' fill='url(%23g)'/><text x='50' y='68' font-size='50' text-anchor='middle' fill='white' font-family='sans-serif' font-weight='bold'>S</text></svg>">
</head>
<body>
<div id="top">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Socket Library<span id="projectnumber">1.0.0</span></div>
   <div id="projectbrief">High-performance, exception-driven socket toolkit for POSIX systems</div>
  </td>
  <td style="text-align: right; padding: 20px; vertical-align: middle;">
    <div style="display: flex; gap: 8px; justify-content: flex-end; flex-wrap: wrap; align-items: center;">
      <a href="index.html" class="quick-link">Home</a>
      <a href="annotated.html" class="quick-link">Structures</a>
      <a href="files.html" class="quick-link">Files</a>
      <a href="globals.html" class="quick-link">API</a>
    </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Socket Library </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="mainpage"></a> A modern C library for building high-performance networked applications. Production-ready with comprehensive support for TCP, UDP, Unix domain sockets, and TLS 1.3 security.</p>
<p><b>Version:</b> 1.0.0 <b>Last Updated:</b> December 9, 2025</p>
<hr  />
<h1><a class="anchor" id="autotoc_md13"></a>
Features</h1>
<h2><a class="anchor" id="autotoc_md14"></a>
Core Networking</h2>
<ul>
<li><b>TCP Stream Sockets</b> — Full client/server support with advanced TCP options</li>
<li><b>UDP Datagram Sockets</b> — Connectionless and connected modes, multicast support</li>
<li><b>Unix Domain Sockets</b> — High-performance IPC for local communication</li>
<li><b>TLS 1.3 Security</b> — Modern encryption via OpenSSL with SNI and ALPN</li>
<li><b>Advanced Security</b> — SYN flood protection, DoS mitigation, certificate pinning</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Async &amp; Event-Driven</h2>
<ul>
<li><b>Cross-Platform Polling</b> — epoll (Linux), kqueue (BSD/macOS), poll (fallback)</li>
<li><b>Asynchronous DNS</b> — Non-blocking resolution with thread pool</li>
<li><b>Happy Eyeballs (RFC 8305)</b> — Fast dual-stack connection racing</li>
<li><b>Auto-Reconnection</b> — Exponential backoff with circuit breaker</li>
<li><b>Advanced Rate Limiting</b> — Token bucket with per-IP controls</li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
Performance</h2>
<ul>
<li><b>Zero-Copy I/O</b> — Platform-optimized <code>sendfile()</code> and scatter/gather</li>
<li><b><a class="el" href="group__connection__mgmt.html#structConnection" title="Internal structure representing a pooled connection slot.">Connection</a> Pooling</b> — O(1) lookup with buffer management</li>
<li><b>Arena Allocation</b> — Memory-safe with automatic cleanup</li>
<li><b>Advanced Metrics</b> — Comprehensive observability with Prometheus/StatsD export</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md18"></a>
Quick Start</h1>
<div class="fragment"><div class="line">cmake -S . -B build</div>
<div class="line">cmake --build build -j</div>
<div class="line">ctest --test-dir build</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md20"></a>
Examples</h1>
<h2><a class="anchor" id="autotoc_md21"></a>
TCP Echo Server</h2>
<p>A simple server that echoes back whatever clients send.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Socket_8h.html">socket/Socket.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    Socket_T server = <a class="code hl_function" href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a>(AF_INET, SOCK_STREAM, 0);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#ga2c6f352cec920859c71206898ed135fc">Socket_setreuseaddr</a>(server);</div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#gacb65d693d8c93e2a1fe6411dd0d0af98">Socket_bind</a>(server, NULL, 8080);</div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#gab24b026bc4c69e6f766211f44675e189">Socket_listen</a>(server, 10);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Listening on port 8080...\n&quot;</span>);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">while</span> (1) {</div>
<div class="line">            Socket_T client = <a class="code hl_function" href="group__core__io.html#ga32b67d95639513cd6a602f6175b48f15">Socket_accept</a>(server);</div>
<div class="line">            <span class="keywordflow">if</span> (client) {</div>
<div class="line">                <span class="keywordtype">char</span> buf[1024];</div>
<div class="line">                ssize_t n = <a class="code hl_function" href="group__core__io.html#ga95db343f47445925cecd6b20054518e9">Socket_recv</a>(client, buf, <span class="keyword">sizeof</span>(buf) - 1);</div>
<div class="line">                <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">                    buf[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Received: %s\n&quot;</span>, buf);</div>
<div class="line">                    <a class="code hl_function" href="group__core__io.html#ga6ea9ad33d78c50d327c9677b52849bcb">Socket_sendall</a>(client, buf, n);</div>
<div class="line">                }</div>
<div class="line">                <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;client);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga225f4a8fd657fd52a05146c6fc4f58b0">Socket_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;server);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aExcept_8h_html"><div class="ttname"><a href="Except_8h.html">Except.h</a></div><div class="ttdoc">Structured exception handling for C with TRY/EXCEPT/FINALLY blocks.</div></div>
<div class="ttc" id="aSocket_8h_html"><div class="ttname"><a href="Socket_8h.html">Socket.h</a></div><div class="ttdoc">High-level TCP/IP and Unix domain socket interface.</div></div>
<div class="ttc" id="agraceful__shutdown_8c_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition</b> <a href="graceful__shutdown_8c_source.html#l00235">graceful_shutdown.c:235</a></div></div>
<div class="ttc" id="agroup__core__io_html_ga225f4a8fd657fd52a05146c6fc4f58b0"><div class="ttname"><a href="group__core__io.html#ga225f4a8fd657fd52a05146c6fc4f58b0">Socket_Failed</a></div><div class="ttdeci">const Except_T Socket_Failed</div><div class="ttdoc">General socket operation failure exception.</div></div>
<div class="ttc" id="agroup__core__io_html_ga2c6f352cec920859c71206898ed135fc"><div class="ttname"><a href="group__core__io.html#ga2c6f352cec920859c71206898ed135fc">Socket_setreuseaddr</a></div><div class="ttdeci">void Socket_setreuseaddr(Socket_T socket)</div><div class="ttdoc">Enable address reuse.</div></div>
<div class="ttc" id="agroup__core__io_html_ga32b67d95639513cd6a602f6175b48f15"><div class="ttname"><a href="group__core__io.html#ga32b67d95639513cd6a602f6175b48f15">Socket_accept</a></div><div class="ttdeci">Socket_T Socket_accept(Socket_T socket)</div><div class="ttdoc">Accept incoming connection.</div></div>
<div class="ttc" id="agroup__core__io_html_ga6212fb2b6eefa567592a59f55c25a6f1"><div class="ttname"><a href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a></div><div class="ttdeci">Socket_T Socket_new(int domain, int type, int protocol)</div><div class="ttdoc">Create a new socket.</div></div>
<div class="ttc" id="agroup__core__io_html_ga6ea9ad33d78c50d327c9677b52849bcb"><div class="ttname"><a href="group__core__io.html#ga6ea9ad33d78c50d327c9677b52849bcb">Socket_sendall</a></div><div class="ttdeci">ssize_t Socket_sendall(Socket_T socket, const void *buf, size_t len)</div><div class="ttdoc">Send all data (handles partial sends).</div></div>
<div class="ttc" id="agroup__core__io_html_ga74ad7a9bb8deaf499c59d90d6e411f37"><div class="ttname"><a href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a></div><div class="ttdeci">void Socket_free(Socket_T *socket)</div><div class="ttdoc">Free a socket and close the connection.</div></div>
<div class="ttc" id="agroup__core__io_html_ga95db343f47445925cecd6b20054518e9"><div class="ttname"><a href="group__core__io.html#ga95db343f47445925cecd6b20054518e9">Socket_recv</a></div><div class="ttdeci">ssize_t Socket_recv(Socket_T socket, void *buf, size_t len)</div><div class="ttdoc">Receive data.</div></div>
<div class="ttc" id="agroup__core__io_html_gab24b026bc4c69e6f766211f44675e189"><div class="ttname"><a href="group__core__io.html#gab24b026bc4c69e6f766211f44675e189">Socket_listen</a></div><div class="ttdeci">void Socket_listen(Socket_T socket, int backlog)</div><div class="ttdoc">Listen for incoming connections.</div></div>
<div class="ttc" id="agroup__core__io_html_gacb65d693d8c93e2a1fe6411dd0d0af98"><div class="ttname"><a href="group__core__io.html#gacb65d693d8c93e2a1fe6411dd0d0af98">Socket_bind</a></div><div class="ttdeci">void Socket_bind(Socket_T socket, const char *host, int port)</div><div class="ttdoc">Bind socket to address and port.</div></div>
<div class="ttc" id="agroup__foundation_html_gab5e72fc2bd41014c75e0ace4feabfe8e"><div class="ttname"><a href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a></div><div class="ttdeci">#define EXCEPT(e)</div><div class="ttdoc">Catch a specific exception type within a TRY block.</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l00280">Except.h:280</a></div></div>
<div class="ttc" id="agroup__foundation_html_gac71a25566cdc9e11eaecb16c966081db"><div class="ttname"><a href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a></div><div class="ttdeci">const char * Socket_GetLastError(void)</div><div class="ttdoc">Socket_GetLastError - Retrieve the most recent formatted error message.</div></div>
<div class="ttc" id="agroup__foundation_html_gad2746371528bdf15c3910b7bf217dac0"><div class="ttname"><a href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div><div class="ttdeci">#define TRY</div><div class="ttdoc">Start a TRY/EXCEPT/FINALLY exception handling block.</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l00239">Except.h:239</a></div></div>
<div class="ttc" id="agroup__foundation_html_gae6628ac788ad213363b89dba9868420b"><div class="ttname"><a href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a></div><div class="ttdeci">#define END_TRY</div><div class="ttdoc">Complete a TRY/EXCEPT/FINALLY exception handling block.</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l00376">Except.h:376</a></div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md23"></a>
TCP Client</h2>
<p>Connect to a server, send data, and receive a response.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Socket_8h.html">socket/Socket.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    Socket_T client = <a class="code hl_function" href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a>(AF_INET, SOCK_STREAM, 0);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#gac14390090ee26136c1f7a816fc08406e">Socket_connect</a>(client, <span class="stringliteral">&quot;127.0.0.1&quot;</span>, 8080);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Connected to server\n&quot;</span>);</div>
<div class="line">        </div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *message = <span class="stringliteral">&quot;Hello, Server!&quot;</span>;</div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#ga6ea9ad33d78c50d327c9677b52849bcb">Socket_sendall</a>(client, message, strlen(message));</div>
<div class="line">        </div>
<div class="line">        <span class="keywordtype">char</span> buf[1024];</div>
<div class="line">        ssize_t n = <a class="code hl_function" href="group__core__io.html#ga95db343f47445925cecd6b20054518e9">Socket_recv</a>(client, buf, <span class="keyword">sizeof</span>(buf) - 1);</div>
<div class="line">        <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">            buf[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">            printf(<span class="stringliteral">&quot;Server response: %s\n&quot;</span>, buf);</div>
<div class="line">        }</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga225f4a8fd657fd52a05146c6fc4f58b0">Socket_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Connection error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga2db3d742dcea3f39ad2eb37d4fb1e453">Socket_Closed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Server closed connection\n&quot;</span>);</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;client);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__core__io_html_ga2db3d742dcea3f39ad2eb37d4fb1e453"><div class="ttname"><a href="group__core__io.html#ga2db3d742dcea3f39ad2eb37d4fb1e453">Socket_Closed</a></div><div class="ttdeci">const Except_T Socket_Closed</div><div class="ttdoc">Connection closed by peer exception.</div></div>
<div class="ttc" id="agroup__core__io_html_gac14390090ee26136c1f7a816fc08406e"><div class="ttname"><a href="group__core__io.html#gac14390090ee26136c1f7a816fc08406e">Socket_connect</a></div><div class="ttdeci">void Socket_connect(Socket_T socket, const char *host, int port)</div><div class="ttdoc">Connect to remote host.</div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md25"></a>
Event-Driven Server (Non-Blocking)</h2>
<p>Handle multiple clients concurrently using SocketPoll.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Socket_8h.html">socket/Socket.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketPoll_8h.html">poll/SocketPoll.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    Socket_T server = <a class="code hl_function" href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a>(AF_INET, SOCK_STREAM, 0);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga2c6f352cec920859c71206898ed135fc">Socket_setreuseaddr</a>(server);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gacb65d693d8c93e2a1fe6411dd0d0af98">Socket_bind</a>(server, NULL, 8080);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gab24b026bc4c69e6f766211f44675e189">Socket_listen</a>(server, 128);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga35309677a1760480783d5f0c294d0db4">Socket_setnonblocking</a>(server);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_struct" href="group__event__system.html#structSocketPoll__T">SocketPoll_T</a> poll = <a class="code hl_function" href="group__event__system.html#gac1fbd1a09d564f7988b0e427e5707ca7">SocketPoll_new</a>(1024);</div>
<div class="line">    <a class="code hl_function" href="group__event__system.html#ga6c9f3f1a23dd85dd2d44ff9b0ced4e1e">SocketPoll_add</a>(poll, server, <a class="code hl_enumvalue" href="group__event__system.html#gga9e8943c9cb47aba63dda4ad9083142b6a19f5d65c083268df50040f34f306d1b8">POLL_READ</a>, NULL);</div>
<div class="line">    </div>
<div class="line">    printf(<span class="stringliteral">&quot;Event server on port 8080 (%s backend)\n&quot;</span>, </div>
<div class="line">           SocketPoll_get_backend(poll));</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <a class="code hl_struct" href="group__event__system.html#structSocketEvent__T">SocketEvent_T</a> events[64];</div>
<div class="line">        <span class="keywordtype">int</span> n = <a class="code hl_function" href="group__event__system.html#gaa3d47365dd18329d50ee636284839738">SocketPoll_wait</a>(poll, events, 64, 1000);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++) {</div>
<div class="line">            Socket_T sock = events[i].<a class="code hl_variable" href="group__event__system.html#a98544b5a507331adac069acd7f42d593">socket</a>;</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span> (sock == server) {</div>
<div class="line">                <span class="comment">/* New connection */</span></div>
<div class="line">                Socket_T client = <a class="code hl_function" href="group__core__io.html#ga32b67d95639513cd6a602f6175b48f15">Socket_accept</a>(server);</div>
<div class="line">                <span class="keywordflow">if</span> (client) {</div>
<div class="line">                    <a class="code hl_function" href="group__core__io.html#ga35309677a1760480783d5f0c294d0db4">Socket_setnonblocking</a>(client);</div>
<div class="line">                    <a class="code hl_function" href="group__event__system.html#ga6c9f3f1a23dd85dd2d44ff9b0ced4e1e">SocketPoll_add</a>(poll, client, <a class="code hl_enumvalue" href="group__event__system.html#gga9e8943c9cb47aba63dda4ad9083142b6a19f5d65c083268df50040f34f306d1b8">POLL_READ</a>, client);</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Client connected (fd=%d)\n&quot;</span>, <a class="code hl_function" href="group__core__io.html#ga4d727948c677509eec04746585819877">Socket_fd</a>(client));</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">/* Client data */</span></div>
<div class="line">                <span class="keywordtype">char</span> buf[1024];</div>
<div class="line">                ssize_t bytes = <a class="code hl_function" href="group__core__io.html#ga95db343f47445925cecd6b20054518e9">Socket_recv</a>(sock, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">                </div>
<div class="line">                <span class="keywordflow">if</span> (bytes &gt; 0) {</div>
<div class="line">                    <a class="code hl_function" href="group__core__io.html#ga6ea9ad33d78c50d327c9677b52849bcb">Socket_sendall</a>(sock, buf, bytes);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Client disconnected (fd=%d)\n&quot;</span>, <a class="code hl_function" href="group__core__io.html#ga4d727948c677509eec04746585819877">Socket_fd</a>(sock));</div>
<div class="line">                    SocketPoll_remove(poll, sock);</div>
<div class="line">                    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;sock);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__event__system.html#gaca744c50badbdb869c52088b9f32f8d2">SocketPoll_free</a>(&amp;poll);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;server);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aSocketPoll_8h_html"><div class="ttname"><a href="SocketPoll_8h.html">SocketPoll.h</a></div><div class="ttdoc">Cross-platform high-level interface for monitoring multiple sockets for I/O events.</div></div>
<div class="ttc" id="agroup__core__io_html_ga35309677a1760480783d5f0c294d0db4"><div class="ttname"><a href="group__core__io.html#ga35309677a1760480783d5f0c294d0db4">Socket_setnonblocking</a></div><div class="ttdeci">void Socket_setnonblocking(Socket_T socket)</div><div class="ttdoc">Enable non-blocking mode.</div></div>
<div class="ttc" id="agroup__core__io_html_ga4d727948c677509eec04746585819877"><div class="ttname"><a href="group__core__io.html#ga4d727948c677509eec04746585819877">Socket_fd</a></div><div class="ttdeci">int Socket_fd(const Socket_T socket)</div><div class="ttdoc">Get underlying file descriptor.</div></div>
<div class="ttc" id="agroup__event__system_html_a98544b5a507331adac069acd7f42d593"><div class="ttname"><a href="group__event__system.html#a98544b5a507331adac069acd7f42d593">SocketEvent_T::socket</a></div><div class="ttdeci">Socket_T socket</div><div class="ttdef"><b>Definition</b> <a href="SocketPoll_8h_source.html#l00189">SocketPoll.h:189</a></div></div>
<div class="ttc" id="agroup__event__system_html_ga6c9f3f1a23dd85dd2d44ff9b0ced4e1e"><div class="ttname"><a href="group__event__system.html#ga6c9f3f1a23dd85dd2d44ff9b0ced4e1e">SocketPoll_add</a></div><div class="ttdeci">void SocketPoll_add(SocketPoll_T poll, Socket_T socket, unsigned events, void *data)</div><div class="ttdoc">Register a socket for event monitoring in the poll set.</div></div>
<div class="ttc" id="agroup__event__system_html_gaa3d47365dd18329d50ee636284839738"><div class="ttname"><a href="group__event__system.html#gaa3d47365dd18329d50ee636284839738">SocketPoll_wait</a></div><div class="ttdeci">int SocketPoll_wait(SocketPoll_T poll, SocketEvent_T **events, int timeout)</div><div class="ttdoc">Wait for I/O events on registered sockets.</div></div>
<div class="ttc" id="agroup__event__system_html_gac1fbd1a09d564f7988b0e427e5707ca7"><div class="ttname"><a href="group__event__system.html#gac1fbd1a09d564f7988b0e427e5707ca7">SocketPoll_new</a></div><div class="ttdeci">SocketPoll_T SocketPoll_new(int maxevents)</div><div class="ttdoc">Create a new event poll instance.</div></div>
<div class="ttc" id="agroup__event__system_html_gaca744c50badbdb869c52088b9f32f8d2"><div class="ttname"><a href="group__event__system.html#gaca744c50badbdb869c52088b9f32f8d2">SocketPoll_free</a></div><div class="ttdeci">void SocketPoll_free(SocketPoll_T *poll)</div><div class="ttdoc">Dispose of an event poll instance and release resources.</div></div>
<div class="ttc" id="agroup__event__system_html_gga9e8943c9cb47aba63dda4ad9083142b6a19f5d65c083268df50040f34f306d1b8"><div class="ttname"><a href="group__event__system.html#gga9e8943c9cb47aba63dda4ad9083142b6a19f5d65c083268df50040f34f306d1b8">POLL_READ</a></div><div class="ttdeci">@ POLL_READ</div><div class="ttdef"><b>Definition</b> <a href="SocketPoll_8h_source.html#l00163">SocketPoll.h:163</a></div></div>
<div class="ttc" id="agroup__event__system_html_structSocketEvent__T"><div class="ttname"><a href="group__event__system.html#structSocketEvent__T">SocketEvent_T</a></div><div class="ttdoc">Event notification structure returned by polling operations.</div><div class="ttdef"><b>Definition</b> <a href="SocketPoll_8h_source.html#l00187">SocketPoll.h:188</a></div></div>
<div class="ttc" id="agroup__event__system_html_structSocketPoll__T"><div class="ttname"><a href="group__event__system.html#structSocketPoll__T">SocketPoll_T</a></div><div class="ttdoc">Complete internal state for SocketPoll instance.</div><div class="ttdef"><b>Definition</b> <a href="SocketPoll-private_8h_source.html#l00184">SocketPoll-private.h:185</a></div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md27"></a>
UDP Echo Server</h2>
<p>Connectionless datagram server.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketDgram_8h.html">socket/SocketDgram.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="SocketDgram-private_8h.html#structSocketDgram__T">SocketDgram_T</a> server = <a class="code hl_function" href="group__core__io.html#gad6902c87ab5883f155dab2adfa950c52">SocketDgram_new</a>(AF_INET, 0);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#ga0c81d9ef1d90e7ab34dd7286f13878ee">SocketDgram_bind</a>(server, NULL, 5000);</div>
<div class="line">        printf(<span class="stringliteral">&quot;UDP server listening on port 5000\n&quot;</span>);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">while</span> (1) {</div>
<div class="line">            <span class="keywordtype">char</span> buf[65536];</div>
<div class="line">            <span class="keywordtype">char</span> sender_host[256];</div>
<div class="line">            <span class="keywordtype">int</span> sender_port;</div>
<div class="line">            </div>
<div class="line">            ssize_t n = <a class="code hl_function" href="group__core__io.html#gada4b76edaec59a44eb5bc959e6948d3f">SocketDgram_recvfrom</a>(server, buf, <span class="keyword">sizeof</span>(buf),</div>
<div class="line">                                            sender_host, <span class="keyword">sizeof</span>(sender_host),</div>
<div class="line">                                            &amp;sender_port);</div>
<div class="line">            <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;From %s:%d - %zd bytes\n&quot;</span>, sender_host, sender_port, n);</div>
<div class="line">                <a class="code hl_function" href="group__core__io.html#ga08371cbf32cb15528b42e189f8267923">SocketDgram_sendto</a>(server, buf, n, sender_host, sender_port);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga28354c49d1726c674932f420a57bb21d">SocketDgram_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;UDP error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga020169c79640786afa4c36fd1dc965e4">SocketDgram_free</a>(&amp;server);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aSocketDgram-private_8h_html_structSocketDgram__T"><div class="ttname"><a href="SocketDgram-private_8h.html#structSocketDgram__T">SocketDgram_T</a></div><div class="ttdoc">Opaque handle for UDP/datagram sockets.</div><div class="ttdef"><b>Definition</b> <a href="SocketDgram-private_8h_source.html#l00041">SocketDgram-private.h:42</a></div></div>
<div class="ttc" id="aSocketDgram_8h_html"><div class="ttname"><a href="SocketDgram_8h.html">SocketDgram.h</a></div><div class="ttdoc">High-level UDP/datagram socket interface with multicast and broadcast support.</div></div>
<div class="ttc" id="agroup__core__io_html_ga020169c79640786afa4c36fd1dc965e4"><div class="ttname"><a href="group__core__io.html#ga020169c79640786afa4c36fd1dc965e4">SocketDgram_free</a></div><div class="ttdeci">void SocketDgram_free(SocketDgram_T *socket)</div><div class="ttdoc">Free a socket and close the connection.</div></div>
<div class="ttc" id="agroup__core__io_html_ga08371cbf32cb15528b42e189f8267923"><div class="ttname"><a href="group__core__io.html#ga08371cbf32cb15528b42e189f8267923">SocketDgram_sendto</a></div><div class="ttdeci">ssize_t SocketDgram_sendto(SocketDgram_T socket, const void *buf, size_t len, const char *host, int port)</div><div class="ttdoc">Send datagram to specific address.</div></div>
<div class="ttc" id="agroup__core__io_html_ga0c81d9ef1d90e7ab34dd7286f13878ee"><div class="ttname"><a href="group__core__io.html#ga0c81d9ef1d90e7ab34dd7286f13878ee">SocketDgram_bind</a></div><div class="ttdeci">void SocketDgram_bind(SocketDgram_T socket, const char *host, int port)</div><div class="ttdoc">Bind socket to address and port.</div></div>
<div class="ttc" id="agroup__core__io_html_ga28354c49d1726c674932f420a57bb21d"><div class="ttname"><a href="group__core__io.html#ga28354c49d1726c674932f420a57bb21d">SocketDgram_Failed</a></div><div class="ttdeci">const Except_T SocketDgram_Failed</div><div class="ttdoc">UDP/Datagram-specific failure exception.</div></div>
<div class="ttc" id="agroup__core__io_html_gad6902c87ab5883f155dab2adfa950c52"><div class="ttname"><a href="group__core__io.html#gad6902c87ab5883f155dab2adfa950c52">SocketDgram_new</a></div><div class="ttdeci">SocketDgram_T SocketDgram_new(int domain, int protocol)</div><div class="ttdoc">Create a new UDP socket.</div></div>
<div class="ttc" id="agroup__core__io_html_gada4b76edaec59a44eb5bc959e6948d3f"><div class="ttname"><a href="group__core__io.html#gada4b76edaec59a44eb5bc959e6948d3f">SocketDgram_recvfrom</a></div><div class="ttdeci">ssize_t SocketDgram_recvfrom(SocketDgram_T socket, void *buf, size_t len, char *host, size_t host_len, int *port)</div><div class="ttdoc">Receive datagram and get sender address.</div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md29"></a>
UDP Client</h2>
<p>Send and receive datagrams.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketDgram_8h.html">socket/SocketDgram.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="SocketDgram-private_8h.html#structSocketDgram__T">SocketDgram_T</a> client = <a class="code hl_function" href="group__core__io.html#gad6902c87ab5883f155dab2adfa950c52">SocketDgram_new</a>(AF_INET, 0);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *message = <span class="stringliteral">&quot;Hello UDP!&quot;</span>;</div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#ga08371cbf32cb15528b42e189f8267923">SocketDgram_sendto</a>(client, message, strlen(message), </div>
<div class="line">                          <span class="stringliteral">&quot;127.0.0.1&quot;</span>, 5000);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordtype">char</span> buf[1024];</div>
<div class="line">        <span class="keywordtype">char</span> from_host[256];</div>
<div class="line">        <span class="keywordtype">int</span> from_port;</div>
<div class="line">        </div>
<div class="line">        ssize_t n = <a class="code hl_function" href="group__core__io.html#gada4b76edaec59a44eb5bc959e6948d3f">SocketDgram_recvfrom</a>(client, buf, <span class="keyword">sizeof</span>(buf),</div>
<div class="line">                                        from_host, <span class="keyword">sizeof</span>(from_host),</div>
<div class="line">                                        &amp;from_port);</div>
<div class="line">        <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">            buf[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">            printf(<span class="stringliteral">&quot;Response from %s:%d: %s\n&quot;</span>, from_host, from_port, buf);</div>
<div class="line">        }</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga28354c49d1726c674932f420a57bb21d">SocketDgram_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga020169c79640786afa4c36fd1dc965e4">SocketDgram_free</a>(&amp;client);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md31"></a>
TLS Client (Secure Connection)</h2>
<p>Connect to an HTTPS server with TLS 1.3.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Socket_8h.html">socket/Socket.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketTLS_8h.html">tls/SocketTLS.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketTLSContext_8h.html">tls/SocketTLSContext.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Create TLS context with system CA certificates */</span></div>
<div class="line">    <a class="code hl_struct" href="group__security.html#structSocketTLSContext__T">SocketTLSContext_T</a> ctx = <a class="code hl_function" href="group__security.html#ga7fe51da14439d768bdf72f4ed8fbb022">SocketTLSContext_new_client</a>(NULL);</div>
<div class="line">    </div>
<div class="line">    Socket_T sock = <a class="code hl_function" href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a>(AF_INET, SOCK_STREAM, 0);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#gac14390090ee26136c1f7a816fc08406e">Socket_connect</a>(sock, <span class="stringliteral">&quot;example.com&quot;</span>, 443);</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Enable TLS and set SNI hostname */</span></div>
<div class="line">        <a class="code hl_function" href="group__security.html#gab9a8fb788aa1f0d21b5773bc43a48d6f">SocketTLS_enable</a>(sock, ctx);</div>
<div class="line">        <a class="code hl_function" href="group__security.html#ga15d2c8f4eaea80114bbd2123da025e56">SocketTLS_set_hostname</a>(sock, <span class="stringliteral">&quot;example.com&quot;</span>);</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Perform handshake */</span></div>
<div class="line">        <span class="keywordflow">while</span> (<a class="code hl_function" href="group__security.html#gaeaa77dd7852b535baf17b53ee2518454">SocketTLS_handshake</a>(sock) != <a class="code hl_enumvalue" href="group__security.html#ggad092160c037d01929df1bb8d5b75b43cac9d764c27bc5b541bd5e7a4c42eddfce">TLS_HANDSHAKE_COMPLETE</a>) {</div>
<div class="line">            <span class="comment">/* For blocking sockets, this completes immediately */</span></div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        printf(<span class="stringliteral">&quot;TLS %s established with %s\n&quot;</span>,</div>
<div class="line">               <a class="code hl_function" href="group__security.html#gaef0f67021658d05419f1da479be2957e">SocketTLS_get_version</a>(sock),</div>
<div class="line">               <a class="code hl_function" href="group__security.html#ga0859f0a6e05840bdc037c3765e22b7b1">SocketTLS_get_cipher</a>(sock));</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Send HTTP request */</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *request = <span class="stringliteral">&quot;GET / HTTP/1.1\r\n&quot;</span></div>
<div class="line">                             <span class="stringliteral">&quot;Host: example.com\r\n&quot;</span></div>
<div class="line">                             <span class="stringliteral">&quot;Connection: close\r\n\r\n&quot;</span>;</div>
<div class="line">        <a class="code hl_function" href="group__security.html#gabdb38e692dde58bbec4ab905eeb8b3aa">SocketTLS_send</a>(sock, request, strlen(request));</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Read response */</span></div>
<div class="line">        <span class="keywordtype">char</span> buf[4096];</div>
<div class="line">        ssize_t n = <a class="code hl_function" href="group__security.html#ga1c71fc02141cd9e6da4fdf1c88dbbaf3">SocketTLS_recv</a>(sock, buf, <span class="keyword">sizeof</span>(buf) - 1);</div>
<div class="line">        <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">            buf[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">            printf(<span class="stringliteral">&quot;Response:\n%.500s...\n&quot;</span>, buf);</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <a class="code hl_function" href="group__security.html#gab11506db6f41f31e9fc170b3d0e848f1">SocketTLS_shutdown</a>(sock);</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__security.html#ga82be75dd764021fb64cd6824768e2254">SocketTLS_HandshakeFailed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;TLS handshake failed: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__security.html#gabe406e483a861198db5bca58300f1728">SocketTLS_VerifyFailed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Certificate verification failed\n&quot;</span>);</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga225f4a8fd657fd52a05146c6fc4f58b0">Socket_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Connection error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;sock);</div>
<div class="line">    <a class="code hl_function" href="group__security.html#gaea7ca3e656e9b58706fafc3232147203">SocketTLSContext_free</a>(&amp;ctx);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aSocketTLSContext_8h_html"><div class="ttname"><a href="SocketTLSContext_8h.html">SocketTLSContext.h</a></div><div class="ttdoc">TLS context management with secure defaults and certificate handling.</div></div>
<div class="ttc" id="aSocketTLS_8h_html"><div class="ttname"><a href="SocketTLS_8h.html">SocketTLS.h</a></div><div class="ttdoc">TLS/SSL socket integration with TLS 1.3 support.</div></div>
<div class="ttc" id="agroup__security_html_ga0859f0a6e05840bdc037c3765e22b7b1"><div class="ttname"><a href="group__security.html#ga0859f0a6e05840bdc037c3765e22b7b1">SocketTLS_get_cipher</a></div><div class="ttdeci">const char * SocketTLS_get_cipher(Socket_T socket)</div><div class="ttdoc">Get negotiated cipher suite name.</div></div>
<div class="ttc" id="agroup__security_html_ga15d2c8f4eaea80114bbd2123da025e56"><div class="ttname"><a href="group__security.html#ga15d2c8f4eaea80114bbd2123da025e56">SocketTLS_set_hostname</a></div><div class="ttdeci">void SocketTLS_set_hostname(Socket_T socket, const char *hostname)</div><div class="ttdoc">Set SNI hostname for client TLS connections.</div></div>
<div class="ttc" id="agroup__security_html_ga1c71fc02141cd9e6da4fdf1c88dbbaf3"><div class="ttname"><a href="group__security.html#ga1c71fc02141cd9e6da4fdf1c88dbbaf3">SocketTLS_recv</a></div><div class="ttdeci">ssize_t SocketTLS_recv(Socket_T socket, void *buf, size_t len)</div><div class="ttdoc">Receive data from TLS-encrypted connection.</div></div>
<div class="ttc" id="agroup__security_html_ga7fe51da14439d768bdf72f4ed8fbb022"><div class="ttname"><a href="group__security.html#ga7fe51da14439d768bdf72f4ed8fbb022">SocketTLSContext_new_client</a></div><div class="ttdeci">SocketTLSContext_T SocketTLSContext_new_client(const char *ca_file)</div><div class="ttdoc">Create client TLS context.</div></div>
<div class="ttc" id="agroup__security_html_ga82be75dd764021fb64cd6824768e2254"><div class="ttname"><a href="group__security.html#ga82be75dd764021fb64cd6824768e2254">SocketTLS_HandshakeFailed</a></div><div class="ttdeci">const Except_T SocketTLS_HandshakeFailed</div><div class="ttdoc">TLS handshake could not complete.</div></div>
<div class="ttc" id="agroup__security_html_gab11506db6f41f31e9fc170b3d0e848f1"><div class="ttname"><a href="group__security.html#gab11506db6f41f31e9fc170b3d0e848f1">SocketTLS_shutdown</a></div><div class="ttdeci">void SocketTLS_shutdown(Socket_T socket)</div><div class="ttdoc">Perform graceful TLS connection shutdown.</div></div>
<div class="ttc" id="agroup__security_html_gab9a8fb788aa1f0d21b5773bc43a48d6f"><div class="ttname"><a href="group__security.html#gab9a8fb788aa1f0d21b5773bc43a48d6f">SocketTLS_enable</a></div><div class="ttdeci">void SocketTLS_enable(Socket_T socket, SocketTLSContext_T ctx)</div><div class="ttdoc">Enable TLS on a socket using the provided context.</div></div>
<div class="ttc" id="agroup__security_html_gabdb38e692dde58bbec4ab905eeb8b3aa"><div class="ttname"><a href="group__security.html#gabdb38e692dde58bbec4ab905eeb8b3aa">SocketTLS_send</a></div><div class="ttdeci">ssize_t SocketTLS_send(Socket_T socket, const void *buf, size_t len)</div><div class="ttdoc">Send data over TLS-encrypted connection.</div></div>
<div class="ttc" id="agroup__security_html_gabe406e483a861198db5bca58300f1728"><div class="ttname"><a href="group__security.html#gabe406e483a861198db5bca58300f1728">SocketTLS_VerifyFailed</a></div><div class="ttdeci">const Except_T SocketTLS_VerifyFailed</div><div class="ttdoc">Peer certificate verification failure.</div></div>
<div class="ttc" id="agroup__security_html_gaea7ca3e656e9b58706fafc3232147203"><div class="ttname"><a href="group__security.html#gaea7ca3e656e9b58706fafc3232147203">SocketTLSContext_free</a></div><div class="ttdeci">void SocketTLSContext_free(SocketTLSContext_T *ctx_p)</div><div class="ttdoc">Dispose of TLS context and resources.</div></div>
<div class="ttc" id="agroup__security_html_gaeaa77dd7852b535baf17b53ee2518454"><div class="ttname"><a href="group__security.html#gaeaa77dd7852b535baf17b53ee2518454">SocketTLS_handshake</a></div><div class="ttdeci">TLSHandshakeState SocketTLS_handshake(Socket_T socket)</div><div class="ttdoc">Perform non-blocking TLS handshake.</div></div>
<div class="ttc" id="agroup__security_html_gaef0f67021658d05419f1da479be2957e"><div class="ttname"><a href="group__security.html#gaef0f67021658d05419f1da479be2957e">SocketTLS_get_version</a></div><div class="ttdeci">const char * SocketTLS_get_version(Socket_T socket)</div><div class="ttdoc">Get negotiated TLS protocol version.</div></div>
<div class="ttc" id="agroup__security_html_ggad092160c037d01929df1bb8d5b75b43cac9d764c27bc5b541bd5e7a4c42eddfce"><div class="ttname"><a href="group__security.html#ggad092160c037d01929df1bb8d5b75b43cac9d764c27bc5b541bd5e7a4c42eddfce">TLS_HANDSHAKE_COMPLETE</a></div><div class="ttdeci">@ TLS_HANDSHAKE_COMPLETE</div><div class="ttdef"><b>Definition</b> <a href="SocketTLS_8h_source.html#l00189">SocketTLS.h:189</a></div></div>
<div class="ttc" id="agroup__security_html_structSocketTLSContext__T"><div class="ttname"><a href="group__security.html#structSocketTLSContext__T">SocketTLSContext_T</a></div><div class="ttdoc">TLS context structure for managing OpenSSL SSL_CTX with secure defaults, certificates,...</div><div class="ttdef"><b>Definition</b> <a href="SocketTLS-private_8h_source.html#l00640">SocketTLS-private.h:641</a></div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md33"></a>
Unix Domain Socket Server</h2>
<p>High-performance local IPC.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Socket_8h.html">socket/Socket.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *socket_path = <span class="stringliteral">&quot;/tmp/myapp.sock&quot;</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Remove stale socket file */</span></div>
<div class="line">    unlink(socket_path);</div>
<div class="line">    </div>
<div class="line">    Socket_T server = <a class="code hl_function" href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a>(AF_UNIX, SOCK_STREAM, 0);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#gacb65d693d8c93e2a1fe6411dd0d0af98">Socket_bind</a>(server, socket_path, 0);</div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#gab24b026bc4c69e6f766211f44675e189">Socket_listen</a>(server, 10);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Unix socket server at %s\n&quot;</span>, socket_path);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">while</span> (1) {</div>
<div class="line">            Socket_T client = <a class="code hl_function" href="group__core__io.html#ga32b67d95639513cd6a602f6175b48f15">Socket_accept</a>(server);</div>
<div class="line">            <span class="keywordflow">if</span> (client) {</div>
<div class="line">                <span class="keywordtype">char</span> buf[1024];</div>
<div class="line">                ssize_t n = <a class="code hl_function" href="group__core__io.html#ga95db343f47445925cecd6b20054518e9">Socket_recv</a>(client, buf, <span class="keyword">sizeof</span>(buf) - 1);</div>
<div class="line">                <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">                    buf[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Received: %s\n&quot;</span>, buf);</div>
<div class="line">                    <a class="code hl_function" href="group__core__io.html#ga6ea9ad33d78c50d327c9677b52849bcb">Socket_sendall</a>(client, <span class="stringliteral">&quot;OK&quot;</span>, 2);</div>
<div class="line">                }</div>
<div class="line">                <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;client);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga225f4a8fd657fd52a05146c6fc4f58b0">Socket_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;server);</div>
<div class="line">    unlink(socket_path);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md35"></a>
Happy Eyeballs (Fast Dual-Stack)</h2>
<p>Race IPv4 and IPv6 for fastest connection (RFC 8305).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketHappyEyeballs_8h.html">socket/SocketHappyEyeballs.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <span class="comment">/* Races IPv4/IPv6 and returns first successful connection */</span></div>
<div class="line">        Socket_T sock = <a class="code hl_function" href="group__async__io.html#ga5ef2e9ba01aa72f8a3ae864a1ba58bc3">SocketHappyEyeballs_connect</a>(<span class="stringliteral">&quot;google.com&quot;</span>, 80, NULL);</div>
<div class="line">        </div>
<div class="line">        printf(<span class="stringliteral">&quot;Connected via %s\n&quot;</span>, </div>
<div class="line">               Socket_family(sock) == AF_INET6 ? <span class="stringliteral">&quot;IPv6&quot;</span> : <span class="stringliteral">&quot;IPv4&quot;</span>);</div>
<div class="line">        </div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *request = <span class="stringliteral">&quot;GET / HTTP/1.0\r\nHost: google.com\r\n\r\n&quot;</span>;</div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#ga6ea9ad33d78c50d327c9677b52849bcb">Socket_sendall</a>(sock, request, strlen(request));</div>
<div class="line">        </div>
<div class="line">        <span class="keywordtype">char</span> buf[1024];</div>
<div class="line">        ssize_t n = <a class="code hl_function" href="group__core__io.html#ga95db343f47445925cecd6b20054518e9">Socket_recv</a>(sock, buf, <span class="keyword">sizeof</span>(buf) - 1);</div>
<div class="line">        <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">            buf[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">            printf(<span class="stringliteral">&quot;Response: %.100s...\n&quot;</span>, buf);</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;sock);</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__async__io.html#ga2189771ae05195653ab16170d72a251d">SocketHE_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Connection failed: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aSocketHappyEyeballs_8h_html"><div class="ttname"><a href="SocketHappyEyeballs_8h.html">SocketHappyEyeballs.h</a></div><div class="ttdoc">Happy Eyeballs (RFC 8305) implementation for fast dual-stack connections.</div></div>
<div class="ttc" id="agroup__async__io_html_ga2189771ae05195653ab16170d72a251d"><div class="ttname"><a href="group__async__io.html#ga2189771ae05195653ab16170d72a251d">SocketHE_Failed</a></div><div class="ttdeci">const Except_T SocketHE_Failed</div><div class="ttdoc">Exception raised on Happy Eyeballs failures.</div></div>
<div class="ttc" id="agroup__async__io_html_ga5ef2e9ba01aa72f8a3ae864a1ba58bc3"><div class="ttname"><a href="group__async__io.html#ga5ef2e9ba01aa72f8a3ae864a1ba58bc3">SocketHappyEyeballs_connect</a></div><div class="ttdeci">Socket_T SocketHappyEyeballs_connect(const char *host, int port, const SocketHE_Config_T *config)</div><div class="ttdoc">Perform synchronous Happy Eyeballs connection to host (RFC 8305 compliant).</div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md37"></a>
Auto-Reconnecting Client</h2>
<p>Resilient connection with exponential backoff.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketReconnect_8h.html">socket/SocketReconnect.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> on_state_change(<a class="code hl_struct" href="group__connection__mgmt.html#structSocketReconnect__T">SocketReconnect_T</a> conn, </div>
<div class="line">                     <a class="code hl_enumeration" href="group__connection__mgmt.html#gab0f7f9254ebc5d681f058d6b2c26f548">SocketReconnect_State</a> state, </div>
<div class="line">                     <span class="keywordtype">void</span> *userdata)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *states[] = {</div>
<div class="line">        <span class="stringliteral">&quot;DISCONNECTED&quot;</span>, <span class="stringliteral">&quot;CONNECTING&quot;</span>, <span class="stringliteral">&quot;CONNECTED&quot;</span>, </div>
<div class="line">        <span class="stringliteral">&quot;BACKOFF&quot;</span>, <span class="stringliteral">&quot;CIRCUIT_OPEN&quot;</span></div>
<div class="line">    };</div>
<div class="line">    printf(<span class="stringliteral">&quot;State: %s\n&quot;</span>, states[state]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Configure reconnection policy */</span></div>
<div class="line">    <a class="code hl_struct" href="group__connection__mgmt.html#structSocketReconnect__Policy__T">SocketReconnect_Policy_T</a> policy;</div>
<div class="line">    <a class="code hl_function" href="group__connection__mgmt.html#ga4bc781f13408c70bfe9d28148ac87212">SocketReconnect_policy_defaults</a>(&amp;policy);</div>
<div class="line">    policy.<a class="code hl_variable" href="group__connection__mgmt.html#abd49613f2c70d36afe1822ca33ec1a0e">max_attempts</a> = 10;</div>
<div class="line">    policy.<a class="code hl_variable" href="group__connection__mgmt.html#abf740738ffd922747329556ebd6052ca">initial_delay_ms</a> = 100;</div>
<div class="line">    policy.<a class="code hl_variable" href="group__connection__mgmt.html#aea494798fa2b191e8a0cc3b7c64ca0a2">max_delay_ms</a> = 30000;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_struct" href="group__connection__mgmt.html#structSocketReconnect__T">SocketReconnect_T</a> conn = <a class="code hl_function" href="group__connection__mgmt.html#ga2064741bf60283ac3315823128fa2082">SocketReconnect_new</a>(</div>
<div class="line">        <span class="stringliteral">&quot;127.0.0.1&quot;</span>, 8080, &amp;policy, on_state_change, NULL);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Start connection */</span></div>
<div class="line">    <a class="code hl_function" href="group__connection__mgmt.html#ga2669844f3ad8a19649f2bc204eee8401">SocketReconnect_connect</a>(conn);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Simple event loop */</span></div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <a class="code hl_function" href="group__connection__mgmt.html#ga8dd2c1fe7147188da2be29f7623d2822">SocketReconnect_tick</a>(conn);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__connection__mgmt.html#ga490043a4bfaba8214f5d10a3c7b956de">SocketReconnect_isconnected</a>(conn)) {</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">char</span> *msg = <span class="stringliteral">&quot;ping&quot;</span>;</div>
<div class="line">            ssize_t n = <a class="code hl_function" href="group__connection__mgmt.html#gae1f6cbe69ac37f9bae1efccfe98538ee">SocketReconnect_send</a>(conn, msg, strlen(msg));</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">                <span class="keywordtype">char</span> buf[256];</div>
<div class="line">                n = <a class="code hl_function" href="group__connection__mgmt.html#ga92485113993efb3a1302bbcb8f57a908">SocketReconnect_recv</a>(conn, buf, <span class="keyword">sizeof</span>(buf) - 1);</div>
<div class="line">                <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">                    buf[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Response: %s\n&quot;</span>, buf);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        usleep(1000000); <span class="comment">/* 1 second */</span></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__connection__mgmt.html#ga9d8b4dd4a693ba7acb20ff8e78defe91">SocketReconnect_free</a>(&amp;conn);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aSocketReconnect_8h_html"><div class="ttname"><a href="SocketReconnect_8h.html">SocketReconnect.h</a></div><div class="ttdoc">Automatic reconnection framework with exponential backoff and circuit breaker.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_abd49613f2c70d36afe1822ca33ec1a0e"><div class="ttname"><a href="group__connection__mgmt.html#abd49613f2c70d36afe1822ca33ec1a0e">SocketReconnect_Policy_T::max_attempts</a></div><div class="ttdeci">int max_attempts</div><div class="ttdef"><b>Definition</b> <a href="SocketReconnect_8h_source.html#l00119">SocketReconnect.h:119</a></div></div>
<div class="ttc" id="agroup__connection__mgmt_html_abf740738ffd922747329556ebd6052ca"><div class="ttname"><a href="group__connection__mgmt.html#abf740738ffd922747329556ebd6052ca">SocketReconnect_Policy_T::initial_delay_ms</a></div><div class="ttdeci">int initial_delay_ms</div><div class="ttdef"><b>Definition</b> <a href="SocketReconnect_8h_source.html#l00115">SocketReconnect.h:115</a></div></div>
<div class="ttc" id="agroup__connection__mgmt_html_aea494798fa2b191e8a0cc3b7c64ca0a2"><div class="ttname"><a href="group__connection__mgmt.html#aea494798fa2b191e8a0cc3b7c64ca0a2">SocketReconnect_Policy_T::max_delay_ms</a></div><div class="ttdeci">int max_delay_ms</div><div class="ttdef"><b>Definition</b> <a href="SocketReconnect_8h_source.html#l00116">SocketReconnect.h:116</a></div></div>
<div class="ttc" id="agroup__connection__mgmt_html_ga2064741bf60283ac3315823128fa2082"><div class="ttname"><a href="group__connection__mgmt.html#ga2064741bf60283ac3315823128fa2082">SocketReconnect_new</a></div><div class="ttdeci">SocketReconnect_T SocketReconnect_new(const char *host, int port, const SocketReconnect_Policy_T *policy, SocketReconnect_Callback callback, void *userdata)</div><div class="ttdoc">Create a new reconnecting connection.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_ga2669844f3ad8a19649f2bc204eee8401"><div class="ttname"><a href="group__connection__mgmt.html#ga2669844f3ad8a19649f2bc204eee8401">SocketReconnect_connect</a></div><div class="ttdeci">void SocketReconnect_connect(SocketReconnect_T conn)</div><div class="ttdoc">Start connection process or queue for retry.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_ga490043a4bfaba8214f5d10a3c7b956de"><div class="ttname"><a href="group__connection__mgmt.html#ga490043a4bfaba8214f5d10a3c7b956de">SocketReconnect_isconnected</a></div><div class="ttdeci">int SocketReconnect_isconnected(SocketReconnect_T conn)</div><div class="ttdoc">Check if reconnection is currently in connected state.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_ga4bc781f13408c70bfe9d28148ac87212"><div class="ttname"><a href="group__connection__mgmt.html#ga4bc781f13408c70bfe9d28148ac87212">SocketReconnect_policy_defaults</a></div><div class="ttdeci">void SocketReconnect_policy_defaults(SocketReconnect_Policy_T *policy)</div><div class="ttdoc">Initialize SocketReconnect_Policy_T with default values.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_ga8dd2c1fe7147188da2be29f7623d2822"><div class="ttname"><a href="group__connection__mgmt.html#ga8dd2c1fe7147188da2be29f7623d2822">SocketReconnect_tick</a></div><div class="ttdeci">void SocketReconnect_tick(SocketReconnect_T conn)</div><div class="ttdoc">Advance internal timers and check for state transitions.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_ga92485113993efb3a1302bbcb8f57a908"><div class="ttname"><a href="group__connection__mgmt.html#ga92485113993efb3a1302bbcb8f57a908">SocketReconnect_recv</a></div><div class="ttdeci">ssize_t SocketReconnect_recv(SocketReconnect_T conn, void *buf, size_t len)</div><div class="ttdoc">Receive data, triggering reconnect on EOF or error.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_ga9d8b4dd4a693ba7acb20ff8e78defe91"><div class="ttname"><a href="group__connection__mgmt.html#ga9d8b4dd4a693ba7acb20ff8e78defe91">SocketReconnect_free</a></div><div class="ttdeci">void SocketReconnect_free(SocketReconnect_T *conn)</div><div class="ttdoc">Free a reconnecting connection.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_gab0f7f9254ebc5d681f058d6b2c26f548"><div class="ttname"><a href="group__connection__mgmt.html#gab0f7f9254ebc5d681f058d6b2c26f548">SocketReconnect_State</a></div><div class="ttdeci">SocketReconnect_State</div><div class="ttdoc">Enumeration of possible states in the reconnection state machine.</div><div class="ttdef"><b>Definition</b> <a href="SocketReconnect_8h_source.html#l00090">SocketReconnect.h:91</a></div></div>
<div class="ttc" id="agroup__connection__mgmt_html_gae1f6cbe69ac37f9bae1efccfe98538ee"><div class="ttname"><a href="group__connection__mgmt.html#gae1f6cbe69ac37f9bae1efccfe98538ee">SocketReconnect_send</a></div><div class="ttdeci">ssize_t SocketReconnect_send(SocketReconnect_T conn, const void *buf, size_t len)</div><div class="ttdoc">Send data, automatically reconnecting on connection loss.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_structSocketReconnect__Policy__T"><div class="ttname"><a href="group__connection__mgmt.html#structSocketReconnect__Policy__T">SocketReconnect_Policy_T</a></div><div class="ttdoc">Configuration structure for reconnection backoff and circuit breaker policy.</div><div class="ttdef"><b>Definition</b> <a href="SocketReconnect_8h_source.html#l00112">SocketReconnect.h:113</a></div></div>
<div class="ttc" id="agroup__connection__mgmt_html_structSocketReconnect__T"><div class="ttname"><a href="group__connection__mgmt.html#structSocketReconnect__T">SocketReconnect_T</a></div><div class="ttdoc">Opaque context for managing reconnecting socket connections.</div><div class="ttdef"><b>Definition</b> <a href="SocketReconnect-private_8h_source.html#l00089">SocketReconnect-private.h:90</a></div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md39"></a>
Connection Pool with Buffers</h2>
<p>Efficiently manage multiple connections.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Socket_8h.html">socket/Socket.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketPool_8h.html">pool/SocketPool.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Arena_8h.html">core/Arena.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_typedef" href="group__foundation.html#gac1ed22b9df4eff7a3398cac608c090cc">Arena_T</a> arena = <a class="code hl_function" href="group__foundation.html#ga6a6d6890eb6ed1248ae1a5f0c677c7a4">Arena_new</a>();</div>
<div class="line">    <a class="code hl_struct" href="SocketPool-private_8h.html#structSocketPool__T">SocketPool_T</a> pool = <a class="code hl_function" href="group__connection__mgmt.html#ga2774ba952af4a9a218e33b492aed1a18">SocketPool_new</a>(arena, 1000, 8192);</div>
<div class="line">    </div>
<div class="line">    Socket_T server = <a class="code hl_function" href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a>(AF_INET, SOCK_STREAM, 0);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga2c6f352cec920859c71206898ed135fc">Socket_setreuseaddr</a>(server);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gacb65d693d8c93e2a1fe6411dd0d0af98">Socket_bind</a>(server, NULL, 8080);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gab24b026bc4c69e6f766211f44675e189">Socket_listen</a>(server, 128);</div>
<div class="line">    </div>
<div class="line">    printf(<span class="stringliteral">&quot;Pool server on port 8080\n&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <span class="keywordflow">while</span> (1) {</div>
<div class="line">            Socket_T client = <a class="code hl_function" href="group__core__io.html#ga32b67d95639513cd6a602f6175b48f15">Socket_accept</a>(server);</div>
<div class="line">            <span class="keywordflow">if</span> (!client) <span class="keywordflow">continue</span>;</div>
<div class="line">            </div>
<div class="line">            <span class="comment">/* Add to pool - automatically creates buffers */</span></div>
<div class="line">            Connection_T conn = <a class="code hl_function" href="group__connection__mgmt.html#gac7720c7b7d679624fa95bdefe9a38494">SocketPool_add</a>(pool, client);</div>
<div class="line">            </div>
<div class="line">            <span class="comment">/* Get connection&#39;s I/O buffers */</span></div>
<div class="line">            <a class="code hl_typedef" href="group__core__io.html#gad4b3ec10874282833e1b15760efa1b6c">SocketBuf_T</a> input = Connection_input(conn);</div>
<div class="line">            <a class="code hl_typedef" href="group__core__io.html#gad4b3ec10874282833e1b15760efa1b6c">SocketBuf_T</a> output = Connection_output(conn);</div>
<div class="line">            </div>
<div class="line">            <span class="comment">/* Read into input buffer */</span></div>
<div class="line">            ssize_t n = <a class="code hl_function" href="group__core__io.html#ga4aacfb9008833f24abec18b1d65d0d42">SocketBuf_read</a>(input, <a class="code hl_function" href="group__core__io.html#ga4d727948c677509eec04746585819877">Socket_fd</a>(client));</div>
<div class="line">            <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">                <span class="comment">/* Copy input to output and send */</span></div>
<div class="line">                <span class="keywordtype">size_t</span> len = SocketBuf_readable(input);</div>
<div class="line">                SocketBuf_append(output, <a class="code hl_function" href="group__core__io.html#gae4d5d95ed126030f6414b7f607cd555e">SocketBuf_readptr</a>(input), len);</div>
<div class="line">                SocketBuf_flush(output, <a class="code hl_function" href="group__core__io.html#ga4d727948c677509eec04746585819877">Socket_fd</a>(client));</div>
<div class="line">            }</div>
<div class="line">            </div>
<div class="line">            <span class="comment">/* Look up connection later by socket */</span></div>
<div class="line">            Connection_T found = <a class="code hl_function" href="group__connection__mgmt.html#ga21b17f01e3036b53fed194c6b3c0b95f">SocketPool_get</a>(pool, client);</div>
<div class="line">            printf(<span class="stringliteral">&quot;Connection found: %s\n&quot;</span>, found ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line">            </div>
<div class="line">            <span class="comment">/* Remove and cleanup */</span></div>
<div class="line">            <a class="code hl_function" href="group__connection__mgmt.html#gacdffcf1802367df60db15c649fc7072d">SocketPool_remove</a>(pool, client);</div>
<div class="line">            <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;client);</div>
<div class="line">        }</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga225f4a8fd657fd52a05146c6fc4f58b0">Socket_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Cleanup idle connections older than 300 seconds */</span></div>
<div class="line">    <a class="code hl_function" href="group__connection__mgmt.html#gab2a7df0479b8f9ac899672afdb488b94">SocketPool_cleanup</a>(pool, 300);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__connection__mgmt.html#gafb57544a14c977302953fd36634bd004">SocketPool_free</a>(&amp;pool);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;server);</div>
<div class="line">    <a class="code hl_function" href="group__foundation.html#ga6842e66018614df08139e67826cf3e0d">Arena_dispose</a>(&amp;arena);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aArena_8h_html"><div class="ttname"><a href="Arena_8h.html">Arena.h</a></div><div class="ttdoc">Arena-based memory allocator for efficient bulk memory management.</div></div>
<div class="ttc" id="aSocketPool-private_8h_html_structSocketPool__T"><div class="ttname"><a href="SocketPool-private_8h.html#structSocketPool__T">SocketPool_T</a></div><div class="ttdef"><b>Definition</b> <a href="SocketPool-private_8h_source.html#l00435">SocketPool-private.h:436</a></div></div>
<div class="ttc" id="aSocketPool_8h_html"><div class="ttname"><a href="SocketPool_8h.html">SocketPool.h</a></div><div class="ttdoc">Connection pooling with automatic lifecycle management.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_ga21b17f01e3036b53fed194c6b3c0b95f"><div class="ttname"><a href="group__connection__mgmt.html#ga21b17f01e3036b53fed194c6b3c0b95f">SocketPool_get</a></div><div class="ttdeci">Connection_T SocketPool_get(SocketPool_T pool, Socket_T socket)</div><div class="ttdoc">Look up connection by socket.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_ga2774ba952af4a9a218e33b492aed1a18"><div class="ttname"><a href="group__connection__mgmt.html#ga2774ba952af4a9a218e33b492aed1a18">SocketPool_new</a></div><div class="ttdeci">SocketPool_T SocketPool_new(Arena_T arena, size_t maxconns, size_t bufsize)</div><div class="ttdoc">Create a new connection pool.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_gab2a7df0479b8f9ac899672afdb488b94"><div class="ttname"><a href="group__connection__mgmt.html#gab2a7df0479b8f9ac899672afdb488b94">SocketPool_cleanup</a></div><div class="ttdeci">void SocketPool_cleanup(SocketPool_T pool, time_t idle_timeout)</div><div class="ttdoc">Remove idle connections.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_gac7720c7b7d679624fa95bdefe9a38494"><div class="ttname"><a href="group__connection__mgmt.html#gac7720c7b7d679624fa95bdefe9a38494">SocketPool_add</a></div><div class="ttdeci">Connection_T SocketPool_add(SocketPool_T pool, Socket_T socket)</div><div class="ttdoc">Add socket to pool.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_gacdffcf1802367df60db15c649fc7072d"><div class="ttname"><a href="group__connection__mgmt.html#gacdffcf1802367df60db15c649fc7072d">SocketPool_remove</a></div><div class="ttdeci">void SocketPool_remove(SocketPool_T pool, Socket_T socket)</div><div class="ttdoc">Remove socket from pool.</div></div>
<div class="ttc" id="agroup__connection__mgmt_html_gafb57544a14c977302953fd36634bd004"><div class="ttname"><a href="group__connection__mgmt.html#gafb57544a14c977302953fd36634bd004">SocketPool_free</a></div><div class="ttdeci">void SocketPool_free(SocketPool_T *pool)</div><div class="ttdoc">Free a connection pool.</div></div>
<div class="ttc" id="agroup__core__io_html_ga4aacfb9008833f24abec18b1d65d0d42"><div class="ttname"><a href="group__core__io.html#ga4aacfb9008833f24abec18b1d65d0d42">SocketBuf_read</a></div><div class="ttdeci">size_t SocketBuf_read(SocketBuf_T buf, void *data, size_t len)</div><div class="ttdoc">Read and remove data from the buffer.</div></div>
<div class="ttc" id="agroup__core__io_html_gad4b3ec10874282833e1b15760efa1b6c"><div class="ttname"><a href="group__core__io.html#gad4b3ec10874282833e1b15760efa1b6c">SocketBuf_T</a></div><div class="ttdeci">struct SocketBuf_T * SocketBuf_T</div><div class="ttdoc">Opaque handle to a circular buffer instance.</div><div class="ttdef"><b>Definition</b> <a href="SocketBuf_8h_source.html#l00053">SocketBuf.h:53</a></div></div>
<div class="ttc" id="agroup__core__io_html_gae4d5d95ed126030f6414b7f607cd555e"><div class="ttname"><a href="group__core__io.html#gae4d5d95ed126030f6414b7f607cd555e">SocketBuf_readptr</a></div><div class="ttdeci">const void * SocketBuf_readptr(SocketBuf_T buf, size_t *len)</div><div class="ttdoc">Obtain a direct pointer to readable data for zero-copy access.</div></div>
<div class="ttc" id="agroup__foundation_html_ga6842e66018614df08139e67826cf3e0d"><div class="ttname"><a href="group__foundation.html#ga6842e66018614df08139e67826cf3e0d">Arena_dispose</a></div><div class="ttdeci">void Arena_dispose(Arena_T *ap)</div><div class="ttdoc">Dispose of an arena and all its allocations.</div></div>
<div class="ttc" id="agroup__foundation_html_ga6a6d6890eb6ed1248ae1a5f0c677c7a4"><div class="ttname"><a href="group__foundation.html#ga6a6d6890eb6ed1248ae1a5f0c677c7a4">Arena_new</a></div><div class="ttdeci">Arena_T Arena_new(void)</div><div class="ttdoc">Create a new memory arena.</div></div>
<div class="ttc" id="agroup__foundation_html_gac1ed22b9df4eff7a3398cac608c090cc"><div class="ttname"><a href="group__foundation.html#gac1ed22b9df4eff7a3398cac608c090cc">Arena_T</a></div><div class="ttdeci">struct Arena_T * Arena_T</div><div class="ttdef"><b>Definition</b> <a href="Arena_8h_source.html#l00078">Arena.h:78</a></div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md41"></a>
Async DNS Resolution</h2>
<p>Non-blocking DNS lookup.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketDNS_8h.html">dns/SocketDNS.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SocketPoll_8h.html">poll/SocketPoll.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;netdb.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="group__dns.html#structSocketDNS__T">SocketDNS_T</a> dns = <a class="code hl_function" href="group__dns.html#ga799f4d96c77eef54ecb9be5523b591fd">SocketDNS_new</a>();</div>
<div class="line">    <a class="code hl_struct" href="group__event__system.html#structSocketPoll__T">SocketPoll_T</a> poll = <a class="code hl_function" href="group__event__system.html#gac1fbd1a09d564f7988b0e427e5707ca7">SocketPoll_new</a>(100);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Start async resolution */</span></div>
<div class="line">    <a class="code hl_struct" href="group__dns.html#structSocketDNS__Request__T">SocketDNS_Request_T</a> req = <a class="code hl_function" href="group__dns.html#ga380629d9c1650963341d1fe1dacd3253">SocketDNS_resolve</a>(</div>
<div class="line">        dns, <span class="stringliteral">&quot;example.com&quot;</span>, 443, NULL, NULL);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Get poll fd for DNS completion */</span></div>
<div class="line">    <span class="keywordtype">int</span> dns_fd = <a class="code hl_function" href="group__dns.html#ga9228880ada42145db04298282b5f0c80">SocketDNS_pollfd</a>(dns);</div>
<div class="line">    <span class="comment">/* Note: Add dns_fd to your poll set */</span></div>
<div class="line">    </div>
<div class="line">    printf(<span class="stringliteral">&quot;Resolving example.com...\n&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Poll for completion */</span></div>
<div class="line">    <span class="keywordflow">while</span> (!SocketDNS_iscomplete(req)) {</div>
<div class="line">        usleep(10000);</div>
<div class="line">        <a class="code hl_function" href="group__dns.html#gad8f2fa5ee464e84f44b4b6059b4813e5">SocketDNS_check</a>(dns);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Get result */</span></div>
<div class="line">    <span class="keyword">struct </span>addrinfo *result = <a class="code hl_function" href="group__dns.html#ga8f7c4c4455c9158ccd272fe8c15235b5">SocketDNS_getresult</a>(req);</div>
<div class="line">    <span class="keywordflow">if</span> (result) {</div>
<div class="line">        <span class="keywordtype">char</span> host[256];</div>
<div class="line">        getnameinfo(result-&gt;ai_addr, result-&gt;ai_addrlen,</div>
<div class="line">                   host, <span class="keyword">sizeof</span>(host), NULL, 0, NI_NUMERICHOST);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Resolved to: %s\n&quot;</span>, host);</div>
<div class="line">        freeaddrinfo(result);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Resolution failed\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__dns.html#gabdc83f21f67b5b8557f35d7ffa4c839c">SocketDNS_free</a>(&amp;dns);</div>
<div class="line">    <a class="code hl_function" href="group__event__system.html#gaca744c50badbdb869c52088b9f32f8d2">SocketPoll_free</a>(&amp;poll);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aSocketDNS_8h_html"><div class="ttname"><a href="SocketDNS_8h.html">SocketDNS.h</a></div><div class="ttdoc">Asynchronous DNS resolution API.</div></div>
<div class="ttc" id="agroup__dns_html_ga380629d9c1650963341d1fe1dacd3253"><div class="ttname"><a href="group__dns.html#ga380629d9c1650963341d1fe1dacd3253">SocketDNS_resolve</a></div><div class="ttdeci">Request_T SocketDNS_resolve(SocketDNS_T dns, const char *host, int port, SocketDNS_Callback callback, void *data)</div><div class="ttdoc">Start asynchronous DNS resolution.</div></div>
<div class="ttc" id="agroup__dns_html_ga799f4d96c77eef54ecb9be5523b591fd"><div class="ttname"><a href="group__dns.html#ga799f4d96c77eef54ecb9be5523b591fd">SocketDNS_new</a></div><div class="ttdeci">SocketDNS_T SocketDNS_new(void)</div><div class="ttdoc">Create a new asynchronous DNS resolver.</div></div>
<div class="ttc" id="agroup__dns_html_ga8f7c4c4455c9158ccd272fe8c15235b5"><div class="ttname"><a href="group__dns.html#ga8f7c4c4455c9158ccd272fe8c15235b5">SocketDNS_getresult</a></div><div class="ttdeci">struct addrinfo * SocketDNS_getresult(SocketDNS_T dns, Request_T req)</div><div class="ttdoc">Get result of completed request.</div></div>
<div class="ttc" id="agroup__dns_html_ga9228880ada42145db04298282b5f0c80"><div class="ttname"><a href="group__dns.html#ga9228880ada42145db04298282b5f0c80">SocketDNS_pollfd</a></div><div class="ttdeci">int SocketDNS_pollfd(SocketDNS_T dns)</div><div class="ttdoc">Get pollable file descriptor for SocketPoll integration.</div></div>
<div class="ttc" id="agroup__dns_html_gabdc83f21f67b5b8557f35d7ffa4c839c"><div class="ttname"><a href="group__dns.html#gabdc83f21f67b5b8557f35d7ffa4c839c">SocketDNS_free</a></div><div class="ttdeci">void SocketDNS_free(SocketDNS_T *dns)</div><div class="ttdoc">Free a DNS resolver.</div></div>
<div class="ttc" id="agroup__dns_html_gad8f2fa5ee464e84f44b4b6059b4813e5"><div class="ttname"><a href="group__dns.html#gad8f2fa5ee464e84f44b4b6059b4813e5">SocketDNS_check</a></div><div class="ttdeci">int SocketDNS_check(SocketDNS_T dns)</div><div class="ttdoc">Check for completed requests (non-blocking).</div></div>
<div class="ttc" id="agroup__dns_html_structSocketDNS__Request__T"><div class="ttname"><a href="group__dns.html#structSocketDNS__Request__T">SocketDNS_Request_T</a></div><div class="ttdoc">DNS resolution request structure.</div><div class="ttdef"><b>Definition</b> <a href="SocketDNS-private_8h_source.html#l00172">SocketDNS-private.h:173</a></div></div>
<div class="ttc" id="agroup__dns_html_structSocketDNS__T"><div class="ttname"><a href="group__dns.html#structSocketDNS__T">SocketDNS_T</a></div><div class="ttdoc">Async DNS resolver structure.</div><div class="ttdef"><b>Definition</b> <a href="SocketDNS-private_8h_source.html#l00204">SocketDNS-private.h:205</a></div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md43"></a>
Zero-Copy File Transfer</h2>
<p>Efficient file sending with sendfile().</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Socket_8h.html">socket/Socket.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (argc &lt; 3) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Usage: %s &lt;host&gt; &lt;file&gt;\n&quot;</span>, argv[0]);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">int</span> file_fd = open(argv[2], O_RDONLY);</div>
<div class="line">    <span class="keywordflow">if</span> (file_fd &lt; 0) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;open&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">struct </span>stat st;</div>
<div class="line">    fstat(file_fd, &amp;st);</div>
<div class="line">    </div>
<div class="line">    Socket_T sock = <a class="code hl_function" href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a>(AF_INET, SOCK_STREAM, 0);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#gac14390090ee26136c1f7a816fc08406e">Socket_connect</a>(sock, argv[1], 8080);</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Zero-copy transfer - kernel sends directly from page cache */</span></div>
<div class="line">        off_t offset = 0;</div>
<div class="line">        ssize_t sent = <a class="code hl_function" href="group__core__io.html#ga6262f6ab4c927347abc0fb3c105a0575">Socket_sendfileall</a>(sock, file_fd, &amp;offset, st.st_size);</div>
<div class="line">        </div>
<div class="line">        printf(<span class="stringliteral">&quot;Sent %zd bytes (file size: %ld)\n&quot;</span>, sent, st.st_size);</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga225f4a8fd657fd52a05146c6fc4f58b0">Socket_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    close(file_fd);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;sock);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__core__io_html_ga6262f6ab4c927347abc0fb3c105a0575"><div class="ttname"><a href="group__core__io.html#ga6262f6ab4c927347abc0fb3c105a0575">Socket_sendfileall</a></div><div class="ttdeci">ssize_t Socket_sendfileall(Socket_T socket, int file_fd, off_t *offset, size_t count)</div><div class="ttdoc">Zero-copy file-to-socket transfer (handles partial transfers).</div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md45"></a>
Scatter/Gather I/O</h2>
<p>Send multiple buffers efficiently with writev().</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Socket_8h.html">socket/Socket.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Except_8h.html">core/Except.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/uio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    Socket_T sock = <a class="code hl_function" href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a>(AF_INET, SOCK_STREAM, 0);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">        <a class="code hl_function" href="group__core__io.html#gac14390090ee26136c1f7a816fc08406e">Socket_connect</a>(sock, <span class="stringliteral">&quot;127.0.0.1&quot;</span>, 8080);</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Prepare multiple buffers */</span></div>
<div class="line">        <span class="keywordtype">char</span> header[] = <span class="stringliteral">&quot;HEADER:&quot;</span>;</div>
<div class="line">        <span class="keywordtype">char</span> body[] = <span class="stringliteral">&quot;This is the message body&quot;</span>;</div>
<div class="line">        <span class="keywordtype">char</span> footer[] = <span class="stringliteral">&quot;:END&quot;</span>;</div>
<div class="line">        </div>
<div class="line">        <span class="keyword">struct </span>iovec iov[3];</div>
<div class="line">        iov[0].iov_base = header;</div>
<div class="line">        iov[0].iov_len = strlen(header);</div>
<div class="line">        iov[1].iov_base = body;</div>
<div class="line">        iov[1].iov_len = strlen(body);</div>
<div class="line">        iov[2].iov_base = footer;</div>
<div class="line">        iov[2].iov_len = strlen(footer);</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Send all buffers in one syscall */</span></div>
<div class="line">        ssize_t sent = <a class="code hl_function" href="group__core__io.html#gaf6d033a04d5041249950fa2f54a8d9fd">Socket_sendvall</a>(sock, iov, 3);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Sent %zd bytes across 3 buffers\n&quot;</span>, sent);</div>
<div class="line">        </div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga225f4a8fd657fd52a05146c6fc4f58b0">Socket_Failed</a>)</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line">    <a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;sock);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__core__io_html_gaf6d033a04d5041249950fa2f54a8d9fd"><div class="ttname"><a href="group__core__io.html#gaf6d033a04d5041249950fa2f54a8d9fd">Socket_sendvall</a></div><div class="ttdeci">ssize_t Socket_sendvall(Socket_T socket, const struct iovec *iov, int iovcnt)</div><div class="ttdoc">Scatter/gather send all (handles partial sends).</div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md47"></a>
Advanced TCP Options</h2>
<p>Configure socket behavior for specific use cases.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Socket_8h.html">socket/Socket.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="graceful__shutdown_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    signal(SIGPIPE, SIG_IGN);</div>
<div class="line">    </div>
<div class="line">    Socket_T sock = <a class="code hl_function" href="group__core__io.html#ga6212fb2b6eefa567592a59f55c25a6f1">Socket_new</a>(AF_INET, SOCK_STREAM, 0);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Disable Nagle&#39;s algorithm for low-latency */</span></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga55174d7f9aca0e94d25321540646e6b0">Socket_setnodelay</a>(sock);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Set buffer sizes */</span></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga430b3464f6e656f4d8884031deffa507">Socket_setsndbuf</a>(sock, 256 * 1024);  <span class="comment">/* 256KB send buffer */</span></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gad59dc86a3f3728e75983daa0f5b34550">Socket_setrcvbuf</a>(sock, 256 * 1024);  <span class="comment">/* 256KB recv buffer */</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Enable keepalive */</span></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gaf03ef2a81d1894713aeb96c12bb2389b">Socket_setkeepalive</a>(sock, 60, 10, 5);  <span class="comment">/* idle=60s, interval=10s, count=5 */</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Set timeouts */</span></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga210cbf763685c0b201b0f5caa2dc0f06">Socket_settimeout</a>(sock, 30000);  <span class="comment">/* 30 second timeout */</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Linux-specific: Set congestion control */</span></div>
<div class="line"><span class="preprocessor">    #ifdef __linux__</span></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gae144a341a05e25011d95761368eefe13">Socket_setcongestion</a>(sock, <span class="stringliteral">&quot;bbr&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* TCP Fast Open (client side) */</span></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gaa7c1651e6f9e3e97ddab01d40ac1d39d">Socket_setfastopen</a>(sock, 1);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* TCP user timeout */</span></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gabfad0f5567b5f8720a4667e13e79f282">Socket_setusertimeout</a>(sock, 30000);</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line">    </div>
<div class="line">    printf(<span class="stringliteral">&quot;Send buffer: %d\n&quot;</span>, <a class="code hl_function" href="group__core__io.html#ga23a3e2bbff42609e2e4089d5e6c55bbd">Socket_getsndbuf</a>(sock));</div>
<div class="line">    printf(<span class="stringliteral">&quot;Recv buffer: %d\n&quot;</span>, <a class="code hl_function" href="group__core__io.html#ga73b2908934ed8757725da6e6d22ff60c">Socket_getrcvbuf</a>(sock));</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;sock);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__core__io_html_ga210cbf763685c0b201b0f5caa2dc0f06"><div class="ttname"><a href="group__core__io.html#ga210cbf763685c0b201b0f5caa2dc0f06">Socket_settimeout</a></div><div class="ttdeci">void Socket_settimeout(Socket_T socket, int timeout_sec)</div><div class="ttdoc">Set socket timeout.</div></div>
<div class="ttc" id="agroup__core__io_html_ga23a3e2bbff42609e2e4089d5e6c55bbd"><div class="ttname"><a href="group__core__io.html#ga23a3e2bbff42609e2e4089d5e6c55bbd">Socket_getsndbuf</a></div><div class="ttdeci">int Socket_getsndbuf(Socket_T socket)</div><div class="ttdoc">Get send buffer size.</div></div>
<div class="ttc" id="agroup__core__io_html_ga430b3464f6e656f4d8884031deffa507"><div class="ttname"><a href="group__core__io.html#ga430b3464f6e656f4d8884031deffa507">Socket_setsndbuf</a></div><div class="ttdeci">void Socket_setsndbuf(Socket_T socket, int size)</div><div class="ttdoc">Set send buffer size.</div></div>
<div class="ttc" id="agroup__core__io_html_ga55174d7f9aca0e94d25321540646e6b0"><div class="ttname"><a href="group__core__io.html#ga55174d7f9aca0e94d25321540646e6b0">Socket_setnodelay</a></div><div class="ttdeci">void Socket_setnodelay(Socket_T socket, int nodelay)</div><div class="ttdoc">Disable Nagle's algorithm.</div></div>
<div class="ttc" id="agroup__core__io_html_ga73b2908934ed8757725da6e6d22ff60c"><div class="ttname"><a href="group__core__io.html#ga73b2908934ed8757725da6e6d22ff60c">Socket_getrcvbuf</a></div><div class="ttdeci">int Socket_getrcvbuf(Socket_T socket)</div><div class="ttdoc">Get receive buffer size.</div></div>
<div class="ttc" id="agroup__core__io_html_gaa7c1651e6f9e3e97ddab01d40ac1d39d"><div class="ttname"><a href="group__core__io.html#gaa7c1651e6f9e3e97ddab01d40ac1d39d">Socket_setfastopen</a></div><div class="ttdeci">void Socket_setfastopen(Socket_T socket, int enable)</div><div class="ttdoc">Enable TCP Fast Open.</div></div>
<div class="ttc" id="agroup__core__io_html_gabfad0f5567b5f8720a4667e13e79f282"><div class="ttname"><a href="group__core__io.html#gabfad0f5567b5f8720a4667e13e79f282">Socket_setusertimeout</a></div><div class="ttdeci">void Socket_setusertimeout(Socket_T socket, unsigned int timeout_ms)</div><div class="ttdoc">Set TCP user timeout.</div></div>
<div class="ttc" id="agroup__core__io_html_gad59dc86a3f3728e75983daa0f5b34550"><div class="ttname"><a href="group__core__io.html#gad59dc86a3f3728e75983daa0f5b34550">Socket_setrcvbuf</a></div><div class="ttdeci">void Socket_setrcvbuf(Socket_T socket, int size)</div><div class="ttdoc">Set receive buffer size.</div></div>
<div class="ttc" id="agroup__core__io_html_gae144a341a05e25011d95761368eefe13"><div class="ttname"><a href="group__core__io.html#gae144a341a05e25011d95761368eefe13">Socket_setcongestion</a></div><div class="ttdeci">void Socket_setcongestion(Socket_T socket, const char *algorithm)</div><div class="ttdoc">Set TCP congestion control algorithm.</div></div>
<div class="ttc" id="agroup__core__io_html_gaf03ef2a81d1894713aeb96c12bb2389b"><div class="ttname"><a href="group__core__io.html#gaf03ef2a81d1894713aeb96c12bb2389b">Socket_setkeepalive</a></div><div class="ttdeci">void Socket_setkeepalive(Socket_T socket, int idle, int interval, int count)</div><div class="ttdoc">Enable TCP keepalive.</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md49"></a>
Header Files</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Header   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="Socket_8h.html" target="_blank">Socket.h</a>   </td><td class="markdownTableBodyNone">TCP stream sockets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="SocketDgram_8h.html" target="_blank">SocketDgram.h</a>   </td><td class="markdownTableBodyNone">UDP datagram sockets    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="SocketPoll_8h.html" target="_blank">SocketPoll.h</a>   </td><td class="markdownTableBodyNone">Cross-platform event polling    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="SocketPool_8h.html" target="_blank">SocketPool.h</a>   </td><td class="markdownTableBodyNone"><a class="el" href="group__connection__mgmt.html#structConnection" title="Internal structure representing a pooled connection slot.">Connection</a> pooling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="SocketDNS_8h.html" target="_blank">SocketDNS.h</a>   </td><td class="markdownTableBodyNone">Async DNS resolution    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="SocketHappyEyeballs_8h.html" target="_blank">SocketHappyEyeballs.h</a>   </td><td class="markdownTableBodyNone">RFC 8305 implementation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="SocketReconnect_8h.html" target="_blank">SocketReconnect.h</a>   </td><td class="markdownTableBodyNone">Auto-reconnection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="SocketTLS_8h.html" target="_blank">SocketTLS.h</a>   </td><td class="markdownTableBodyNone">TLS 1.3 encryption    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="SocketBuf_8h.html" target="_blank">SocketBuf.h</a>   </td><td class="markdownTableBodyNone">I/O buffers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="Arena_8h.html" target="_blank">Arena.h</a>   </td><td class="markdownTableBodyNone">Memory management    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="Except_8h.html" target="_blank">Except.h</a>   </td><td class="markdownTableBodyNone">Exception handling   </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="autotoc_md51"></a>
Error Handling</h1>
<p>All operations use exception-based error handling:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="group__foundation.html#gad2746371528bdf15c3910b7bf217dac0">TRY</a></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#gac14390090ee26136c1f7a816fc08406e">Socket_connect</a>(socket, <span class="stringliteral">&quot;example.com&quot;</span>, 443);</div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga6ea9ad33d78c50d327c9677b52849bcb">Socket_sendall</a>(socket, data, len);</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gab5e72fc2bd41014c75e0ace4feabfe8e">EXCEPT</a>(<a class="code hl_variable" href="group__core__io.html#ga225f4a8fd657fd52a05146c6fc4f58b0">Socket_Failed</a>)</div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;Error: %s\n&quot;</span>, <a class="code hl_function" href="group__foundation.html#gac71a25566cdc9e11eaecb16c966081db">Socket_GetLastError</a>());</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#ga0e2a75478cd44f1666a6aca626c5c50b">FINALLY</a></div>
<div class="line">    <a class="code hl_function" href="group__core__io.html#ga74ad7a9bb8deaf499c59d90d6e411f37">Socket_free</a>(&amp;socket);</div>
<div class="line"><a class="code hl_define" href="group__foundation.html#gae6628ac788ad213363b89dba9868420b">END_TRY</a>;</div>
<div class="ttc" id="agroup__foundation_html_ga0e2a75478cd44f1666a6aca626c5c50b"><div class="ttname"><a href="group__foundation.html#ga0e2a75478cd44f1666a6aca626c5c50b">FINALLY</a></div><div class="ttdeci">#define FINALLY</div><div class="ttdoc">Define cleanup code that executes regardless of exceptions.</div><div class="ttdef"><b>Definition</b> <a href="Except_8h_source.html#l00344">Except.h:344</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md52"></a>
Exception Types</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Exception   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Socket_Failed</code>   </td><td class="markdownTableBodyNone">General socket operation failure    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Socket_Closed</code>   </td><td class="markdownTableBodyNone"><a class="el" href="group__connection__mgmt.html#structConnection" title="Internal structure representing a pooled connection slot.">Connection</a> closed by peer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SocketDgram_Failed</code>   </td><td class="markdownTableBodyNone">UDP operation failure    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>SocketPoll_Failed</code>   </td><td class="markdownTableBodyNone">Event polling error    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SocketDNS_Failed</code>   </td><td class="markdownTableBodyNone">DNS resolution failure    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>SocketHE_Failed</code>   </td><td class="markdownTableBodyNone">Happy Eyeballs failure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SocketTLS_Failed</code>   </td><td class="markdownTableBodyNone">TLS operation error    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>SocketTLS_HandshakeFailed</code>   </td><td class="markdownTableBodyNone">TLS handshake failure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SocketTLS_VerifyFailed</code>   </td><td class="markdownTableBodyNone">Certificate verification failed   </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="autotoc_md54"></a>
Platform Support</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Platform   </th><th class="markdownTableHeadNone">Poll Backend   </th><th class="markdownTableHeadNone">Status    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Linux 2.6+   </td><td class="markdownTableBodyNone">epoll   </td><td class="markdownTableBodyNone">Full support    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">BSD/macOS   </td><td class="markdownTableBodyNone">kqueue   </td><td class="markdownTableBodyNone">Full support    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Other POSIX   </td><td class="markdownTableBodyNone">poll   </td><td class="markdownTableBodyNone">Fallback   </td></tr>
</table>
<p><b>Requirements:</b> POSIX-compliant system, C11 compiler, pthread support.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md56"></a>
Documentation</h1>
<h2><a class="anchor" id="autotoc_md57"></a>
API Reference</h2>
<ul>
<li><b><a href="files.html" target="_blank">Files</a></b> — Header file reference</li>
<li><b><a href="annotated.html" target="_blank">Data Structures</a></b> — Structs and types</li>
<li><b><a href="globals.html" target="_blank">API Reference</a></b> — Complete function index</li>
</ul>
<h2><a class="anchor" id="autotoc_md58"></a>
Guides</h2>
<ul>
<li><b><a class="el" href="http_guide.html">HTTP Guide</a></b> — HTTP/1.1 and HTTP/2 client/server</li>
<li><b><a class="el" href="websocket_guide.html">WebSocket Guide</a></b> — WebSocket client/server (RFC 6455)</li>
<li><b><a class="el" href="proxy_guide.html">Proxy Guide</a></b> — HTTP CONNECT and SOCKS proxy tunneling</li>
<li><b><a class="el" href="security_guide.html">Security Guide</a></b> — TLS configuration and best practices</li>
<li><b><a class="el" href="migration_guide.html">Migration Guide</a></b> — Migrate from libcurl, libevent, etc.</li>
<li><b><a class="el" href="async_io_guide.html">Async I/O Guide</a></b> — io_uring patterns</li>
</ul>
<h2><a class="anchor" id="autotoc_md59"></a>
Examples</h2>
<p>Standalone example programs are in the <code>examples/</code> directory:</p><ul>
<li><code><a class="el" href="http__get_8c.html">http_get.c</a></code> — Simple HTTP GET request</li>
<li><code><a class="el" href="http__post_8c.html">http_post.c</a></code> — HTTP POST with JSON</li>
<li><code><a class="el" href="http2__client_8c.html">http2_client.c</a></code> — HTTP/2 protocol</li>
<li><code><a class="el" href="http__server_8c.html">http_server.c</a></code> — Basic HTTP server</li>
<li><code><a class="el" href="websocket__client_8c.html">websocket_client.c</a></code> — WebSocket client</li>
<li><code><a class="el" href="websocket__server_8c.html">websocket_server.c</a></code> — WebSocket echo server</li>
<li><code><a class="el" href="proxy__connect_8c.html">proxy_connect.c</a></code> — SOCKS5/HTTP proxy tunneling</li>
</ul>
<p>Build examples with <code>cmake -DBUILD_EXAMPLES=ON ..</code> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<hr class="footer"/>
<footer class="footer">
  <div style="max-width: 960px; margin: 0 auto; padding: 40px 24px;">
    <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 40px;">
      <!-- Brand -->
      <div style="flex: 1; min-width: 200px;">
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
          <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); border-radius: 6px;"></div>
          <span style="font-size: 1rem; font-weight: 600; color: #f7f9fa;">Socket Library</span>
        </div>
        <p style="color: #8b98a5; font-size: 0.8125rem; line-height: 1.6; margin: 0;">
          High-performance socket toolkit for POSIX systems with exception-based error handling and TLS 1.3 support.
        </p>
      </div>
      <!-- Links -->
      <div style="display: flex; gap: 48px; flex-wrap: wrap;">
        <div>
          <h4 style="font-size: 0.75rem; font-weight: 600; color: #f7f9fa; text-transform: uppercase; letter-spacing: 0.05em; margin: 0 0 12px 0;">Documentation</h4>
          <ul style="list-style: none; padding: 0; margin: 0;">
            <li style="margin: 6px 0;"><a href="index.html" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">Getting Started</a></li>
            <li style="margin: 6px 0;"><a href="annotated.html" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">Data Structures</a></li>
            <li style="margin: 6px 0;"><a href="globals.html" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">API Reference</a></li>
          </ul>
        </div>
        <div>
          <h4 style="font-size: 0.75rem; font-weight: 600; color: #f7f9fa; text-transform: uppercase; letter-spacing: 0.05em; margin: 0 0 12px 0;">Resources</h4>
          <ul style="list-style: none; padding: 0; margin: 0;">
            <li style="margin: 6px 0;"><a href="files.html" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">Header Files</a></li>
            <li style="margin: 6px 0;"><a href="https://x.com/tetsuocorp" target="_blank" style="color: #8b98a5; text-decoration: none; font-size: 0.8125rem;">Twitter/X</a></li>
          </ul>
        </div>
      </div>
    </div>
    <!-- Bottom -->
    <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #30363d; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px;">
      <div style="display: flex; align-items: center; gap: 12px;">
        <span style="font-size: 0.75rem; font-weight: 500; color: #10b981; background: rgba(16, 185, 129, 0.1); padding: 4px 8px; border-radius: 4px;">C11</span>
        <span style="font-size: 0.75rem; font-weight: 500; color: #3b82f6; background: rgba(59, 130, 246, 0.1); padding: 4px 8px; border-radius: 4px;">POSIX</span>
        <span style="font-size: 0.75rem; font-weight: 500; color: #8b5cf6; background: rgba(139, 92, 246, 0.1); padding: 4px 8px; border-radius: 4px;">TLS 1.3</span>
      </div>
      <div style="color: #6e7681; font-size: 0.75rem; display: flex; align-items: center; gap: 8px;">
        <span>© 2025 Tetsuo Corporation</span>
        <span style="color: #30363d;">·</span>
        <a href="https://opensource.org/licenses/MIT" target="_blank" style="color: #8b98a5; text-decoration: none;">MIT License</a>
      </div>
    </div>
  </div>
</footer>
</body>
</html>
